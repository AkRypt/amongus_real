"use strict";(self.webpackChunkamongus_real=self.webpackChunkamongus_real||[]).push([[179],{2011:(ht,Me,P)=>{P.d(Me,{Dh:()=>fe,GT:()=>_e,cc:()=>Oe,hO:()=>$e,on:()=>z,pX:()=>ce,xv:()=>ve});var d=P(4650),B=P(127),k=P(5813);ht=P.hmd(ht);const se=["ngOnDestroy"],ce=(me,Xe,et,Fe={})=>new Proxy(me,{get:(Ne,De)=>et.runOutsideAngular(()=>{var We;if(me[De])return!(null===(We=Fe?.spy)||void 0===We)&&We.get&&Fe.spy.get(De,me[De]),me[De];if(se.indexOf(De)>-1)return()=>{};const ie=Xe.toPromise().then(he=>{const ye=he&&he[De];return"function"==typeof ye?ye.bind(he):ye&&ye.then?ye.then(Q=>et.run(()=>Q)):et.run(()=>ye)});return new Proxy(()=>{},{get:(he,ye)=>ie[ye],apply:(he,ye,Q)=>ie.then(ee=>{var pe;const oe=ee&&ee(...Q);return!(null===(pe=Fe?.spy)||void 0===pe)&&pe.apply&&Fe.spy.apply(De,Q,oe),oe})})})}),_e=(me,Xe)=>{Xe.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Fe=>{Object.defineProperty(me.prototype,Fe,Object.getOwnPropertyDescriptor(et.prototype||et,Fe))})})};class ue{constructor(Xe){return Xe}}const fe=new d.OlP("angularfire2.app.options"),ve=new d.OlP("angularfire2.app.name");function z(me,Xe,et){const Ne="object"==typeof et&&et||{};Ne.name=Ne.name||"string"==typeof et&&et||"[DEFAULT]";const We=B.Z.apps.filter(ie=>ie&&ie.name===Ne.name)[0]||Xe.runOutsideAngular(()=>B.Z.initializeApp(me,Ne));try{JSON.stringify(me)!==JSON.stringify(We.options)&&G("error",`${We.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ue(We)}const G=(me,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...Xe)},J={provide:ue,useFactory:z,deps:[fe,d.R0b,[new d.FiY,ve]]};let $e=(()=>{class me{constructor(et){B.Z.registerVersion("angularfire",k.q4.full,"core"),B.Z.registerVersion("angularfire",k.q4.full,"app-compat"),B.Z.registerVersion("angular",d.q4F.full,et.toString())}static initializeApp(et,Fe){return{ngModule:me,providers:[{provide:fe,useValue:et},{provide:ve,useValue:Fe}]}}}return me.\u0275fac=function(et){return new(et||me)(d.LFG(d.Lbi))},me.\u0275mod=d.oAB({type:me}),me.\u0275inj=d.cJS({providers:[J]}),me})();function Oe(me,Xe,et,Fe,Ne){const[,De,We]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===me)||[];if(De)return function Ie(me,Xe){try{return me.toString()===Xe.toString()}catch{return me===Xe}}(Ne,We)||(we("error",`${Xe} was already initialized on the ${et} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Ne,was:We})),De;{const ie=Fe();return globalThis.\u0275AngularfireInstanceCache.push([me,ie,Ne]),ie}}const it=!!ht.hot,we=(me,...Xe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[me](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,Me,P)=>{P.d(Me,{q4:()=>rt,iC:()=>ls,HU:()=>Mr,vb:()=>Zs,JM:()=>za});var d=P(4650),B=P(5867),k=P(5861),se=P(9681),ce=P(2090),_e=P(4859),ue=P(1877),fe=P(8766);const ve="@firebase/installations",z="0.5.12",J=`w:${z}`,$e="FIS_v2",Xe=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(C){return C instanceof ce.ZR&&C.code.includes("request-failed")}function Fe({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ne(C){return{token:C.token,requestStatus:2,expiresIn:ee(C.expiresIn),creationTime:Date.now()}}function De(C,D){return We.apply(this,arguments)}function We(){return(We=(0,k.Z)(function*(C,D){const L=(yield D.json()).error;return Xe.create("request-failed",{requestName:C,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function ie({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function he(C,{refreshToken:D}){const M=ie(C);return M.append("Authorization",function pe(C){return`${$e} ${C}`}(D)),M}function ye(C){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(C){const D=yield C();return D.status>=500&&D.status<600?C():D})).apply(this,arguments)}function ee(C){return Number(C.replace("s","000"))}function oe(C,D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},{fid:M}){const L=Fe(C),X=ie(C),ae=D.getImmediate({optional:!0});if(ae){const xt=yield ae.getHeartbeatsHeader();xt&&X.append("x-firebase-client",xt)}const Be={method:"POST",headers:X,body:JSON.stringify({fid:M,authVersion:$e,appId:C.appId,sdkVersion:J})},ut=yield ye(()=>fetch(L,Be));if(ut.ok){const xt=yield ut.json();return{fid:xt.fid||M,registrationStatus:2,refreshToken:xt.refreshToken,authToken:Ne(xt.authToken)}}throw yield De("Create Installation",ut)})).apply(this,arguments)}function je(C){return new Promise(D=>{setTimeout(D,C)})}const Xt=/^[cdef][\w-]{21}$/;function qe(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const M=function mn(C){return function yt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Xt.test(M)?M:""}catch{return""}}function Bn(C){return`${C.appName}!${C.appId}`}const on=new Map;function tn(C,D){const M=Bn(C);br(M,D),function po(C,D){const M=function Tn(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=C=>{br(C.data.key,C.data.fid)}),wr}();M&&M.postMessage({key:C,fid:D}),function Ki(){0===on.size&&wr&&(wr.close(),wr=null)}()}(M,D)}function br(C,D){const M=on.get(C);if(M)for(const L of M)L(D)}let wr=null;const Un="firebase-installations-store";let Mi=null;function Ri(){return Mi||(Mi=(0,fe.X3)("firebase-installations-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Un)}})),Mi}function tt(C,D){return gr.apply(this,arguments)}function gr(){return(gr=(0,k.Z)(function*(C,D){const M=Bn(C),X=(yield Ri()).transaction(Un,"readwrite"),ae=X.objectStore(Un),xe=yield ae.get(M);return yield ae.put(D,M),yield X.done,(!xe||xe.fid!==D.fid)&&tn(C,D.fid),D})).apply(this,arguments)}function Vn(C){return fn.apply(this,arguments)}function fn(){return(fn=(0,k.Z)(function*(C){const D=Bn(C),L=(yield Ri()).transaction(Un,"readwrite");yield L.objectStore(Un).delete(D),yield L.done})).apply(this,arguments)}function Er(C,D){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,k.Z)(function*(C,D){const M=Bn(C),X=(yield Ri()).transaction(Un,"readwrite"),ae=X.objectStore(Un),xe=yield ae.get(M),Be=D(xe);return void 0===Be?yield ae.delete(M):yield ae.put(Be,M),yield X.done,Be&&(!xe||xe.fid!==Be.fid)&&tn(C,Be.fid),Be})).apply(this,arguments)}function wn(C){return In.apply(this,arguments)}function In(){return(In=(0,k.Z)(function*(C){let D;const M=yield Er(C.appConfig,L=>{const X=vn(L),ae=pt(C,X);return D=ae.registrationPromise,ae.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function vn(C){return St(C||{fid:qe(),registrationStatus:0})}function pt(C,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Xe.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function gt(C,D){return Pt.apply(this,arguments)}(C,M);return{installationEntry:M,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Pr(C)}:{installationEntry:D}}function Pt(){return(Pt=(0,k.Z)(function*(C,D){try{const M=yield oe(C,D);return tt(C.appConfig,M)}catch(M){throw et(M)&&409===M.customData.serverCode?yield Vn(C.appConfig):yield tt(C.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Pr(C){return mr.apply(this,arguments)}function mr(){return(mr=(0,k.Z)(function*(C){let D=yield Ir(C.appConfig);for(;1===D.registrationStatus;)yield je(100),D=yield Ir(C.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:L}=yield wn(C);return L||M}return D})).apply(this,arguments)}function Ir(C){return Er(C,D=>{if(!D)throw Xe.create("installation-not-found");return St(D)})}function St(C){return function Sr(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function Bt(C,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,k.Z)(function*({appConfig:C,heartbeatServiceProvider:D},M){const L=Zt(C,M),X=he(C,M),ae=D.getImmediate({optional:!0});if(ae){const xt=yield ae.getHeartbeatsHeader();xt&&X.append("x-firebase-client",xt)}const Be={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:J,appId:C.appId}})},ut=yield ye(()=>fetch(L,Be));if(ut.ok)return Ne(yield ut.json());throw yield De("Generate Auth Token",ut)})).apply(this,arguments)}function Zt(C,{fid:D}){return`${Fe(C)}/${D}/authTokens:generate`}function Y(C){return j.apply(this,arguments)}function j(){return(j=(0,k.Z)(function*(C,D=!1){let M;const L=yield Er(C.appConfig,ae=>{if(!Et(ae))throw Xe.create("not-registered");const xe=ae.authToken;if(!D&&ln(xe))return ae;if(1===xe.requestStatus)return M=U(C,D),ae;{if(!navigator.onLine)throw Xe.create("app-offline");const Be=er(ae);return M=Ae(C,Be),Be}});return M?yield M:L.authToken})).apply(this,arguments)}function U(C,D){return W.apply(this,arguments)}function W(){return(W=(0,k.Z)(function*(C,D){let M=yield q(C.appConfig);for(;1===M.authToken.requestStatus;)yield je(100),M=yield q(C.appConfig);const L=M.authToken;return 0===L.requestStatus?Y(C,D):L})).apply(this,arguments)}function q(C){return Er(C,D=>{if(!Et(D))throw Xe.create("not-registered");return function te(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ae(C,D){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(C,D){try{const M=yield Bt(C,D),L=Object.assign(Object.assign({},D),{authToken:M});return yield tt(C.appConfig,L),M}catch(M){if(!et(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield tt(C.appConfig,L)}else yield Vn(C.appConfig);throw M}})).apply(this,arguments)}function Et(C){return void 0!==C&&2===C.registrationStatus}function ln(C){return 2===C.requestStatus&&!function an(C){const D=Date.now();return D<C.creationTime||C.creationTime+C.expiresIn<D+36e5}(C)}function er(C){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:D})}function H(){return(H=(0,k.Z)(function*(C){const D=C,{installationEntry:M,registrationPromise:L}=yield wn(D);return L?L.catch(console.error):Y(D).catch(console.error),M.fid})).apply(this,arguments)}function Ge(){return(Ge=(0,k.Z)(function*(C,D=!1){const M=C;return yield vt(M),(yield Y(M,D)).token})).apply(this,arguments)}function vt(C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,k.Z)(function*(C){const{registrationPromise:D}=yield wn(C);D&&(yield D)})).apply(this,arguments)}function ks(C){return Xe.create("missing-app-config-values",{valueName:C})}const Ns="installations",Ps=C=>{const D=C.getProvider("app").getImmediate(),M=function Cn(C){if(!C||!C.options)throw ks("App Configuration");if(!C.name)throw ks("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!C.options[M])throw ks(M);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},go=C=>{const D=C.getProvider("app").getImmediate(),M=(0,se._getProvider)(D,Ns).getImmediate();return{getId:()=>function V(C){return H.apply(this,arguments)}(M),getToken:X=>function be(C){return Ge.apply(this,arguments)}(M,X)}};(function ul(){(0,se._registerComponent)(new _e.wA(Ns,Ps,"PUBLIC")),(0,se._registerComponent)(new _e.wA("installations-internal",go,"PRIVATE"))})(),(0,se.registerVersion)(ve,z),(0,se.registerVersion)(ve,z,"esm2017");const Qi="@firebase/remote-config",Zn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fc{constructor(D,M,L,X){this.client=D,this.storage=M,this.storageCache=L,this.logger=X}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-M,X=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${X}.`),X}fetch(D){var M=this;return(0,k.Z)(function*(){const[L,X]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(X&&M.isCachedDataFresh(D.cacheMaxAgeMillis,L))return X;D.eTag=X&&X.eTag;const ae=yield M.client.fetch(D),xe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ae.status&&xe.push(M.storage.setLastSuccessfulFetchResponse(ae)),yield Promise.all(xe),ae})()}}function va(C=navigator){return C.languages&&C.languages[0]||C.language}class Bs{constructor(D,M,L,X,ae,xe){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=L,this.projectId=X,this.apiKey=ae,this.appId=xe}fetch(D){var M=this;return(0,k.Z)(function*(){var L,X,ae;const[xe,Be]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ot={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},mt={sdk_version:M.sdkVersion,app_instance_id:xe,app_instance_id_token:Be,app_id:M.appId,language_code:va()},zn={method:"POST",headers:Ot,body:JSON.stringify(mt)},yr=fetch(xt,zn),Go=new Promise((Wo,Js)=>{D.signal.addEventListener(()=>{const Yr=new Error("The operation was aborted.");Yr.name="AbortError",Js(Yr)})});let cs;try{yield Promise.race([yr,Go]),cs=yield yr}catch(Wo){let Js="fetch-client-network";throw"AbortError"===(null===(L=Wo)||void 0===L?void 0:L.name)&&(Js="fetch-timeout"),Zn.create(Js,{originalErrorMessage:null===(X=Wo)||void 0===X?void 0:X.message})}let Ft=cs.status;const Ci=cs.headers.get("ETag")||void 0;let us,Vi;if(200===cs.status){let Wo;try{Wo=yield cs.json()}catch(Js){throw Zn.create("fetch-client-parse",{originalErrorMessage:null===(ae=Js)||void 0===ae?void 0:ae.message})}us=Wo.entries,Vi=Wo.state}if("INSTANCE_STATE_UNSPECIFIED"===Vi?Ft=500:"NO_CHANGE"===Vi?Ft=304:("NO_TEMPLATE"===Vi||"EMPTY_CONFIG"===Vi)&&(us={}),304!==Ft&&200!==Ft)throw Zn.create("fetch-status",{httpStatus:Ft});return{status:Ft,eTag:Ci,config:us}})()}}class Xi{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,k.Z)(function*(){const L=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:L}){var X=this;return(0,k.Z)(function*(){yield function ci(C,D){return new Promise((M,L)=>{const X=Math.max(D-Date.now(),0),ae=setTimeout(M,X);C.addEventListener(()=>{clearTimeout(ae),L(Zn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ae=yield X.client.fetch(D);return yield X.storage.deleteThrottleMetadata(),ae}catch(ae){if(!function Jp(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ae))throw ae;const xe={throttleEndTimeMillis:Date.now()+(0,ce.$s)(L),backoffCount:L+1};return yield X.storage.setThrottleMetadata(xe),X.attemptFetch(D,xe)}})()}}class eg{constructor(D,M,L,X,ae){this.app=D,this._client=M,this._storageCache=L,this._storage=X,this._logger=ae,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ba(C,D){var M;const L=C.target.error||void 0;return Zn.create(D,{originalErrorMessage:L&&(null===(M=L)||void 0===M?void 0:M.message)})}const _o="app_namespace_store";class Pu{constructor(D,M,L,X=function ng(){return new Promise((C,D)=>{var M;try{const L=indexedDB.open("firebase_remote_config",1);L.onerror=X=>{D(ba(X,"storage-open"))},L.onsuccess=X=>{C(X.target.result)},L.onupgradeneeded=X=>{0===X.oldVersion&&X.target.result.createObjectStore(_o,{keyPath:"compositeKey"})}}catch(L){D(Zn.create("storage-open",{originalErrorMessage:null===(M=L)||void 0===M?void 0:M.message}))}})}()){this.appId=D,this.appName=M,this.namespace=L,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,k.Z)(function*(){const L=yield M.openDbPromise;return new Promise((X,ae)=>{var xe;const ut=L.transaction([_o],"readonly").objectStore(_o),xt=M.createCompositeKey(D);try{const Ot=ut.get(xt);Ot.onerror=mt=>{ae(ba(mt,"storage-get"))},Ot.onsuccess=mt=>{const zn=mt.target.result;X(zn?zn.value:void 0)}}catch(Ot){ae(Zn.create("storage-get",{originalErrorMessage:null===(xe=Ot)||void 0===xe?void 0:xe.message}))}})})()}set(D,M){var L=this;return(0,k.Z)(function*(){const X=yield L.openDbPromise;return new Promise((ae,xe)=>{var Be;const xt=X.transaction([_o],"readwrite").objectStore(_o),Ot=L.createCompositeKey(D);try{const mt=xt.put({compositeKey:Ot,value:M});mt.onerror=zn=>{xe(ba(zn,"storage-set"))},mt.onsuccess=()=>{ae()}}catch(mt){xe(Zn.create("storage-set",{originalErrorMessage:null===(Be=mt)||void 0===Be?void 0:Be.message}))}})})()}delete(D){var M=this;return(0,k.Z)(function*(){const L=yield M.openDbPromise;return new Promise((X,ae)=>{var xe;const ut=L.transaction([_o],"readwrite").objectStore(_o),xt=M.createCompositeKey(D);try{const Ot=ut.delete(xt);Ot.onerror=mt=>{ae(ba(mt,"storage-delete"))},Ot.onsuccess=()=>{X()}}catch(Ot){ae(Zn.create("storage-delete",{originalErrorMessage:null===(xe=Ot)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class yo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const M=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),X=D.storage.getActiveConfig(),ae=yield M;ae&&(D.lastFetchStatus=ae);const xe=yield L;xe&&(D.lastSuccessfulFetchTimestampMillis=xe);const Be=yield X;Be&&(D.activeConfig=Be)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function b_(){return dl.apply(this,arguments)}function dl(){return(dl=(0,k.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function Ou(){(0,se._registerComponent)(new _e.wA("remote-config",function C(D,{instanceIdentifier:M}){const L=D.getProvider("app").getImmediate(),X=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,ce.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:ae,apiKey:xe,appId:Be}=L.options;if(!ae)throw Zn.create("registration-project-id");if(!xe)throw Zn.create("registration-api-key");if(!Be)throw Zn.create("registration-app-id");const ut=new Pu(Be,L.name,M=M||"firebase"),xt=new yo(ut),Ot=new ue.Yd(Qi);Ot.logLevel=ue.in.ERROR;const mt=new Bs(X,se.SDK_VERSION,M,ae,xe,Be),zn=new Xi(mt,ut),yr=new fc(zn,ut,xt,Ot),Go=new eg(L,yr,xt,ut,Ot);return function Rn(C){const D=(0,ce.m9)(C);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Go),Go},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Qi,"0.3.11"),(0,se.registerVersion)(Qi,"0.3.11","esm2017")}();const Cr="/firebase-messaging-sw.js",bo="/firebase-cloud-messaging-push-scope",ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hl="google.c.a.c_id",pc="google.c.a.c_l",Bu="google.c.a.ts",wo="google.c.a.e";var ui=(()=>{return(C=ui||(ui={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",ui;var C})();function es(C){const D=new Uint8Array(C);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Kr(C){const M=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(M),X=new Uint8Array(L.length);for(let ae=0;ae<L.length;++ae)X[ae]=L.charCodeAt(ae);return X}const Us="fcm_token_details_db",Eo="fcm_token_object_Store";function rg(C){return gc.apply(this,arguments)}function gc(){return gc=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ae=>ae.name).includes(Us))return null;let D=null;return(yield(0,fe.X3)(Us,5,{upgrade:(L=(0,k.Z)(function*(X,ae,xe,Be){var ut;if(ae<2||!X.objectStoreNames.contains(Eo))return;const xt=Be.objectStore(Eo),Ot=yield xt.index("fcmSenderId").get(C);if(yield xt.clear(),Ot)if(2===ae){const mt=Ot;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;D={token:mt.fcmToken,createTime:null!==(ut=mt.createTime)&&void 0!==ut?ut:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:es(mt.vapidKey)}}}else if(3===ae){const mt=Ot;D={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:es(mt.auth),p256dh:es(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:es(mt.vapidKey)}}}else if(4===ae){const mt=Ot;D={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:es(mt.auth),p256dh:es(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:es(mt.vapidKey)}}}}),function(ae,xe,Be,ut){return L.apply(this,arguments)})})).close(),yield(0,fe.Lj)(Us),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),kn(D)?D:null;var L}),gc.apply(this,arguments)}function kn(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:D}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ei="firebase-messaging-store";let Dr=null;function fl(){return Dr||(Dr=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(C,D)=>{0===D&&C.createObjectStore(Ei)}})),Dr}function Io(C){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,k.Z)(function*(C){const D=hi(C),L=yield(yield fl()).transaction(Ei).objectStore(Ei).get(D);if(L)return L;{const X=yield rg(C.appConfig.senderId);if(X)return yield nn(C,X),X}})).apply(this,arguments)}function nn(C,D){return pl.apply(this,arguments)}function pl(){return(pl=(0,k.Z)(function*(C,D){const M=hi(C),X=(yield fl()).transaction(Ei,"readwrite");return yield X.objectStore(Ei).put(D,M),yield X.done,D})).apply(this,arguments)}function vs(C){return mc.apply(this,arguments)}function mc(){return(mc=(0,k.Z)(function*(C){const D=hi(C),L=(yield fl()).transaction(Ei,"readwrite");yield L.objectStore(Ei).delete(D),yield L.done})).apply(this,arguments)}function hi({appConfig:C}){return C.appId}const jn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nt(C,D){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,k.Z)(function*(C,D){var M;const L=yield Da(C),X=Pe(D),ae={method:"POST",headers:L,body:JSON.stringify(X)};let xe;try{xe=yield(yield fetch(Vs(C.appConfig),ae)).json()}catch(Be){throw jn.create("token-subscribe-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(xe.error)throw jn.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw jn.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function ig(C,D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,k.Z)(function*(C,D){var M;const L=yield Da(C),X=Pe(D.subscriptionOptions),ae={method:"PATCH",headers:L,body:JSON.stringify(X)};let xe;try{xe=yield(yield fetch(`${Vs(C.appConfig)}/${D.token}`,ae)).json()}catch(Be){throw jn.create("token-update-failed",{errorInfo:null===(M=Be)||void 0===M?void 0:M.toString()})}if(xe.error)throw jn.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw jn.create("token-update-no-token");return xe.token})).apply(this,arguments)}function ju(C,D){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,k.Z)(function*(C,D){var M;const X={method:"DELETE",headers:yield Da(C)};try{const xe=yield(yield fetch(`${Vs(C.appConfig)}/${D}`,X)).json();if(xe.error)throw jn.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(ae){throw jn.create("token-unsubscribe-failed",{errorInfo:null===(M=ae)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function Vs({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Da(C){return Co.apply(this,arguments)}function Co(){return(Co=(0,k.Z)(function*({appConfig:C,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Pe({p256dh:C,auth:D,endpoint:M,vapidKey:L}){const X={web:{endpoint:M,auth:D,p256dh:C}};return L!==ys&&(X.web.applicationPubKey=L),X}const Yt=6048e5;function Mh(C){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(C){const D=yield Rh(C.swRegistration,C.vapidKey),M={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:D.endpoint,auth:es(D.getKey("auth")),p256dh:es(D.getKey("p256dh"))},L=yield Io(C.firebaseDependencies);if(L){if(sg(L.subscriptionOptions,M))return Date.now()>=L.createTime+Yt?gl(C,{token:L.token,createTime:Date.now(),subscriptionOptions:M}):L.token;try{yield ju(C.firebaseDependencies,L.token)}catch(X){console.warn(X)}return ml(C.firebaseDependencies,M)}return ml(C.firebaseDependencies,M)})).apply(this,arguments)}function nr(C){return To.apply(this,arguments)}function To(){return(To=(0,k.Z)(function*(C){const D=yield Io(C.firebaseDependencies);D&&(yield ju(C.firebaseDependencies,D.token),yield vs(C.firebaseDependencies));const M=yield C.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function gl(C,D){return Or.apply(this,arguments)}function Or(){return(Or=(0,k.Z)(function*(C,D){try{const M=yield ig(C.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield nn(C.firebaseDependencies,L),M}catch(M){throw yield nr(C),M}})).apply(this,arguments)}function ml(C,D){return So.apply(this,arguments)}function So(){return(So=(0,k.Z)(function*(C,D){const L={token:yield Nt(C,D),createTime:Date.now(),subscriptionOptions:D};return yield nn(C,L),L.token})).apply(this,arguments)}function Rh(C,D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,k.Z)(function*(C,D){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Kr(D)})})).apply(this,arguments)}function sg(C,D){return D.vapidKey===C.vapidKey&&D.endpoint===C.endpoint&&D.auth===C.auth&&D.p256dh===C.p256dh}function ts(C){const D={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function rr(C,D){if(!D.notification)return;C.notification={};const M=D.notification.title;M&&(C.notification.title=M);const L=D.notification.body;L&&(C.notification.body=L);const X=D.notification.image;X&&(C.notification.image=X)}(D,C),function Pi(C,D){!D.data||(C.data=D.data)}(D,C),function Sa(C,D){var M,L,X,ae,xe;if(!(D.fcmOptions||null!==(M=D.notification)&&void 0!==M&&M.click_action))return;C.fcmOptions={};const Be=null!==(X=null===(L=D.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==X?X:null===(ae=D.notification)||void 0===ae?void 0:ae.click_action;Be&&(C.fcmOptions.link=Be);const ut=null===(xe=D.fcmOptions)||void 0===xe?void 0:xe.analytics_label;ut&&(C.fcmOptions.analyticsLabel=ut)}(D,C),D}function Aa(C){return"object"==typeof C&&!!C&&hl in C}function ns(C,D){const M=[];for(let L=0;L<C.length;L++)M.push(C.charAt(L)),L<D.length&&M.push(D.charAt(L));return M.join("")}function _c(C){return jn.create("missing-app-config-values",{valueName:C})}ns("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ns("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $u{constructor(D,M,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function Hu(C){if(!C||!C.options)throw _c("App Configuration Object");if(!C.name)throw _c("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=C;for(const L of D)if(!M[L])throw _c(L);return{appName:C.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:X,installations:M,analyticsProvider:L}}_delete(){return Promise.resolve()}}function kh(C){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(C){var D;try{C.swRegistration=yield navigator.serviceWorker.register(Cr,{scope:bo}),C.swRegistration.update().catch(()=>{})}catch(M){throw jn.create("failed-service-worker-registration",{browserErrorMessage:null===(D=M)||void 0===D?void 0:D.message})}})).apply(this,arguments)}function yc(C,D){return xa.apply(this,arguments)}function xa(){return(xa=(0,k.Z)(function*(C,D){if(!D&&!C.swRegistration&&(yield kh(C)),D||!C.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw jn.create("invalid-sw-registration");C.swRegistration=D}})).apply(this,arguments)}function vc(C,D){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(C,D){D?C.vapidKey=D:C.vapidKey||(C.vapidKey=ys)})).apply(this,arguments)}function xo(){return(xo=(0,k.Z)(function*(C,D){if(!navigator)throw jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw jn.create("permission-blocked");return yield vc(C,D?.vapidKey),yield yc(C,D?.serviceWorkerRegistration),Mh(C)})).apply(this,arguments)}function Nh(C,D,M){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*(C,D,M){const L=Ph(D);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:M[hl],message_name:M[pc],message_time:M[Bu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ph(C){switch(C){case ui.NOTIFICATION_CLICKED:return"notification_open";case ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function bs(){return(bs=(0,k.Z)(function*(C,D){const M=D.data;if(!M.isFirebaseMessaging)return;C.onMessageHandler&&M.messageType===ui.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(ts(M)):C.onMessageHandler.next(ts(M)));const L=M.data;Aa(L)&&"1"===L[wo]&&(yield Nh(C,M.messageType,L))})).apply(this,arguments)}const ws="@firebase/messaging",An=C=>{const D=new $u(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Gu(C,D){return bs.apply(this,arguments)}(D,M)),D},rs=C=>{const D=C.getProvider("messaging").getImmediate();return{getToken:L=>function zu(C,D){return xo.apply(this,arguments)}(D,L)}};function bc(){return wc.apply(this,arguments)}function wc(){return(wc=(0,k.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function xn(){(0,se._registerComponent)(new _e.wA("messaging",An,"PUBLIC")),(0,se._registerComponent)(new _e.wA("messaging-internal",rs,"PRIVATE")),(0,se.registerVersion)(ws,"0.9.16"),(0,se.registerVersion)(ws,"0.9.16","esm2017")}();const ko="analytics",Yu="firebase_id",Dc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qu="https://www.googletagmanager.com/gtag/js",Hn=new ue.Yd("@firebase/analytics");function _l(C){return Promise.all(C.map(D=>D.catch(M=>M)))}function yl(C,D){const M=document.createElement("script");M.src=`${Qu}?l=${C}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Oh(C,D,M,L,X,ae){return ka.apply(this,arguments)}function ka(){return(ka=(0,k.Z)(function*(C,D,M,L,X,ae){const xe=L[X];try{if(xe)yield D[xe];else{const ut=(yield _l(M)).find(xt=>xt.measurementId===X);ut&&(yield D[ut.appId])}}catch(Be){Hn.error(Be)}C("config",X,ae)})).apply(this,arguments)}function is(C,D,M,L,X){return Na.apply(this,arguments)}function Na(){return(Na=(0,k.Z)(function*(C,D,M,L,X){try{let ae=[];if(X&&X.send_to){let xe=X.send_to;Array.isArray(xe)||(xe=[xe]);const Be=yield _l(M);for(const ut of xe){const xt=Be.find(mt=>mt.measurementId===ut),Ot=xt&&D[xt.appId];if(!Ot){ae=[];break}ae.push(Ot)}}0===ae.length&&(ae=Object.values(D)),yield Promise.all(ae),C("event",L,X||{})}catch(ae){Hn.error(ae)}})).apply(this,arguments)}function Ju(){const C=window.document.getElementsByTagName("script");for(const D of Object.values(C))if(D.src&&D.src.includes(Qu))return D;return null}const ir=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Oa=new class Sc{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function No(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Bh(C){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(C){var D;const{appId:M,apiKey:L}=C,X={method:"GET",headers:No(L)},ae=Dc.replace("{app-id}",M),xe=yield fetch(ae,X);if(200!==xe.status&&304!==xe.status){let Be="";try{const ut=yield xe.json();null!==(D=ut.error)&&void 0!==D&&D.message&&(Be=ut.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Be})}return xe.json()})).apply(this,arguments)}function Xu(C){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,k.Z)(function*(C,D=Oa,M){const{appId:L,apiKey:X,measurementId:ae}=C.options;if(!L)throw ir.create("no-app-id");if(!X){if(ae)return{measurementId:ae,appId:L};throw ir.create("no-api-key")}const xe=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new Fa;return setTimeout((0,k.Z)(function*(){Be.abort()}),void 0!==M?M:6e4),ed({appId:L,apiKey:X,measurementId:ae},xe,Be,D)})).apply(this,arguments)}function ed(C,D,M){return ss.apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(C,{throttleEndTimeMillis:D,backoffCount:M},L,X=Oa){var ae,xe;const{appId:Be,measurementId:ut}=C;try{yield Ac(L,D)}catch(xt){if(ut)return Hn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${null===(ae=xt)||void 0===ae?void 0:ae.message}]`),{appId:Be,measurementId:ut};throw xt}try{const xt=yield Bh(C);return X.deleteThrottleMetadata(Be),xt}catch(xt){const Ot=xt;if(!bl(Ot)){if(X.deleteThrottleMetadata(Be),ut)return Hn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ut} provided in the "measurementId" field in the local Firebase config. [${Ot?.message}]`),{appId:Be,measurementId:ut};throw xt}const mt=503===Number(null===(xe=Ot?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,ce.$s)(M,X.intervalMillis,30):(0,ce.$s)(M,X.intervalMillis),zn={throttleEndTimeMillis:Date.now()+mt,backoffCount:M+1};return X.setThrottleMetadata(Be,zn),Hn.debug(`Calling attemptFetch again in ${mt} millis`),ed(C,zn,L,X)}})).apply(this,arguments)}function Ac(C,D){return new Promise((M,L)=>{const X=Math.max(D-Date.now(),0),ae=setTimeout(M,X);C.addEventListener(()=>{clearTimeout(ae),L(ir.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function bl(C){if(!(C instanceof ce.ZR&&C.customData))return!1;const D=Number(C.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Fa{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let js,El;function Po(){return(Po=(0,k.Z)(function*(C,D,M,L,X){if(X&&X.global)C("event",M,L);else{const ae=yield D;C("event",M,Object.assign(Object.assign({},L),{send_to:ae}))}})).apply(this,arguments)}function Lo(C){El=C}function xc(C){js=C}function $s(){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,k.Z)(function*(){var C;if(!(0,ce.hl)())return Hn.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(D){return Hn.warn(ir.create("indexeddb-unavailable",{errorInfo:null===(C=D)||void 0===C?void 0:C.toString()}).message),!1}return!0})).apply(this,arguments)}function Uo(){return(Uo=(0,k.Z)(function*(C,D,M,L,X,ae,xe){var Be;const ut=Xu(C);ut.then(yr=>{M[yr.measurementId]=yr.appId,C.options.measurementId&&yr.measurementId!==C.options.measurementId&&Hn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>Hn.error(yr)),D.push(ut);const xt=$s().then(yr=>{if(yr)return L.getId()}),[Ot,mt]=yield Promise.all([ut,xt]);Ju()||yl(ae,Ot.measurementId),El&&(X("consent","default",El),Lo(void 0)),X("js",new Date);const zn=null!==(Be=xe?.config)&&void 0!==Be?Be:{};return zn.origin="firebase",zn.update=!0,null!=mt&&(zn[Yu]=mt),X("config",Ot.measurementId,zn),js&&(X("set",js),xc(void 0)),Ot.measurementId})).apply(this,arguments)}class Il{constructor(D){this.app=D}_delete(){return delete Ar[this.app.options.appId],Promise.resolve()}}let Ar={},Vo=[];const zs={};let Ho,Fi,jo="dataLayer",nd=!1;function jh(C,D,M){!function og(){const C=[];if((0,ce.ru)()&&C.push("This is a browser extension environment."),(0,ce.zI)()||C.push("Cookies are not available."),C.length>0){const D=C.map((L,X)=>`(${X+1}) ${L}`).join(" "),M=ir.create("invalid-analytics-context",{errorInfo:D});Hn.warn(M.message)}}();const L=C.options.appId;if(!L)throw ir.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw ir.create("no-api-key");Hn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ar[L])throw ir.create("already-exists",{id:L});if(!nd){!function vl(C){let D=[];Array.isArray(window[C])?D=window[C]:window[C]=D}(jo);const{wrappedGtag:ae,gtagCore:xe}=function Pa(C,D,M,L,X){let ae=function(...xe){window[L].push(arguments)};return window[X]&&"function"==typeof window[X]&&(ae=window[X]),window[X]=function Tc(C,D,M,L){function ae(){return(ae=(0,k.Z)(function*(xe,Be,ut){try{"event"===xe?yield is(C,D,M,Be,ut):"config"===xe?yield Oh(C,D,M,L,Be,ut):"consent"===xe?C("consent","update",ut):C("set",Be)}catch(xt){Hn.error(xt)}})).apply(this,arguments)}return function X(xe,Be,ut){return ae.apply(this,arguments)}}(ae,C,D,M),{gtagCore:ae,wrappedGtag:window[X]}}(Ar,Vo,zs,jo,"gtag");Fi=ae,Ho=xe,nd=!0}return Ar[L]=function Vh(C,D,M,L,X,ae,xe){return Uo.apply(this,arguments)}(C,Vo,zs,D,Ho,jo,M),new Il(C)}function E_(){return Hh.apply(this,arguments)}function Hh(){return(Hh=(0,k.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const st="@firebase/analytics";!function bn(){(0,se._registerComponent)(new _e.wA(ko,(D,{options:M})=>jh(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,se._registerComponent)(new _e.wA("analytics-internal",function C(D){try{const M=D.getProvider(ko).getImmediate();return{logEvent:(L,X,ae)=>function gn(C,D,M,L){C=(0,ce.m9)(C),function La(C,D,M,L,X){return Po.apply(this,arguments)}(Fi,Ar[C.app.options.appId],D,M,L).catch(X=>Hn.error(X))}(M,L,X,ae)}}catch(M){throw ir.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,se.registerVersion)(st,"0.8.0"),(0,se.registerVersion)(st,"0.8.0","esm2017")}();var as=P(4408),Yn=P(7565);const rd=new class qs extends Yn.v{}(class Ws extends as.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(D,M,L):D.flush(this)}});var $h=P(4986),Ks=P(8505),sd=P(9468),$o=P(5363);const rt=new d.GfV("7.4.1"),Ua="__angularfire_symbol__analyticsIsSupportedValue",Li="__angularfire_symbol__analyticsIsSupported",Va="__angularfire_symbol__remoteConfigIsSupportedValue",ja="__angularfire_symbol__remoteConfigIsSupported",Pn="__angularfire_symbol__messagingIsSupportedValue",Ha="__angularfire_symbol__messagingIsSupported";function za(C,D,M){if(D){if(1===D.length)return D[0];const ae=D.filter(xe=>xe.app===M);if(1===ae.length)return ae[0]}return M.container.getProvider(C).getImmediate({optional:!0})}globalThis[Li]||(globalThis[Li]=E_().then(C=>globalThis[Ua]=C).catch(()=>globalThis[Ua]=!1)),globalThis[Ha]||(globalThis[Ha]=bc().then(C=>globalThis[Pn]=C).catch(()=>globalThis[Pn]=!1)),globalThis[ja]||(globalThis[ja]=b_().then(C=>globalThis[Va]=C).catch(()=>globalThis[Va]=!1));const Zs=(C,D)=>{const M=D?[D]:(0,B.C6)(),L=[];return M.forEach(X=>{X.container.getProvider(C).instances.forEach(xe=>{L.includes(xe)||L.push(xe)})}),L};function xr(){}class Ys{constructor(D,M=rd){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,L){const X=this.zone;return this.delegate.schedule(function(xe){X.runGuarded(()=>{D.apply(this,[xe])})},M,L)}}class Rc{constructor(D){this.zone=D,this.task=null}call(D,M){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xr,{},xr,xr)),M.pipe((0,Ks.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mr=(()=>{class C{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Ys(Zone.current)),this.insideAngular=M.run(()=>new Ys(Zone.current,$h.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(M){return new(M||C)(d.LFG(d.R0b))},C.\u0275prov=d.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Fr(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ls(C){return Fr(),function or(C){return function(M){return(M=M.lift(new Rc(C.ngZone))).pipe((0,sd.R)(C.outsideAngular),(0,$o.Q)(C.insideAngular))}}(Fr())(C)}},8554:(ht,Me,P)=>{P.d(Me,{$:()=>Vs,A:()=>G,B:()=>Oe,G:()=>go,H:()=>Wr,J:()=>Xi,L:()=>ln,M:()=>dl,N:()=>Lu,P:()=>$h,Q:()=>hl,R:()=>ag,T:()=>pc,U:()=>ys,V:()=>ui,W:()=>es,X:()=>rg,Y:()=>wa,Z:()=>Nt,_:()=>ig,a:()=>Es,a0:()=>Mh,a1:()=>nr,a2:()=>gl,a3:()=>ml,a4:()=>Rh,a5:()=>sg,a6:()=>rr,a7:()=>Pi,a8:()=>Aa,a9:()=>ns,aA:()=>yr,aB:()=>ut,aC:()=>sr,aD:()=>Rr,aE:()=>bt,aI:()=>No,aL:()=>wo,aa:()=>kh,ab:()=>yc,ac:()=>vc,af:()=>Nh,ag:()=>Ph,ah:()=>Gu,ak:()=>Ei,al:()=>Ec,an:()=>Qu,ao:()=>ka,ap:()=>Qt,aq:()=>ye,ar:()=>nt,as:()=>vt,at:()=>et,au:()=>Cl,av:()=>Ci,aw:()=>Fe,ax:()=>ie,ay:()=>ee,az:()=>an,b:()=>ir,c:()=>Pn,d:()=>zh,e:()=>$a,f:()=>or,g:()=>L,h:()=>C,i:()=>Bo,j:()=>xe,k:()=>Yh,l:()=>Nn,m:()=>ds,o:()=>fe,r:()=>as,s:()=>os,u:()=>rd});var d=P(5861),B=P(2090),k=P(9681),se=P(655),ce=P(1877),_e=P(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ie=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),me=new ce.Yd("@firebase/auth");function Xe(v,...g){me.logLevel<=ce.in.ERROR&&me.error(`Auth (${k.SDK_VERSION}): ${v}`,...g)}function et(v,...g){throw We(v,...g)}function Fe(v,...g){return We(v,...g)}function Ne(v,g,m){const E=Object.assign(Object.assign({},Ie()),{[g]:m});return new B.LL("auth","Firebase",E).create(g,{appName:v.name})}function De(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&et(v,"argument-error"),Ne(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(v,...g){if("string"!=typeof v){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return it.create(v,...g)}function ie(v,g,...m){if(!v)throw We(g,...m)}function he(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Xe(g),new Error(g)}function ye(v,g){v||he(g)}const Q=new Map;function ee(v){ye(v instanceof Function,"Expected a class definition");let g=Q.get(v);return g?(ye(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,Q.set(v,g),g)}function Ve(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function je(){return"http:"===yt()||"https:"===yt()}function yt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class qe{constructor(g,m){this.shortDelay=g,this.longDelay=m,ye(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Xt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(v,g){ye(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Bn{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const on={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},tn=new qe(3e4,6e4);function Wt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function zt(v,g,m,E){return br.apply(this,arguments)}function br(){return(br=(0,d.Z)(function*(v,g,m,E,x={}){return po(v,x,(0,d.Z)(function*(){let N={},ne={};E&&("GET"===g?ne=E:N={body:JSON.stringify(E)});const Se=(0,B.xO)(Object.assign({key:v.config.apiKey},ne)).slice(1),Ke=yield v._getAdditionalHeaders();return Ke["Content-Type"]="application/json",v.languageCode&&(Ke["X-Firebase-Locale"]=v.languageCode),Bn.fetch()(xi(v,v.config.apiHost,m,Se),Object.assign({method:g,headers:Ke,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function po(v,g,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,d.Z)(function*(v,g,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},on),g);try{const x=new zr(v),N=yield Promise.race([m(),x.promise]);x.clearNetworkTimeout();const ne=yield N.json();if("needConfirmation"in ne)throw Un(v,"account-exists-with-different-credential",ne);if(N.ok&&!("errorMessage"in ne))return ne;{const Se=N.ok?ne.errorMessage:ne.error.message,[Ke,ot]=Se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw Un(v,"credential-already-in-use",ne);if("EMAIL_EXISTS"===Ke)throw Un(v,"email-already-in-use",ne);if("USER_DISABLED"===Ke)throw Un(v,"user-disabled",ne);const Ht=E[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw Ne(v,Ht,ot);et(v,Ht)}}catch(x){if(x instanceof B.ZR)throw x;et(v,"network-request-failed")}})).apply(this,arguments)}function Tn(v,g,m,E){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,d.Z)(function*(v,g,m,E,x={}){const N=yield zt(v,g,m,E,x);return"mfaPendingCredential"in N&&et(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function xi(v,g,m,E){const x=`${g}${m}?${E}`;return v.config.emulator?mn(v.config,x):`${v.config.apiScheme}://${x}`}class zr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Fe(this.auth,"network-request-failed")),tn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Un(v,g,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const x=Fe(v,g,E);return x.customData._tokenResponse=m,x}function Ri(){return(Ri=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function tt(v,g){return gr.apply(this,arguments)}function gr(){return(gr=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Vn(v,g){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Er(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function In(){return(In=(0,d.Z)(function*(v,g=!1){const m=(0,B.m9)(v),E=yield m.getIdToken(g),x=pt(E);ie(x&&x.exp&&x.auth_time&&x.iat,m.auth,"internal-error");const N="object"==typeof x.firebase?x.firebase:void 0,ne=N?.sign_in_provider;return{claims:x,token:E,authTime:Er(vn(x.auth_time)),issuedAtTime:Er(vn(x.iat)),expirationTime:Er(vn(x.exp)),signInProvider:ne||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function vn(v){return 1e3*Number(v)}function pt(v){var g;const[m,E,x]=v.split(".");if(void 0===m||void 0===E||void 0===x)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,B.tV)(E);return N?JSON.parse(N):(Xe("Failed to decode base64 JWT payload"),null)}catch(N){return Xe("Caught error parsing JWT payload as JSON",null===(g=N)||void 0===g?void 0:g.toString()),null}}function Pt(v,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(E){throw E instanceof B.ZR&&mr(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function mr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ir{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,d.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class St{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Er(this.lastLoginAt),this.creationTime=Er(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sr(v){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,d.Z)(function*(v){var g;const m=v.auth,E=yield v.getIdToken(),x=yield Pt(v,Vn(m,{idToken:E}));ie(x?.users.length,m,"internal-error");const N=x.users[0];v._notifyReloadListener(N);const ne=null!==(g=N.providerUserInfo)&&void 0!==g&&g.length?j(N.providerUserInfo):[],Se=Y(v.providerData,ne),Ht=!!v.isAnonymous&&!(v.email&&N.passwordHash||Se?.length),On={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:Se,metadata:new St(N.createdAt,N.lastLoginAt),isAnonymous:Ht};Object.assign(v,On)})).apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(v){const g=(0,B.m9)(v);yield Sr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Y(v,g){return[...v.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function j(v){return v.map(g=>{var{providerId:m}=g,E=(0,se._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function W(){return(W=(0,d.Z)(function*(v,g){const m=yield po(v,{},(0,d.Z)(function*(){const E=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:N}=v.config,ne=xi(v,x,"/v1/token",`key=${N}`),Se=yield v._getAdditionalHeaders();return Se["Content-Type"]="application/x-www-form-urlencoded",Bn.fetch()(ne,{method:"POST",headers:Se,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const m="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function gt(v){const g=pt(v);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,d.Z)(function*(){return ie(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:N,expiresIn:ne}=yield function U(v,g){return W.apply(this,arguments)}(g,m);E.updateTokensAndExpiration(x,N,Number(ne))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:x,expirationTime:N}=m,ne=new q;return E&&(ie("string"==typeof E,"internal-error",{appName:g}),ne.refreshToken=E),x&&(ie("string"==typeof x,"internal-error",{appName:g}),ne.accessToken=x),N&&(ie("number"==typeof N,"internal-error",{appName:g}),ne.expirationTime=N),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return he("not implemented")}}function Ae(v,g){ie("string"==typeof v||typeof v>"u","internal-error",{appName:g})}class ze{constructor(g){var{uid:m,auth:E,stsTokenManager:x}=g,N=(0,se._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ir(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new St(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,d.Z)(function*(){const E=yield Pt(m,m.stsTokenManager.getToken(m.auth,g));return ie(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function wn(v){return In.apply(this,arguments)}(this,g)}reload(){return function Gr(v){return Zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new ze(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,d.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),m&&(yield Sr(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,d.Z)(function*(){const m=yield g.getIdToken();return yield Pt(g,function Mi(v,g){return Ri.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,x,N,ne,Se,Ke,ot,Ht;const On=null!==(E=m.displayName)&&void 0!==E?E:void 0,hs=null!==(x=m.email)&&void 0!==x?x:void 0,qa=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,Xh=null!==(ne=m.photoURL)&&void 0!==ne?ne:void 0,Oc=null!==(Se=m.tenantId)&&void 0!==Se?Se:void 0,no=null!==(Ke=m._redirectEventId)&&void 0!==Ke?Ke:void 0,ro=null!==(ot=m.createdAt)&&void 0!==ot?ot:void 0,Fc=null!==(Ht=m.lastLoginAt)&&void 0!==Ht?Ht:void 0,{uid:ef,emailVerified:fg,isAnonymous:qo,providerData:tf,stsTokenManager:pg}=m;ie(ef&&pg,g,"internal-error");const gg=q.fromJSON(this.name,pg);ie("string"==typeof ef,g,"internal-error"),Ae(On,g.name),Ae(hs,g.name),ie("boolean"==typeof fg,g,"internal-error"),ie("boolean"==typeof qo,g,"internal-error"),Ae(qa,g.name),Ae(Xh,g.name),Ae(Oc,g.name),Ae(no,g.name),Ae(ro,g.name),Ae(Fc,g.name);const nf=new ze({uid:ef,auth:g,email:hs,emailVerified:fg,displayName:On,isAnonymous:qo,photoURL:Xh,phoneNumber:qa,tenantId:Oc,stsTokenManager:gg,createdAt:ro,lastLoginAt:Fc});return tf&&Array.isArray(tf)&&(nf.providerData=tf.map(dd=>Object.assign({},dd))),no&&(nf._redirectEventId=no),nf}static _fromIdTokenResponse(g,m,E=!1){return(0,d.Z)(function*(){const x=new q;x.updateFromServerResponse(m);const N=new ze({uid:m.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield Sr(N),N})()}}const ln=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,E){var x=this;return(0,d.Z)(function*(){x.storage[m]=E})()}_get(m){var E=this;return(0,d.Z)(function*(){const x=E.storage[m];return void 0===x?null:x})()}_remove(m){var E=this;return(0,d.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function an(v,g,m){return`firebase:${v}:${g}:${m}`}class er{constructor(g,m,E){this.persistence=g,this.auth=m,this.userKey=E;const{config:x,name:N}=this.auth;this.fullUserKey=an(this.userKey,x.apiKey,N),this.fullPersistenceKey=an("persistence",x.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?ze._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,d.Z)(function*(){if(m.persistence===g)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,E="authUser"){return(0,d.Z)(function*(){if(!m.length)return new er(ee(ln),g,E);const x=(yield Promise.all(m.map(function(){var ot=(0,d.Z)(function*(Ht){if(yield Ht._isAvailable())return Ht});return function(Ht){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let N=x[0]||ee(ln);const ne=an(E,g.config.apiKey,g.name);let Se=null;for(const ot of m)try{const Ht=yield ot._get(ne);if(Ht){const On=ze._fromJSON(g,Ht);ot!==N&&(Se=On),N=ot;break}}catch{}const Ke=x.filter(ot=>ot._shouldAllowMigration);return N._shouldAllowMigration&&Ke.length?(N=Ke[0],Se&&(yield N._set(ne,Se.toJSON())),yield Promise.all(m.map(function(){var ot=(0,d.Z)(function*(Ht){if(Ht!==N)try{yield Ht._remove(ne)}catch{}});return function(Ht){return ot.apply(this,arguments)}}())),new er(N,g,E)):new er(N,g,E)})()}}function te(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ge(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(V(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Dt(g))return"Blackberry";if(Le(g))return"Webos";if(H(g))return"Safari";if((g.includes("chrome/")||be(g))&&!g.includes("edge/"))return"Chrome";if(vt(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function V(v=(0,B.z$)()){return/firefox\//i.test(v)}function H(v=(0,B.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function be(v=(0,B.z$)()){return/crios\//i.test(v)}function Ge(v=(0,B.z$)()){return/iemobile/i.test(v)}function vt(v=(0,B.z$)()){return/android/i.test(v)}function Dt(v=(0,B.z$)()){return/blackberry/i.test(v)}function Le(v=(0,B.z$)()){return/webos/i.test(v)}function nt(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Qt(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function pn(v=(0,B.z$)()){return nt(v)||vt(v)||Le(v)||Dt(v)||/windows phone/i.test(v)||Ge(v)}function Cn(v,g=[]){let m;switch(v){case"Browser":m=te((0,B.z$)());break;case"Worker":m=`${te((0,B.z$)())}-${v}`;break;default:m=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${E}`}class ks{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const E=N=>new Promise((ne,Se)=>{try{ne(g(N))}catch(Ke){Se(Ke)}});E.onAbort=m,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,d.Z)(function*(){var E;if(m.auth.currentUser===g)return;const x=[];try{for(const N of m.queue)yield N(g),N.onAbort&&x.push(N.onAbort)}catch(N){x.reverse();for(const ne of x)try{ne()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=N)||void 0===E?void 0:E.message})}})()}}class Ns{constructor(g,m,E){this.app=g,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ps(this),this.idTokenSubscription=new Ps(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,N;if(!E._deleted&&(E.persistenceManager=yield er.create(E,g),!E._deleted)){if(null!==(x=E._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(N=E.currentUser)||void 0===N?void 0:N.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,d.Z)(function*(){var E;const x=yield m.assertedPersistence.getCurrentUser();let N=x,ne=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Se=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ke=N?._redirectEventId,ot=yield m.tryRedirectSignIn(g);(!Se||Se===Ke)&&ot?.user&&(N=ot.user,ne=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(ne)try{yield m.beforeStateQueue.runMiddleware(N)}catch(Se){N=x,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Se))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return ie(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var m=this;return(0,d.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,d.Z)(function*(){var E;try{yield Sr(g)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Kt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,d.Z)(function*(){const E=g?(0,B.m9)(g):null;return E&&ie(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(g,m=!1){var E=this;return(0,d.Z)(function*(){if(!E._deleted)return g&&ie(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,d.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,m,E){return this.registerStateListener(this.authStateSubscription,g,m,E)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,E){return this.registerStateListener(this.idTokenSubscription,g,m,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var E=this;return(0,d.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(m);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const E=g&&ee(g)||m._popupRedirectResolver;ie(E,m,"argument-error"),m.redirectPersistenceManager=yield er.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,d.Z)(function*(){var E,x;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===g?m._currentUser:(null===(x=m.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,d.Z)(function*(){if(g===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,E,x){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>N(this.currentUser)),"function"==typeof m?g.addObserver(m,E,x):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var m;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function bt(v){return(0,B.m9)(v)}class Ps{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function go(v,g,m){const E=bt(v);ie(E._canInitEmulator,E,"emulator-config-failed"),ie(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!m?.disableWarnings,N=ul(g),{host:ne,port:Se}=function Qi(v){const g=ul(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const N=x[1];return{host:N,port:Kn(E.substr(N.length+1))}}{const[N,ne]=E.split(":");return{host:N,port:Kn(ne)}}}(g);E.config.emulator={url:`${N}//${ne}${null===Se?"":`:${Se}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ne,port:Se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Os(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function ul(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Kn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Wr{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,m){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function ai(v,g){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:resetPassword",Wt(v,g))})).apply(this,arguments)}function uc(v,g){return un.apply(this,arguments)}function un(){return(un=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sh(v,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",Wt(v,g))})).apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithPassword",Wt(v,g))})).apply(this,arguments)}function ki(v,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:sendOobCode",Wt(v,g))})).apply(this,arguments)}function Ji(v,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,d.Z)(function*(v,g){return ki(v,g)})).apply(this,arguments)}function Ah(v,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(v,g){return ki(v,g)})).apply(this,arguments)}function li(v,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,d.Z)(function*(v,g){return ki(v,g)})).apply(this,arguments)}function dc(v,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,d.Z)(function*(v,g){return ki(v,g)})).apply(this,arguments)}function hc(){return(hc=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,g))})).apply(this,arguments)}function fc(){return(fc=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,g))})).apply(this,arguments)}class va extends Wr{constructor(g,m,E,x=null){super("password",E),this._email=g,this._password=m,this._tenantId=x}static _fromEmailAndPassword(g,m){return new va(g,m,"password")}static _fromEmailAndCode(g,m,E=null){return new va(g,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return function _a(v,g){return Fs.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function qr(v,g){return hc.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:et(g,"internal-error")}})()}_linkToIdToken(g,m){var E=this;return(0,d.Z)(function*(){switch(E.signInMethod){case"password":return uc(g,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Qp(v,g){return fc.apply(this,arguments)}(g,{idToken:m,email:E._email,oobCode:E._password});default:et(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Bs(v,g){return ci.apply(this,arguments)}function ci(){return(ci=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithIdp",Wt(v,g))})).apply(this,arguments)}class Xi extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Xi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):et("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=m,N=(0,se._T)(m,["providerId","signInMethod"]);if(!E||!x)return null;const ne=new Xi(E,x);return ne.idToken=N.idToken||void 0,ne.accessToken=N.accessToken||void 0,ne.secret=N.secret,ne.nonce=N.nonce,ne.pendingToken=N.pendingToken||null,ne}_getIdTokenResponse(g){return Bs(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Bs(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Bs(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,B.xO)(m)}return g}}function Xp(v,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:sendVerificationCode",Wt(v,g))})).apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,g))})).apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(v,g){const m=yield Tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,g));if(m.temporaryProof)throw Un(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const tg={USER_NOT_FOUND:"user-not-found"};function Pu(){return(Pu=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),tg)})).apply(this,arguments)}class yo extends Wr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new yo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new yo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function eg(v,g){return ba.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function _o(v,g){return Nu.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ng(v,g){return Pu.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:x}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}=g;return E||m||x||N?new yo({verificationId:m,verificationCode:E,phoneNumber:x,temporaryProof:N}):null}}class vo{constructor(g){var m,E,x,N,ne,Se;const Ke=(0,B.zd)((0,B.pd)(g)),ot=null!==(m=Ke.apiKey)&&void 0!==m?m:null,Ht=null!==(E=Ke.oobCode)&&void 0!==E?E:null,On=function Ou(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ke.mode)&&void 0!==x?x:null);ie(ot&&Ht&&On,"argument-error"),this.apiKey=ot,this.operation=On,this.code=Ht,this.continueUrl=null!==(N=Ke.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(ne=Ke.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Se=Ke.tenantId)&&void 0!==Se?Se:null}static parseLink(g){const m=function Fu(v){const g=(0,B.zd)((0,B.pd)(v)).link,m=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,E=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(E?(0,B.zd)((0,B.pd)(E)).link:null)||E||m||g||v}(g);try{return new vo(m)}catch{return null}}}let dl=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return va._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const x=vo.parseLink(E);return ie(x,"argument-error"),va._fromEmailAndCode(m,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Cr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class bo extends Cr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ys extends bo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ie("providerId"in m&&"signInMethod"in m,"argument-error"),Xi._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ys.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ys.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:N,nonce:ne,providerId:Se}=g;if(!E&&!x&&!m&&!N||!Se)return null;try{return new ys(Se)._credential({idToken:m,accessToken:E,nonce:ne,pendingToken:N})}catch{return null}}}let Lu=(()=>{class v extends bo{constructor(){super("facebook.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),hl=(()=>{class v extends bo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:x}=m;if(!E&&!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),pc=(()=>{class v extends bo{constructor(){super("github.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class wo extends Wr{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Bs(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Bs(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Bs(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:N}=m;return E&&x&&N&&E===x?new wo(E,N):null}static _create(g,m){return new wo(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends Cr{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ui.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ui.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=wo.fromJSON(g);return ie(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:E}=g;if(!m||!E)return null;try{return wo._create(E,m)}catch{return null}}}let es=(()=>{class v extends bo{constructor(){super("twitter.com")}static credential(m,E){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=m;if(!E||!x)return null;try{return v.credential(E,x)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Kr(v,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signUp",Wt(v,g))})).apply(this,arguments)}class di{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,x=!1){return(0,d.Z)(function*(){const N=yield ze._fromIdTokenResponse(g,E,x),ne=Eo(E);return new di({user:N,providerId:ne,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Eo(E);return new di({user:g,providerId:x,_tokenResponse:E,operationType:m})})()}}function Eo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function rg(v){return gc.apply(this,arguments)}function gc(){return(gc=(0,d.Z)(function*(v){var g;const m=bt(v);if(yield m._initializationPromise,null!==(g=m.currentUser)&&void 0!==g&&g.isAnonymous)return new di({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Kr(m,{returnSecureToken:!0}),x=yield di._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class kn extends B.ZR{constructor(g,m,E,x){var N;super(m.code,m.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,kn.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,x){return new kn(g,m,E,x)}}function Vu(v,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?kn._fromErrorAndOperation(v,N,g,E):N})}function xh(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Ei(v,g){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(v,g){const m=(0,B.m9)(v);yield Ni(!0,m,g);const{providerUserInfo:E}=yield tt(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),x=xh(E||[]);return m.providerData=m.providerData.filter(N=>x.has(N.providerId)),x.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function fl(v,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(v,g,m=!1){const E=yield Pt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return di._forOperation(v,"link",E)})).apply(this,arguments)}function Ni(v,g,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,d.Z)(function*(v,g,m){yield Sr(g);const x=!1===v?"provider-already-linked":"no-such-provider";ie(xh(g.providerData).has(m)===v,g.auth,x)})).apply(this,arguments)}function pl(v,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(v,g,m=!1){var E;const{auth:x}=v,N="reauthenticate";try{const ne=yield Pt(v,Vu(x,N,g,v),m);ie(ne.idToken,x,"internal-error");const Se=pt(ne.idToken);ie(Se,x,"internal-error");const{sub:Ke}=Se;return ie(v.uid===Ke,x,"user-mismatch"),di._forOperation(v,N,ne)}catch(ne){throw"auth/user-not-found"===(null===(E=ne)||void 0===E?void 0:E.code)&&et(x,"user-mismatch"),ne}})).apply(this,arguments)}function mc(v,g){return hi.apply(this,arguments)}function hi(){return(hi=(0,d.Z)(function*(v,g,m=!1){const E="signIn",x=yield Vu(v,E,g),N=yield di._fromIdTokenResponse(v,E,x);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function wa(v,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(v,g){return mc(bt(v),g)})).apply(this,arguments)}function Nt(v,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,g){const m=(0,B.m9)(v);return yield Ni(!1,m,g.providerId),fl(m,g)})).apply(this,arguments)}function ig(v,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(v,g){return pl((0,B.m9)(v),g)})).apply(this,arguments)}function ju(v,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(v,g){return Tn(v,"POST","/v1/accounts:signInWithCustomToken",Wt(v,g))})).apply(this,arguments)}function Vs(v,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(v,g){const m=bt(v),E=yield ju(m,{token:g,returnSecureToken:!0}),x=yield di._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(x.user),x})).apply(this,arguments)}class Co{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Pe._fromServerResponse(g,m):et(g,"internal-error")}}class Pe extends Co{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Pe(m)}}function Yt(v,g,m){var E;ie((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),ie(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ie(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ie(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Mh(v,g,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v),x={requestType:"PASSWORD_RESET",email:g};m&&Yt(E,x,m),yield Ah(E,x)})).apply(this,arguments)}function nr(v,g,m){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(v,g,m){yield ai((0,B.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function gl(v,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,d.Z)(function*(v,g){yield Sh((0,B.m9)(v),{oobCode:g})})).apply(this,arguments)}function ml(v,g){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(v,g){const m=(0,B.m9)(v),E=yield ai(m,{oobCode:g}),x=E.requestType;switch(ie(x,m,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(E.mfaInfo,m,"internal-error");default:ie(E.email,m,"internal-error")}let N=null;return E.mfaInfo&&(N=Co._fromServerResponse(bt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:N},operation:x}})).apply(this,arguments)}function Rh(v,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,d.Z)(function*(v,g){const{data:m}=yield ml((0,B.m9)(v),g);return m.email})).apply(this,arguments)}function sg(v,g,m){return ts.apply(this,arguments)}function ts(){return(ts=(0,d.Z)(function*(v,g,m){const E=bt(v),x=yield Kr(E,{returnSecureToken:!0,email:g,password:m}),N=yield di._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(N.user),N})).apply(this,arguments)}function rr(v,g,m){return wa((0,B.m9)(v),dl.credential(g,m))}function Pi(v,g,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v),x={requestType:"EMAIL_SIGNIN",email:g};ie(m.handleCodeInApp,E,"argument-error"),m&&Yt(E,x,m),yield li(E,x)})).apply(this,arguments)}function Aa(v,g){return"EMAIL_SIGNIN"===vo.parseLink(g)?.operation}function ns(v,g,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v),x=dl.credentialWithLink(g,m||Ve());return ie(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),wa(E,x)})).apply(this,arguments)}function _c(v,g){return $u.apply(this,arguments)}function $u(){return($u=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:createAuthUri",Wt(v,g))})).apply(this,arguments)}function kh(v,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,d.Z)(function*(v,g){const E={identifier:g,continueUri:je()?Ve():"http://localhost"},{signinMethods:x}=yield _c((0,B.m9)(v),E);return x||[]})).apply(this,arguments)}function yc(v,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(v,g){const m=(0,B.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Yt(m.auth,x,g);const{email:N}=yield Ji(m.auth,x);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function vc(v,g,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&Yt(E.auth,N,m);const{email:ne}=yield dc(E.auth,N);ne!==v.email&&(yield v.reload())})).apply(this,arguments)}function zu(v,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(v,g){return zt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Nh(v,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const E=(0,B.m9)(v),N={idToken:yield E.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},ne=yield Pt(E,zu(E.auth,N));E.displayName=ne.displayName||null,E.photoURL=ne.photoUrl||null;const Se=E.providerData.find(({providerId:Ke})=>"password"===Ke);Se&&(Se.displayName=E.displayName,Se.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ne)})).apply(this,arguments)}function Ph(v,g){return bs((0,B.m9)(v),g,null)}function Gu(v,g){return bs((0,B.m9)(v),null,g)}function bs(v,g,m){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(v,g,m){const{auth:E}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(N.email=g),m&&(N.password=m);const ne=yield Pt(v,uc(E,N));yield v._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class An{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class rs extends An{constructor(g,m,E,x){super(g,m,E),this.username=x}}class xn extends An{constructor(g,m){super(g,"facebook.com",m)}}class bc extends rs{constructor(g,m){super(g,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class wc extends An{constructor(g,m){super(g,"google.com",m)}}class qu extends rs{constructor(g,m,E){super(g,"twitter.com",m,E)}}function Ec(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Wu(v){var g,m;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&v?.idToken){const ne=null===(m=null===(g=pt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(ne)return new An(N,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!E)return null;switch(E){case"facebook.com":return new xn(N,x);case"github.com":return new bc(N,x);case"google.com":return new wc(N,x);case"twitter.com":return new qu(N,x,v.screenName||null);case"custom":case"anonymous":return new An(N,null);default:return new An(N,E,x)}}(m)}class fi{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new fi("enroll",g)}static _fromMfaPendingCredential(g){return new fi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(g?.multiFactorSession){if(null!==(m=g.multiFactorSession)&&void 0!==m&&m.pendingCredential)return fi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return fi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Dc{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){const E=bt(g),x=m.customData._serverResponse,N=(x.mfaInfo||[]).map(Se=>Co._fromServerResponse(E,Se));ie(x.mfaPendingCredential,E,"internal-error");const ne=fi._fromMfaPendingCredential(x.mfaPendingCredential);return new Dc(ne,N,function(){var Se=(0,d.Z)(function*(Ke){const ot=yield Ke._process(E,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const Ht=Object.assign(Object.assign({},x),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(m.operationType){case"signIn":const On=yield di._fromIdTokenResponse(E,m.operationType,Ht);return yield E._updateCurrentUser(On.user),On;case"reauthenticate":return ie(m.user,E,"internal-error"),di._forOperation(m.user,m.operationType,Ht);default:et(E,"internal-error")}});return function(Ke){return Se.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,d.Z)(function*(){return m.signInResolver(g)})()}}function Qu(v,g){var m;const E=(0,B.m9)(v),x=g;return ie(g.customData.operationType,E,"argument-error"),ie(null===(m=x.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Dc._fromError(E,x)}function Hn(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:start",Wt(v,g))}class vl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Co._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new vl(g)}getSession(){var g=this;return(0,d.Z)(function*(){return fi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var E=this;return(0,d.Z)(function*(){const x=g,N=yield E.getSession(),ne=yield Pt(E.user,x._process(E.user.auth,N,m));return yield E.user._updateTokensIfNecessary(ne),E.user.reload()})()}unenroll(g){var m=this;return(0,d.Z)(function*(){var E;const x="string"==typeof g?g:g.uid,N=yield m.user.getIdToken(),ne=yield Pt(m.user,function yl(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(v,g))}(m.user.auth,{idToken:N,mfaEnrollmentId:x}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Se})=>Se!==x),yield m.user._updateTokensIfNecessary(ne);try{yield m.user.reload()}catch(Se){if("auth/user-token-expired"!==(null===(E=Se)||void 0===E?void 0:E.code))throw Se}})()}}const Oh=new WeakMap;function ka(v){const g=(0,B.m9)(v);return Oh.has(g)||Oh.set(g,vl._fromUser(g)),Oh.get(g)}const is="__sak";class Na{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(is,"1"),this.storage.removeItem(is),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ir=(()=>{class v extends Na{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Tc(){const v=(0,B.z$)();return H(v)||nt(v)}()&&function Yi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),N=this.localCache[E];x!==N&&m(E,N,x)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Se,Ke,ot)=>{this.notifyListeners(Se,ot)});const x=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Se=this.storage.getItem(x);if(m.newValue!==Se)null!==m.newValue?this.storage.setItem(x,m.newValue):this.storage.removeItem(x);else if(this.localCache[x]===m.newValue&&!E)return}const N=()=>{const Se=this.storage.getItem(x);!E&&this.localCache[x]===Se||this.notifyListeners(x,Se)},ne=this.storage.getItem(x);!function jt(){return(0,B.w1)()&&10===document.documentMode}()||ne===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var x=()=>super._set,N=this;return(0,d.Z)(function*(){yield x().call(N,m,E),N.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,x=this;return(0,d.Z)(function*(){const N=yield E().call(x,m);return x.localCache[m]=JSON.stringify(N),N})()}_remove(m){var E=()=>super._remove,x=this;return(0,d.Z)(function*(){yield E().call(x,m),delete x.localCache[m]})()}}return v.type="LOCAL",v})(),Es=(()=>{class v extends Na{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let Oa=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(N=>N.isListeningto(m));if(E)return E;const x=new v(m);return this.receivers.push(x),x}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,d.Z)(function*(){const x=m,{eventId:N,eventType:ne,data:Se}=x.data,Ke=E.handlersMap[ne];if(!Ke?.size)return;x.ports[0].postMessage({status:"ack",eventId:N,eventType:ne});const ot=Array.from(Ke).map(function(){var On=(0,d.Z)(function*(hs){return hs(x.origin,Se)});return function(hs){return On.apply(this,arguments)}}()),Ht=yield function Sc(v){return Promise.all(v.map(function(){var g=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return g.apply(this,arguments)}}()))}(ot);x.ports[0].postMessage({status:"done",eventId:N,eventType:ne,response:Ht})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function No(v="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return v+m}class Bh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,E=50){var x=this;return(0,d.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let ne,Se;return new Promise((Ke,ot)=>{const Ht=No("",20);N.port1.start();const On=setTimeout(()=>{ot(new Error("unsupported_event"))},E);Se={messageChannel:N,onMessage(hs){const qa=hs;if(qa.data.eventId===Ht)switch(qa.data.status){case"ack":clearTimeout(On),ne=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),Ke(qa.data.response);break;default:clearTimeout(On),clearTimeout(ne),ot(new Error("invalid_response"))}}},x.handlers.add(Se),N.port1.addEventListener("message",Se.onMessage),x.target.postMessage({eventType:g,eventId:Ht,data:m},[N.port2])}).finally(()=>{Se&&x.removeMessageHandler(Se)})})()}}function $n(){return window}function Zr(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function ss(){return(ss=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fa="firebaseLocalStorageDb",La="firebaseLocalStorage",Po="fbase_key";class Hs{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Oo(v,g){return v.transaction([La],g?"readwrite":"readonly").objectStore(La)}function wl(){const v=indexedDB.open(Fa,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(La,{keyPath:Po})}catch(x){m(x)}}),v.addEventListener("success",(0,d.Z)(function*(){const E=v.result;E.objectStoreNames.contains(La)?g(E):(E.close(),yield function td(){const v=indexedDB.deleteDatabase(Fa);return new Hs(v).toPromise()}(),g(yield wl()))}))})}function Ba(v,g,m){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(v,g,m){const E=Oo(v,!0).put({[Po]:g,value:m});return new Hs(E).toPromise()})).apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(v,g){const m=Oo(v,!1).get(g),E=yield new Hs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function El(v,g){const m=Oo(v,!0).delete(g);return new Hs(m).toPromise()}const Bo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield wl()),m.db})()}_withRetries(m){var E=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const N=yield E._openDb();return yield m(N)}catch(N){if(x++>3)throw N;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return Zr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=Oa._getInstance(function bl(){return Zr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,d.Z)(function*(x,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(x,N){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,d.Z)(function*(x,N){return["keyChanged"]});return function(x,N){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var E,x;if(m.activeServiceWorker=yield function ed(){return ss.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Bh(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(E=N[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=N[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,d.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Ac(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield wl();return yield Ba(m,is,"1"),yield El(m,is),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,d.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(N=>Ba(N,m,E)),x.localCache[m]=E,x.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,d.Z)(function*(){const x=yield E._withRetries(N=>function Uh(v,g){return Fo.apply(this,arguments)}(N,m));return E.localCache[m]=x,x})()}_remove(m){var E=this;return(0,d.Z)(function*(){return E._withPendingWrite((0,d.Z)(function*(){return yield E._withRetries(x=>El(x,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const E=yield m._withRetries(ne=>{const Se=Oo(ne,!1).getAll();return new Hs(Se).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const x=[],N=new Set;for(const{fbase_key:ne,value:Se}of E)N.add(ne),JSON.stringify(m.localCache[ne])!==JSON.stringify(Se)&&(m.notifyListeners(ne,Se),x.push(ne));for(const ne of Object.keys(m.localCache))m.localCache[ne]&&!N.has(ne)&&(m.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(m,E){this.localCache[m]=E;const x=this.listeners[m];if(x)for(const N of Array.from(x))N(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Vh(v,g){return zt(v,"POST","/v2/accounts/mfaSignIn:start",Wt(v,g))}function Ar(){return(Ar=(0,d.Z)(function*(v){return(yield zt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zs(v){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=x=>{const N=Fe("internal-error");N.customData=x,m(N)},E.type="text/javascript",E.charset="UTF-8",function Vo(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function jo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Fi=1e12;class nd{constructor(g){this.auth=g,this.counter=Fi,this._widgets=new Map}render(g,m){const E=this.counter;return this._widgets.set(E,new En(g,this.auth.name,m||{})),this.counter++,E}reset(g){var m;const E=g||Fi;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(g){var m;return(null===(m=this._widgets.get(g||Fi))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,d.Z)(function*(){var E;return null===(E=m._widgets.get(g||Fi))||void 0===E||E.execute(),""})()}}class En{constructor(g,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ie(x,"argument-error",{appName:m}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function og(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jh=jo("rcb"),l0=new qe(3e4,6e4);class E_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=$n().grecaptcha)||void 0===g||!g.render)}load(g,m=""){return ie(function Hh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve($n().grecaptcha):new Promise((E,x)=>{const N=$n().setTimeout(()=>{x(Fe(g,"network-request-failed"))},l0.get());$n()[jh]=()=>{$n().clearTimeout(N),delete $n()[jh];const Se=$n().grecaptcha;if(!Se)return void x(Fe(g,"internal-error"));const Ke=Se.render;Se.render=(ot,Ht)=>{const On=Ke(ot,Ht);return this.counter++,On},this.hostLanguage=m,E(Se)},zs(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:jh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),x(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!(null===(m=$n().grecaptcha)||void 0===m||!m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class c0{load(g){return(0,d.Z)(function*(){return new nd(g)})()}clearedOneInstance(){}}const Gs="recaptcha",I_={theme:"light",type:"image"};class ag{constructor(g,m=Object.assign({},I_),E){this.parameters=m,this.type=Gs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(E),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new c0:new E_,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(m)||new Promise(N=>{const ne=Se=>{!Se||(g.tokenChangeListeners.delete(ne),N(Se))};g.tokenChangeListeners.add(ne),g.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof g)g(m);else if("string"==typeof g){const E=$n()[g];"function"==typeof E&&E(m)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ie(je()&&!Zr(),g.auth,"internal-error"),yield function _r(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function Il(v){return Ar.apply(this,arguments)}(g.auth);ie(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gn{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=yo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function os(v,g,m){return st.apply(this,arguments)}function st(){return(st=(0,d.Z)(function*(v,g,m){const E=bt(v),x=yield Yn(E,g,(0,B.m9)(m));return new gn(x,N=>wa(E,N))})).apply(this,arguments)}function Nn(v,g,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v);yield Ni(!1,E,"phone");const x=yield Yn(E.auth,g,(0,B.m9)(m));return new gn(x,N=>Nt(E,N))})).apply(this,arguments)}function as(v,g,m){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v),x=yield Yn(E.auth,g,(0,B.m9)(m));return new gn(x,N=>ig(E,N))})).apply(this,arguments)}function Yn(v,g,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(v,g,m){var E;const x=yield m.verify();try{let N;if(ie("string"==typeof x,v,"argument-error"),ie(m.type===Gs,v,"argument-error"),N="string"==typeof g?{phoneNumber:g}:g,"session"in N){const ne=N.session;if("phoneNumber"in N)return ie("enroll"===ne.type,v,"internal-error"),(yield Hn(v,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,v,"internal-error");const Se=(null===(E=N.multiFactorHint)||void 0===E?void 0:E.uid)||N.multiFactorUid;return ie(Se,v,"missing-multi-factor-info"),(yield Vh(v,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Se,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Xp(v,{phoneNumber:N.phoneNumber,recaptchaToken:x});return ne}}finally{m._reset()}})).apply(this,arguments)}function rd(v,g){return id.apply(this,arguments)}function id(){return(id=(0,d.Z)(function*(v,g){yield fl((0,B.m9)(v),g)})).apply(this,arguments)}let $h=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=bt(m)}verifyPhoneNumber(m,E){return Yn(this.auth,m,(0,B.m9)(E))}static credential(m,E){return yo._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:x}=m;return E&&x?yo._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Ks(v,g){return g?ee(g):(ie(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class sd extends Wr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Bs(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Bs(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Bs(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function $o(v){return mc(v.auth,new sd(v),v.bypassAuthState)}function rt(v){const{auth:g,user:m}=v;return ie(m,g,"internal-error"),pl(m,new sd(v),v.bypassAuthState)}function Ua(v){return Li.apply(this,arguments)}function Li(){return(Li=(0,d.Z)(function*(v){const{auth:g,user:m}=v;return ie(m,g,"internal-error"),fl(m,new sd(v),v.bypassAuthState)})).apply(this,arguments)}class Va{constructor(g,m,E,x,N=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,d.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(N){g.reject(N)}});return function(E,x){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,d.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:N,tenantId:ne,error:Se,type:Ke}=g;if(Se)return void m.reject(Se);const ot={auth:m.auth,requestUri:E,sessionId:x,tenantId:ne||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ke)(ot))}catch(Ht){m.reject(Ht)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return $o;case"linkViaPopup":case"linkViaRedirect":return Ua;case"reauthViaPopup":case"reauthViaRedirect":return rt;default:et(this.auth,"internal-error")}}resolve(g){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ja=new qe(2e3,1e4);function Pn(v,g,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,d.Z)(function*(v,g,m){const E=bt(v);De(v,g,Cr);const x=Ks(E,m);return new za(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function $a(v,g,m){return od.apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v);De(E.auth,g,Cr);const x=Ks(E.auth,m);return new za(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function zh(v,g,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v);De(E.auth,g,Cr);const x=Ks(E.auth,m);return new za(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let za=(()=>{class v extends Va{constructor(m,E,x,N,ne){super(m,E,N,ne),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const E=yield m.execute();return ie(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,d.Z)(function*(){ye(1===m.filter.length,"Popup operations only handle one event");const E=No();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(x=>{m.reject(x)}),m.resolver._isIframeWebStorageSupported(m.auth,x=>{x||m.reject(Fe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,x;this.pollId=null!==(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ja.get())};m()}}return v.currentPopupAction=null,v})();const xr=new Map;class Ys extends Va{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,d.Z)(function*(){let E=xr.get(m.auth._key());if(!E){try{const N=(yield function Rc(v,g){return Mr.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(N)}catch(x){E=()=>Promise.reject(x)}xr.set(m.auth._key(),E)}return m.bypassAuthState||xr.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Mr(){return(Mr=(0,d.Z)(function*(v,g){const m=ls(g),E=Qs(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(m));return yield E._remove(m),x})).apply(this,arguments)}function Fr(v,g){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,d.Z)(function*(v,g){return Qs(v)._set(ls(g),"true")})).apply(this,arguments)}function Rr(){xr.clear()}function sr(v,g){xr.set(v._key(),g)}function Qs(v){return ee(v._redirectPersistence)}function ls(v){return an("pendingRedirect",v.config.apiKey,v.name)}function or(v,g,m){return function _n(v,g,m){return Ui.apply(this,arguments)}(v,g,m)}function Ui(){return(Ui=(0,d.Z)(function*(v,g,m){const E=bt(v);De(v,g,Cr);const x=Ks(E,m);return yield Fr(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function C(v,g,m){return function D(v,g,m){return M.apply(this,arguments)}(v,g,m)}function M(){return(M=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v);De(E.auth,g,Cr);const x=Ks(E.auth,m);yield Fr(x,E.auth);const N=yield Ot(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",N)})).apply(this,arguments)}function L(v,g,m){return function X(v,g,m){return ae.apply(this,arguments)}(v,g,m)}function ae(){return(ae=(0,d.Z)(function*(v,g,m){const E=(0,B.m9)(v);De(E.auth,g,Cr);const x=Ks(E.auth,m);yield Ni(!1,E,g.providerId),yield Fr(x,E.auth);const N=yield Ot(E);return x._openRedirect(E.auth,g,"linkViaRedirect",N)})).apply(this,arguments)}function xe(v,g){return Be.apply(this,arguments)}function Be(){return(Be=(0,d.Z)(function*(v,g){return yield bt(v)._initializationPromise,ut(v,g,!1)})).apply(this,arguments)}function ut(v,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,d.Z)(function*(v,g,m=!1){const E=bt(v),x=Ks(E,g),ne=yield new Ys(E,x,m).execute();return ne&&!m&&(delete ne.user._redirectEventId,yield E._persistUserIfCurrent(ne.user),yield E._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Ot(v){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(v){const g=No(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class yr{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ft(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cs(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!cs(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Fe(this.auth,x))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Go(g))}saveEventToCache(g){this.cachedEventUids.add(Go(g)),this.lastProcessedEventTime=Date.now()}}function Go(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function cs({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===g?.code}function Ci(v){return us.apply(this,arguments)}function us(){return(us=(0,d.Z)(function*(v,g={}){return zt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Vi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wo=/^https?/;function Yr(){return(Yr=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Ci(v);for(const m of g)try{if(C_(m))return}catch{}et(v,"unauthorized-domain")})).apply(this,arguments)}function C_(v){const g=Ve(),{protocol:m,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const ne=new URL(v);return""===ne.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&ne.hostname===E}if(!Wo.test(m))return!1;if(Vi.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const lg=new qe(3e4,6e4);function Gh(){const v=$n().___jsl;if(v?.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Gn=null;function Xs(v){return Gn=Gn||function u0(v){return new Promise((g,m)=>{var E,x,N;function ne(){Gh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Gh(),m(Fe(v,"network-request-failed"))},timeout:lg.get()})}if(null!==(x=null===(E=$n().gapi)||void 0===E?void 0:E.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(N=$n().gapi)||void 0===N||!N.load){const Se=jo("iframefcb");return $n()[Se]=()=>{gapi.load?ne():m(Fe(v,"network-request-failed"))},zs(`https://apis.google.com/js/api.js?onload=${Se}`).catch(Ke=>m(Ke))}ne()}}).catch(g=>{throw Gn=null,g})}(v),Gn}const Wh=new qe(5e3,15e3),qh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kh(v){const g=v.config;ie(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?mn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:k.SDK_VERSION},x=D_.get(v.config.apiHost);x&&(E.eid=x);const N=v._getFrameworks();return N.length&&(E.fw=N.join(",")),`${m}?${(0,B.xO)(E).slice(1)}`}function ad(){return ad=(0,d.Z)(function*(v){const g=yield Xs(v),m=$n().gapi;return ie(m,v,"internal-error"),g.open({where:document.body,url:Kh(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qh,dontclear:!0},E=>new Promise(function(){var x=(0,d.Z)(function*(N,ne){yield E.restyle({setHideOnLeave:!1});const Se=Fe(v,"network-request-failed"),Ke=$n().setTimeout(()=>{ne(Se)},Wh.get());function ot(){$n().clearTimeout(Ke),N(E)}E.ping(ot).then(ot,()=>{ne(Se)})});return function(N,ne){return x.apply(this,arguments)}}()))}),ad.apply(this,arguments)}const kc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Cl(v,g,m,E,x,N){ie(v.config.authDomain,v,"auth-domain-config-required"),ie(v.config.apiKey,v,"invalid-api-key");const ne={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:k.SDK_VERSION,eventId:x};if(g instanceof Cr){g.setDefaultLanguage(v.languageCode),ne.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ke,ot]of Object.entries(N||{}))ne[Ke]=ot}if(g instanceof bo){const Ke=g.getScopes().filter(ot=>""!==ot);Ke.length>0&&(ne.scopes=Ke.join(","))}v.tenantId&&(ne.tid=v.tenantId);const Se=ne;for(const Ke of Object.keys(Se))void 0===Se[Ke]&&delete Se[Ke];return`${function Wa({config:v}){return v.emulator?mn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Se).slice(1)}`}const Dl="webStorageSupport",Yh=class Pc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Es,this._completeRedirectFn=ut,this._overrideRedirectResult=sr}_openPopup(g,m,E,x){var N=this;return(0,d.Z)(function*(){var ne;ye(null===(ne=N.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Se=Cl(g,m,E,Ve(),x);return function cd(v,g,m,E=500,x=600){const N=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-E)/2,0).toString();let Se="";const Ke=Object.assign(Object.assign({},kc),{width:E.toString(),height:x.toString(),top:N,left:ne}),ot=(0,B.z$)().toLowerCase();m&&(Se=be(ot)?"_blank":m),V(ot)&&(g=g||"http://localhost",Ke.scrollbars="yes");const Ht=Object.entries(Ke).reduce((hs,[qa,Xh])=>`${hs}${qa}=${Xh},`,"");if(function Sn(v=(0,B.z$)()){var g;return nt(v)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==Se)return function to(v,g){const m=document.createElement("a");m.href=v,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",Se),new Nc(null);const On=window.open(g||"",Se,Ht);ie(On,v,"popup-blocked");try{On.focus()}catch{}return new Nc(On)}(g,Se,No())})()}_openRedirect(g,m,E,x){var N=this;return(0,d.Z)(function*(){return yield N._originValidation(g),function Xu(v){$n().location.href=v}(Cl(g,m,E,Ve(),x)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:x,promise:N}=this.eventManagers[m];return x?Promise.resolve(x):(ye(N,"If manager is not set, promise should be"),N)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,d.Z)(function*(){const E=yield function ug(v){return ad.apply(this,arguments)}(g),x=new yr(g);return E.register("authEvent",N=>(ie(N?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:x},m.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Dl,{type:Dl},x=>{var N;const ne=null===(N=x?.[0])||void 0===N?void 0:N[Dl];void 0!==ne&&m(!!ne),et(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Js(v){return Yr.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return pn()||H()||nt()}};class Qh extends class ud{constructor(g){this.factorId=g}_process(g,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,E);case"signin":return this._finalizeSignIn(g,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Qh(g)}_finalizeEnroll(g,m,E){return function _l(v,g){return zt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(v,g))}(g,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Uo(v,g){return zt(v,"POST","/v2/accounts/mfaSignIn:finalize",Wt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ds=(()=>{class v{constructor(){}static assertion(m){return Qh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Is="@firebase/auth";class hg{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function S_(v){(0,k._registerComponent)(new _e.wA("auth",(g,{options:m})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:N,authDomain:ne}=E.options;return((Se,Ke)=>{ie(N&&!N.includes(":"),"invalid-api-key",{appName:Se.name}),ie(!ne?.includes(":"),"argument-error",{appName:Se.name});const ot={apiKey:N,authDomain:ne,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(v)},Ht=new Ns(Se,Ke,ot);return function oe(v,g){const m=g?.persistence||[],E=(Array.isArray(m)?m:[m]).map(ee);g?.errorMap&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,g?.popupRedirectResolver)}(Ht,m),Ht})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new _e.wA("auth-internal",g=>{const m=bt(g.getProvider("auth").getImmediate());return new hg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Is,"0.20.6",function T_(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(Is,"0.20.6","esm2017")}("Browser")},2090:(ht,Me,P)=>{P.d(Me,{$s:()=>Sr,BH:()=>$e,G6:()=>ie,L:()=>fe,LL:()=>Ve,Mn:()=>De,Sg:()=>Oe,UG:()=>we,US:()=>_e,ZB:()=>G,ZR:()=>oe,b$:()=>et,d:()=>Fe,eu:()=>ye,hl:()=>he,jU:()=>me,m9:()=>Zt,ne:()=>Ri,pd:()=>Un,r3:()=>Wt,ru:()=>Xe,tV:()=>ve,uI:()=>it,vZ:()=>wr,w1:()=>Ne,xO:()=>xi,xb:()=>br,z$:()=>Ie,zI:()=>Q,zd:()=>zr});const se=function(Y){const j=[];let U=0;for(let W=0;W<Y.length;W++){let q=Y.charCodeAt(W);q<128?j[U++]=q:q<2048?(j[U++]=q>>6|192,j[U++]=63&q|128):55296==(64512&q)&&W+1<Y.length&&56320==(64512&Y.charCodeAt(W+1))?(q=65536+((1023&q)<<10)+(1023&Y.charCodeAt(++W)),j[U++]=q>>18|240,j[U++]=q>>12&63|128,j[U++]=q>>6&63|128,j[U++]=63&q|128):(j[U++]=q>>12|224,j[U++]=q>>6&63|128,j[U++]=63&q|128)}return j},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,j){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,W=[];for(let q=0;q<Y.length;q+=3){const Ae=Y[q],ze=q+1<Y.length,Et=ze?Y[q+1]:0,ln=q+2<Y.length,an=ln?Y[q+2]:0;let V=(15&Et)<<2|an>>6,H=63&an;ln||(H=64,ze||(V=64)),W.push(U[Ae>>2],U[(3&Ae)<<4|Et>>4],U[V],U[H])}return W.join("")},encodeString(Y,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(Y):this.encodeByteArray(se(Y),j)},decodeString(Y,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(Y):function(Y){const j=[];let U=0,W=0;for(;U<Y.length;){const q=Y[U++];if(q<128)j[W++]=String.fromCharCode(q);else if(q>191&&q<224){const Ae=Y[U++];j[W++]=String.fromCharCode((31&q)<<6|63&Ae)}else if(q>239&&q<365){const ln=((7&q)<<18|(63&Y[U++])<<12|(63&Y[U++])<<6|63&Y[U++])-65536;j[W++]=String.fromCharCode(55296+(ln>>10)),j[W++]=String.fromCharCode(56320+(1023&ln))}else{const Ae=Y[U++],ze=Y[U++];j[W++]=String.fromCharCode((15&q)<<12|(63&Ae)<<6|63&ze)}}return j.join("")}(this.decodeStringToByteArray(Y,j))},decodeStringToByteArray(Y,j){this.init_();const U=j?this.charToByteMapWebSafe_:this.charToByteMap_,W=[];for(let q=0;q<Y.length;){const Ae=U[Y.charAt(q++)],Et=q<Y.length?U[Y.charAt(q)]:0;++q;const an=q<Y.length?U[Y.charAt(q)]:64;++q;const te=q<Y.length?U[Y.charAt(q)]:64;if(++q,null==Ae||null==Et||null==an||null==te)throw Error();W.push(Ae<<2|Et>>4),64!==an&&(W.push(Et<<4&240|an>>2),64!==te&&W.push(an<<6&192|te))}return W},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},fe=function(Y){return function(Y){const j=se(Y);return _e.encodeByteArray(j,!0)}(Y).replace(/\./g,"")},ve=function(Y){try{return _e.decodeString(Y,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G(Y,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return j}for(const U in j)!j.hasOwnProperty(U)||!J(U)||(Y[U]=G(Y[U],j[U]));return Y}function J(Y){return"__proto__"!==Y}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,U)=>{this.resolve=j,this.reject=U})}wrapCallback(j){return(U,W)=>{U?this.reject(U):this.resolve(W),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(U):j(U,W))}}}function Oe(Y,j){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const W=j||"demo-project",q=Y.iat||0,Ae=Y.sub||Y.user_id;if(!Ae)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${W}`,aud:W,iat:q,exp:q+3600,auth_time:q,sub:Ae,user_id:Ae,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(ze)),""].join(".")}function Ie(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return"object"==typeof self&&self.self===self}function Xe(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Ie().indexOf("Electron/")>=0}function Ne(){const Y=Ie();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function De(){return Ie().indexOf("MSAppHost/")>=0}function ie(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function ye(){return new Promise((Y,j)=>{try{let U=!0;const W="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(W);q.onsuccess=()=>{q.result.close(),U||self.indexedDB.deleteDatabase(W),Y(!0)},q.onupgradeneeded=()=>{U=!1},q.onerror=()=>{var Ae;j((null===(Ae=q.error)||void 0===Ae?void 0:Ae.message)||"")}}catch(U){j(U)}})}function Q(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class oe extends Error{constructor(j,U,W){super(U),this.code=j,this.customData=W,this.name="FirebaseError",Object.setPrototypeOf(this,oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(j,U,W){this.service=j,this.serviceName=U,this.errors=W}create(j,...U){const W=U[0]||{},q=`${this.service}/${j}`,Ae=this.errors[j],ze=Ae?function je(Y,j){return Y.replace(yt,(U,W)=>{const q=j[W];return null!=q?String(q):`<${W}?>`})}(Ae,W):"Error";return new oe(q,`${this.serviceName}: ${ze} (${q}).`,W)}}const yt=/\{\$([^}]+)}/g;function Wt(Y,j){return Object.prototype.hasOwnProperty.call(Y,j)}function br(Y){for(const j in Y)if(Object.prototype.hasOwnProperty.call(Y,j))return!1;return!0}function wr(Y,j){if(Y===j)return!0;const U=Object.keys(Y),W=Object.keys(j);for(const q of U){if(!W.includes(q))return!1;const Ae=Y[q],ze=j[q];if(Tn(Ae)&&Tn(ze)){if(!wr(Ae,ze))return!1}else if(Ae!==ze)return!1}for(const q of W)if(!U.includes(q))return!1;return!0}function Tn(Y){return null!==Y&&"object"==typeof Y}function xi(Y){const j=[];for(const[U,W]of Object.entries(Y))Array.isArray(W)?W.forEach(q=>{j.push(encodeURIComponent(U)+"="+encodeURIComponent(q))}):j.push(encodeURIComponent(U)+"="+encodeURIComponent(W));return j.length?"&"+j.join("&"):""}function zr(Y){const j={};return Y.replace(/^\?/,"").split("&").forEach(W=>{if(W){const[q,Ae]=W.split("=");j[decodeURIComponent(q)]=decodeURIComponent(Ae)}}),j}function Un(Y){const j=Y.indexOf("?");if(!j)return"";const U=Y.indexOf("#",j);return Y.substring(j,U>0?U:void 0)}function Ri(Y,j){const U=new tt(Y,j);return U.subscribe.bind(U)}class tt{constructor(j,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{j(this)}).catch(W=>{this.error(W)})}next(j){this.forEachObserver(U=>{U.next(j)})}error(j){this.forEachObserver(U=>{U.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,U,W){let q;if(void 0===j&&void 0===U&&void 0===W)throw new Error("Missing Observer.");q=function Vn(Y,j){if("object"!=typeof Y||null===Y)return!1;for(const U of j)if(U in Y&&"function"==typeof Y[U])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:U,complete:W},void 0===q.next&&(q.next=fn),void 0===q.error&&(q.error=fn),void 0===q.complete&&(q.complete=fn);const Ae=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Ae}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,j)}sendOne(j,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{U(this.observers[j])}catch(W){typeof console<"u"&&console.error&&console.error(W)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fn(){}function Sr(Y,j=1e3,U=2){const W=j*Math.pow(U,Y),q=Math.round(.5*W*(Math.random()-.5)*2);return Math.min(144e5,W+q)}function Zt(Y){return Y&&Y._delegate?Y._delegate:Y}},662:(ht,Me,P)=>{var d=P(4650);let B=null;function k(){return B}const ue=new d.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return(0,d.LFG)(G)}()},providedIn:"platform"}),n})();const z=new d.OlP("Location Initialized");let G=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function $e(){return new G((0,d.LFG)(ue))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Xe)},providedIn:"root"}),n})();const me=new d.OlP("appBaseHref");let Xe=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+it(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+it(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),et=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+it(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+it(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(me,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Ie(We(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,We(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=Oe,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(d.LFG(we))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ne(){return new Fe((0,d.LFG)(we))}()},providedIn:"root"}),n})();function We(n){return n.replace(/\/index.html$/,"")}let un=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,d.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,d.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.ZZ4),d.Y36(d.aQg),d.Y36(d.SBq),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Fs{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ki=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Fs(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,u),Ls(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ls(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ls(n,e){n.context.$implicit=e.item}let Rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ah,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ah{constructor(){this.$implicit=null,this.ngIf=null}}function tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Uu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const ui="browser";function Eo(n){return"server"===n}let Vu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new xh((0,d.LFG)(ue),window)}),n})();class xh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Dr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bs extends class Gu extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){B||(B=n)}(new bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Wu(){return ws=ws||document.querySelector("base"),ws?ws.getAttribute("href"):null}();return null==t?null:function rs(n){An=An||document.createElement("a"),An.setAttribute("href",n);const e=An.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function uc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let An,ws=null;const xn=new d.OlP("TRANSITION_ID"),wc=[{provide:d.ip1,useFactory:function bc(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[xn,ue,d.zs3],multi:!0}];let Ec=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ic=new d.OlP("EventManagerPlugins");let Ku=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ic),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Cc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Mo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ro=(()=>{class n extends Mo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Zu(n){k().remove(n)}const ko={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yu=/%COMP%/g;function yl(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?yl(n,i,t):(i=i.replace(Yu,n),t.push(i))}return t}function vl(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ka=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new is(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ju(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Fh(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=yl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ku),d.LFG(Ro),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class is{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ko[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Pa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ko[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ko[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,vl(r)):this.eventManager.addEventListener(e,t,vl(r))}}function Pa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ju extends is{constructor(e,t,r,i){super(e),this.component=r;const a=yl(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hn(n){return"_ngcontent-%COMP%".replace(Yu,n)}(i+"-"+r.id),this.hostAttr=function _l(n){return"_nghost-%COMP%".replace(Yu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fh extends is{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=yl(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const f=document.createElement("style");f.textContent=a[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ir=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Lh=["alt","control","meta","shift"],Es={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Sc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Oa=(()=>{class n extends Cc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Lh.forEach(b=>{const T=r.indexOf(b);T>-1&&(r.splice(T,1),u+=b+".")}),u+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=u,_}static matchEventFullKeyCode(t,r){let i=Es[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lh.forEach(u=>{u!==i&&(0,Sc[u])(t)&&(a+=u+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ui},{provide:d.g9A,useValue:function ed(){bs.makeCurrent()},multi:!0},{provide:ue,useFactory:function Ac(){return(0,d.RDi)(document),document},deps:[]}]),js=new d.OlP(""),La=[{provide:d.rWj,useClass:class qu{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const f=function(_){u=u||_,a--,0==a&&r(u)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Po=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ss(){return new d.qLn},deps:[]},{provide:Ic,useClass:ir,multi:!0,deps:[ue,d.R0b,d.Lbi]},{provide:Ic,useClass:Oa,multi:!0,deps:[ue]},{provide:ka,useClass:ka,deps:[Ku,Ro,d.AFp]},{provide:d.FYo,useExisting:ka},{provide:Mo,useExisting:Ro},{provide:Ro,useClass:Ro,deps:[ue]},{provide:Ku,useClass:Ku,deps:[Ic,d.R0b]},{provide:class Io{},useClass:Ec,deps:[]},[]];let Hs=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:xn,useExisting:d.AFp},wc]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(js,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Po,...La],imports:[Uu,d.hGG]}),n})(),Oi=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ba(){return new Oi((0,d.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var gn=P(8996),os=P(3269);function st(...n){const e=(0,os.yG)(n);return(0,gn.D)(n,e)}var Nn=P(7579);class bn extends Nn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ws=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Yn=P(9751);const{isArray:qs}=Array,{getPrototypeOf:rd,prototype:id,keys:$h}=Object;var $o=P(4671),rt=P(4004);const{isArray:Ua}=Array;function Va(n){return(0,rt.U)(e=>function Li(n,e){return Ua(e)?n(...e):n(e)}(n,e))}var Pn=P(5403),Ha=P(9672);function $a(...n){const e=(0,os.yG)(n),t=(0,os.jO)(n),{args:r,keys:i}=function Ks(n){if(1===n.length){const e=n[0];if(qs(e))return{args:e,keys:null};if(function sd(n){return n&&"object"==typeof n&&rd(n)===id}(e)){const t=$h(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,gn.D)([],e);const a=new Yn.y(function od(n,e,t=$o.y){return r=>{zh(e,()=>{const{length:i}=n,a=new Array(i);let u=i,f=i;for(let _=0;_<i;_++)zh(e,()=>{const b=(0,gn.D)(n[_],e);let T=!1;b.subscribe((0,Pn.x)(r,A=>{a[_]=A,T||(T=!0,f--),f||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>function ja(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,u):$o.y));return t?a.pipe(Va(t)):a}function zh(n,e,t){n?(0,Ha.f)(t,n,e):e()}var zo=P(8189);function Zs(...n){return function za(){return(0,zo.J)(1)}()((0,gn.D)(n,(0,os.yG)(n)))}var xr=P(8421);function Ys(n){return new Yn.y(e=>{(0,xr.Xf)(n()).subscribe(e)})}var Rc=P(9635),Mr=P(576);function Fr(n,e){const t=(0,Mr.m)(n)?n:()=>n,r=i=>i.error(t());return new Yn.y(e?i=>e.schedule(r,0,i):r)}var Bi=P(515),Rr=P(727),sr=P(4482);function Qs(){return(0,sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ls extends Yn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Rr.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Rr.w0.EMPTY)}return e}refCount(){return Qs()(this)}}function or(n,e){return(0,sr.e)((t,r)=>{let i=null,a=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,Pn.x)(r,_=>{i?.unsubscribe();let b=0;const T=a++;(0,xr.Xf)(n(_,T)).subscribe(i=(0,Pn.x)(r,A=>r.next(e?e(_,A,T,b++):A),()=>{i=null,f()}))},()=>{u=!0,f()}))})}function _n(n){return n<=0?()=>Bi.E:(0,sr.e)((e,t)=>{let r=0;e.subscribe((0,Pn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ui(...n){const e=(0,os.yG)(n);return(0,sr.e)((t,r)=>{(e?Zs(n,t,e):Zs(n,t)).subscribe(r)})}function C(n,e){return(0,sr.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var D=P(5577);function M(n){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function L(n=X){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function X(){return new Ws}function ae(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((i,a)=>n(i,a,r)):$o.y,_n(1),t?M(e):L(()=>new Ws))}function xe(n,e){return(0,Mr.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var Be=P(8505);function ut(n){return(0,sr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,u=>{a=(0,xr.Xf)(n(u,ut(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function xt(n,e,t,r,i){return(a,u)=>{let f=t,_=e,b=0;a.subscribe((0,Pn.x)(u,T=>{const A=b++;_=f?n(_,T,A):(f=!0,T),r&&u.next(_)},i&&(()=>{f&&u.next(_),u.complete()})))}}function Ot(n,e){return(0,sr.e)(xt(n,e,arguments.length>=2,!0))}function mt(n){return n<=0?()=>Bi.E:(0,sr.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?C((i,a)=>n(i,a,r)):$o.y,mt(1),t?M(e):L(()=>new Ws))}function cs(n){return(0,sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ft="primary",Ci=Symbol("RouteTitle");class us{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vi(n){return new us(n)}function Wo(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],f=n[a];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!C_(n[i],e[i]))return!1;return!0}function C_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function lg(n){return Array.prototype.concat.apply([],n)}function Gh(n){return n.length>0?n[n.length-1]:null}function Gn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Xs(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,gn.D)(Promise.resolve(n)):st(n)}const d0={exact:function ug(n,e,t){if(!to(n.segments,e.segments)||!eo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ug(n.children[r],e.children[r],t))return!1;return!0},subset:kc},qh={exact:function Kh(n,e){return Yr(n,e)},subset:function ad(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>C_(n[t],e[t]))},ignored:()=>!0};function D_(n,e,t){return d0[t.paths](n.root,e.root,t.matrixParams)&&qh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kc(n,e,t){return ld(n,e,e.segments,t)}function ld(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!to(i,t)||e.hasChildren()||!eo(i,t,r))}if(n.segments.length===t.length){if(!to(n.segments,t)||!eo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!kc(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(to(n.segments,i)&&eo(n.segments,i,r)&&n.children[Ft])&&ld(n.children[Ft],e,a,r)}}function eo(n,e,t){return e.every((r,i)=>qh[t](n[i].parameters,r.parameters))}class Ga{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vi(this.queryParams)),this._queryParamMap}toString(){return Wa.serialize(this)}}class Jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Gn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dl(this)}}class Nc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vi(this.parameters)),this._parameterMap}toString(){return hg(this)}}function to(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Cl},providedIn:"root"}),n})();class Cl{parse(e){const t=new N(e);return new Ga(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pc(e.root,!0)}`,r=function S_(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ud(t)}=${ud(i)}`).join("&"):`${ud(t)}=${ud(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Qh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wa=new Cl;function Dl(n){return n.segments.map(e=>hg(e)).join("/")}function Pc(n,e){if(!n.hasChildren())return Dl(n);if(e){const t=n.children[Ft]?Pc(n.children[Ft],!1):"",r=[];return Gn(n.children,(i,a)=>{a!==Ft&&r.push(`${a}:${Pc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function dg(n,e){let t=[];return Gn(n.children,(r,i)=>{i===Ft&&(t=t.concat(e(r,i)))}),Gn(n.children,(r,i)=>{i!==Ft&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ft?[Pc(n.children[Ft],!1)]:[`${i}:${Pc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ft]?`${Dl(n)}/${t[0]}`:`${Dl(n)}/(${t.join("//")})`}}function Yh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ud(n){return Yh(n).replace(/%3B/gi,";")}function ds(n){return Yh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Is(n){return decodeURIComponent(n)}function Jh(n){return Is(n.replace(/\+/g,"%20"))}function hg(n){return`${ds(n.path)}${function T_(n){return Object.keys(n).map(e=>`;${ds(e)}=${ds(n[e])}`).join("")}(n.parameters)}`}const h0=/^[^\/()?;=#]+/;function v(n){const e=n.match(h0);return e?e[0]:""}const g=/^[^=?&#]+/,E=/^[^&#]+/;class N{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ft]=new Jt(e,t)),r}parseSegment(){const e=v(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new Nc(Is(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=v(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=v(this.remaining);i&&(r=i,this.capture(r))}e[Is(t)]=Is(r)}parseQueryParam(e){const t=function m(n){const e=n.match(g);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function x(n){const e=n.match(E);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Jh(t),a=Jh(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=v(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ft);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Ft]:new Jt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function ne(n){return n.segments.length>0?new Jt([],{[Ft]:n}):n}function Se(n){const e={};for(const r of Object.keys(n.children)){const a=Se(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Ke(n){if(1===n.numberOfChildren&&n.children[Ft]){const e=n.children[Ft];return new Jt(n.segments.concat(e.segments),e.children)}return n}(new Jt(n.segments,e))}function ot(n){return n instanceof Ga}function Xh(n,e,t,r,i){if(0===t.length)return ro(e.root,e.root,e.root,r,i);const a=function fg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ef(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Gn(a.outlets,(_,b)=>{f[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new ef(t,e,r)}(t);return a.toRoot()?ro(e.root,e.root,new Jt([],{}),r,i):function u(_){const b=function pg(n,e,t,r){if(n.isAbsolute)return new qo(e.root,!0,0);if(-1===r)return new qo(t,t===e.root,0);return function gg(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new qo(r,!1,i-a)}(t,r+(Oc(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),T=b.processChildren?Tl(b.segmentGroup,b.index,a.commands):dd(b.segmentGroup,b.index,a.commands);return ro(e.root,b.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Oc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function no(n){return"object"==typeof n&&null!=n&&n.outlets}function ro(n,e,t,r,i){let u,a={};r&&Gn(r,(_,b)=>{a[b]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),u=n===e?t:Fc(n,e,t);const f=ne(Se(u));return new Ga(f,a,i)}function Fc(n,e,t){const r={};return Gn(n.children,(i,a)=>{r[a]=i===e?t:Fc(i,e,t)}),new Jt(n.segments,r)}class ef{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Oc(r[0]))throw new d.vHH(4003,!1);const i=r.find(no);if(i&&i!==Gh(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function dd(n,e,t){if(n||(n=new Jt([],{})),0===n.segments.length&&n.hasChildren())return Tl(n,e,t);const r=function f0(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],f=t[r];if(no(f))break;const _=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!p0(_,b,u))return a;r+=2}else{if(!p0(_,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Jt(n.segments.slice(0,r.pathIndex),{});return a.children[Ft]=new Jt(n.segments.slice(r.pathIndex),n.children),Tl(a,0,i)}return r.match&&0===i.length?new Jt(n.segments,{}):r.match&&!n.hasChildren()?rf(n,e,t):r.match?Tl(n,0,i):rf(n,e,t)}function Tl(n,e,t){if(0===t.length)return new Jt(n.segments,{});{const r=function nf(n){return no(n[0])?n[0].outlets:{[Ft]:n}}(t),i={};return Gn(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=dd(n.children[u],e,a))}),Gn(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Jt(n.segments,i)}}function rf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(no(a)){const _=wC(a.outlets);return new Jt(r,_)}if(0===i&&Oc(t[0])){r.push(new Nc(n.segments[e].path,ur(t[0]))),i++;continue}const u=no(a)?a.outlets[Ft]:`${a}`,f=i<t.length-1?t[i+1]:null;u&&f&&Oc(f)?(r.push(new Nc(u,ur(f))),i+=2):(r.push(new Nc(u,{})),i++)}return new Jt(r,{})}function wC(n){const e={};return Gn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rf(new Jt([],{}),0,t))}),e}function ur(n){const e={};return Gn(n,(t,r)=>e[r]=`${t}`),e}function p0(n,e,t){return n==t.path&&Yr(e,t.parameters)}class Ka{constructor(e,t){this.id=e,this.url=t}}class sf extends Ka{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sl extends Ka{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mg extends Ka{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class g0 extends Ka{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class EC extends Ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IC extends Ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CC extends Ka{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class YA extends Ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QA extends Ka{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class af{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class A_{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class m0{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _0{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DC{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class x_{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _g{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=b0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=b0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=M_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return M_(e,this._root).map(t=>t.value)}}function b0(n,e){if(n===e.value)return e;for(const t of e.children){const r=b0(n,t);if(r)return r}return null}function M_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=M_(n,t);if(r.length)return r.unshift(e),r}return[]}class io{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Lc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class R_ extends _g{constructor(e,t){super(e),this.snapshot=t,Ya(this,e)}toString(){return this.snapshot.toString()}}function Al(n,e){const t=function TC(n,e){const u=new hd([],{},{},"",{},Ft,e,null,n.root,-1,{});return new cf("",new io(u,[]))}(n,e),r=new bn([new Nc("",{})]),i=new bn({}),a=new bn({}),u=new bn({}),f=new bn(""),_=new Za(r,i,u,f,a,Ft,e,t.root);return _.snapshot=t.root,new R_(new io(_,[]),t)}class Za{constructor(e,t,r,i,a,u,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.title=this.data?.pipe((0,rt.U)(b=>b[Ci]))??st(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>Vi(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>Vi(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function SC(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hd{constructor(e,t,r,i,a,u,f,_,b,T,A,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=f,this.title=this.data?.[Ci],this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=T,this._correctedLastPathIndex=F??T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vi(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vi(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cf extends _g{constructor(e,t){super(t),this.url=e,Ya(this,t)}toString(){return k_(this._root)}}function Ya(n,e){e.value._routerState=n,e.children.forEach(t=>Ya(n,t))}function k_(n){const e=n.children.length>0?` { ${n.children.map(k_).join(", ")} } `:"";return`${n.value}${e}`}function uf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yr(e.params,t.params)||n.params.next(t.params),function Js(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function N_(n,e){const t=Yr(n.params,e.params)&&function cd(n,e){return to(n,e)&&n.every((t,r)=>Yr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||N_(n.parent,e.parent))}function fd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function pd(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fd(n,r,i);return fd(n,r)})}(n,e,t);return new io(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>fd(n,f)),u}}const r=function xC(n){return new Za(new bn(n.url),new bn(n.params),new bn(n.queryParams),new bn(n.fragment),new bn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>fd(n,a));return new io(r,i)}}const P_="ngNavigationCancelingError";function w0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ot(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=E0(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function E0(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[P_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function yg(n){return I0(n)&&ot(n.url)}function I0(n){return n&&n[P_]}class C0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new df,this.attachRef=null}}let df=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new C0,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const hf=!1;let D0=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,hf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,hf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,hf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,hf);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new MC(t,f,i.injector);if(r&&function ff(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(u);this.activated=i.createComponent(b,i.length,_)}else this.activated=i.createComponent(u,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(df),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class MC{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Za?this.route:e===df?this.childContexts:this.parent.get(e,t)}}let O_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[D0],encapsulation:2}),n})();function Bc(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function bg(n){const e=n.children&&n.children.map(bg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ft&&(t.component=O_),t}function ji(n){return n.outlet||Ft}function S0(n,e){const t=n.filter(r=>ji(r)===e);return t.push(...n.filter(r=>ji(r)!==e)),t}function pf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class XA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),uf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Lc(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),Gn(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Lc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Lc(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Lc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new DC(a.value.snapshot))}),e.children.length&&this.forwardEvent(new _0(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(uf(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),uf(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=pf(i.snapshot),_=f?.get(d._Vd)??null;u.attachRef=null,u.route=i,u.resolver=_,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class PC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gd{constructor(e,t){this.component=e,this.route=t}}function ex(n,e,t){const r=n._root;return wg(r,e?e._root:null,t,[r.value])}function gf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:r}function wg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Lc(e);return n.children.forEach(u=>{(function nx(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const _=function OC(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!to(n.url,e.url);case"pathParamsOrQueryParamsChange":return!to(n.url,e.url)||!Yr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!N_(n,e)||!Yr(n.queryParams,e.queryParams);default:return!N_(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new PC(r)):(a.data=u.data,a._resolvedData=u._resolvedData),wg(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gd(f.outlet.component,u))}else u&&md(e,f,i),i.canActivateChecks.push(new PC(r)),wg(n,null,a.component?f?f.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),Gn(a,(u,f)=>md(u,t.getContext(f),i)),i}function md(n,e,t){const r=Lc(n),i=n.value;Gn(r,(a,u)=>{md(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new gd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Uc(n){return"function"==typeof n}function V_(n){return n instanceof Ws||"EmptyError"===n?.name}const Ig=Symbol("INITIAL_VALUE");function Vc(){return or(n=>$a(n.map(e=>e.pipe(_n(1),Ui(Ig)))).pipe((0,rt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ig)return Ig;if(!1===t||t instanceof Ga)return t}return!0}),C(e=>e!==Ig),_n(1)))}function k0(n){return(0,Rc.z)((0,Be.b)(e=>{if(ot(e))throw w0(0,e)}),(0,rt.U)(e=>!0===e))}const Qr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cg(n,e,t,r,i){const a=Dg(n,e,t);return a.matched?function GC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(u=>{const f=gf(u,n);return Xs(function U_(n){return n&&Uc(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Vc(),k0()):st(!0)}(r=Bc(e,r),e,t).pipe((0,rt.U)(u=>!0===u?a:{...Qr})):st(a)}function Dg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Qr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Wo)(t,n,e);if(!i)return{...Qr};const a={};Gn(i.posParams,(f,_)=>{a[_]=f.path});const u=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function _d(n,e,t,r,i="corrected"){if(t.length>0&&function H_(n,e,t){return t.some(r=>Tg(n,e,r)&&ji(r)!==Ft)}(n,t,r)){const u=new Jt(e,function mf(n,e,t,r){const i={};i[Ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&ji(a)!==Ft){const u=new Jt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[ji(a)]=u}return i}(n,e,r,new Jt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function WC(n,e,t){return t.some(r=>Tg(n,e,r))}(n,t,r)){const u=new Jt(n.segments,function pi(n,e,t,r,i,a){const u={};for(const f of r)if(Tg(n,t,f)&&!i[ji(f)]){const _=new Jt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[ji(f)]=_}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Jt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Tg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $_(n,e,t,r){return!!(ji(n)===r||r!==Ft&&Tg(e,t,n))&&("**"===n.path||Dg(e,n,t).matched)}function N0(n,e,t){return 0===e.length&&!n.children[t]}const _f=!1;class Sg{constructor(e){this.segmentGroup=e||null}}class z_{constructor(e){this.urlTree=e}}function yf(n){return Fr(new Sg(n))}function P0(n){return Fr(new z_(n))}class yd{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=_d(this.urlTree.root,[],[],this.config).segmentGroup,t=new Jt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ft).pipe((0,rt.U)(a=>this.createUrlTree(Se(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ut(a=>{if(a instanceof z_)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Sg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ft).pipe((0,rt.U)(i=>this.createUrlTree(Se(i),e.queryParams,e.fragment))).pipe(ut(i=>{throw i instanceof Sg?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,_f)}createUrlTree(e,t,r){const i=ne(e);return new Ga(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rt.U)(a=>new Jt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,gn.D)(i).pipe(xe(a=>{const u=r.children[a],f=S0(t,a);return this.expandSegmentGroup(e,f,u,a).pipe((0,rt.U)(_=>({segment:_,outlet:a})))}),Ot((a,u)=>(a[u.outlet]=u.segment,a),{}),zn())}expandSegment(e,t,r,i,a,u){return(0,gn.D)(r).pipe(xe(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,u).pipe(ut(b=>{if(b instanceof Sg)return st(null);throw b}))),ae(f=>!!f),ut((f,_)=>{if(V_(f))return N0(t,i,a)?st(new Jt([],{})):yf(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,u,f){return $_(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):yf(t):yf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?P0(a):this.lineralizeSegments(r,a).pipe((0,D.z)(u=>{const f=new Jt(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:f,consumedSegments:_,remainingSegments:b,positionalParamSegments:T}=Dg(t,i,a);if(!f)return yf(t);const A=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?P0(A):this.lineralizeSegments(i,A).pipe((0,D.z)(F=>this.expandSegment(e,t,r,F.concat(b),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Bc(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,rt.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Jt(i,{})))):st(new Jt(i,{}))):Cg(t,r,i,e).pipe(or(({matched:u,consumedSegments:f,remainingSegments:_})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,D.z)(T=>{const A=T.injector??e,F=T.routes,{segmentGroup:$,slicedSegments:Z}=_d(t,f,_,F),le=new Jt($.segments,$.children);if(0===Z.length&&le.hasChildren())return this.expandChildren(A,F,le).pipe((0,rt.U)(Ct=>new Jt(f,Ct)));if(0===F.length&&0===Z.length)return st(new Jt(f,{}));const Te=ji(r)===a;return this.expandSegment(A,le,F,Z,Te?Ft:a,!0).pipe((0,rt.U)(at=>new Jt(f.concat(at.segments),at.children)))})):yf(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function R0(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(u=>{const f=gf(u,n);return Xs(function x0(n){return n&&Uc(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Vc(),k0())}(e,t,r).pipe((0,D.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Be.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function qC(n){return Fr(E0(_f,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[Ft])return Fr(new d.vHH(4e3,_f));i=i.children[Ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ga(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Gn(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return Gn(t.children,(f,_)=>{u[_]=this.createSegmentGroup(e,f,r,i)}),new Jt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,_f);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ZC{}class F0{constructor(e,t,r,i,a,u,f,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f,this.urlSerializer=_}recognize(){const e=_d(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ft).pipe((0,rt.U)(t=>{if(null===t)return null;const r=new hd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ft,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new io(r,t),a=new cf(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=lf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,gn.D)(Object.keys(r.children)).pipe(xe(i=>{const a=r.children[i],u=S0(t,i);return this.processSegmentGroup(e,u,a,i)}),Ot((i,a)=>i&&a?(i.push(...a),i):null),function yr(n,e=!1){return(0,sr.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,a=>{const u=n(a,i++);(u||e)&&r.next(a),!u&&r.complete()}))})}(i=>null!==i),M(null),zn(),(0,rt.U)(i=>{if(null===i)return null;const a=xg(i);return function sx(n){n.sort((e,t)=>e.value.outlet===Ft?-1:t.value.outlet===Ft?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,gn.D)(t).pipe(xe(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,a)),ae(u=>!!u),ut(u=>{if(V_(u))return N0(r,i,a)?st([]):st(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!$_(t,r,i,a))return st(null);let u;if("**"===t.path){const f=i.length>0?Gh(i).parameters:{},_=L0(r)+i.length;u=st({snapshot:new hd(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B0(t),ji(t),t.component??t._loadedComponent??null,t,W_(r),_,U0(t),_),consumedSegments:[],remainingSegments:[]})}else u=Cg(r,t,i,e).pipe((0,rt.U)(({matched:f,consumedSegments:_,remainingSegments:b,parameters:T})=>{if(!f)return null;const A=L0(r)+_.length;return{snapshot:new hd(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,B0(t),ji(t),t.component??t._loadedComponent??null,t,W_(r),A,U0(t),A),consumedSegments:_,remainingSegments:b}}));return u.pipe(or(f=>{if(null===f)return st(null);const{snapshot:_,consumedSegments:b,remainingSegments:T}=f;e=t._injector??e;const A=t._loadedInjector??e,F=function Ko(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:$,slicedSegments:Z}=_d(r,b,T,F.filter(Te=>void 0===Te.redirectTo),this.relativeLinkResolution);if(0===Z.length&&$.hasChildren())return this.processChildren(A,F,$).pipe((0,rt.U)(Te=>null===Te?null:[new io(_,Te)]));if(0===F.length&&0===Z.length)return st([new io(_,[])]);const le=ji(t)===a;return this.processSegment(A,F,$,Z,le?Ft:a).pipe((0,rt.U)(Te=>null===Te?null:[new io(_,Te)]))}))}}function G_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xg(n){const e=[],t=new Set;for(const r of n){if(!G_(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=xg(r.children);e.push(new io(r.value,i))}return e.filter(r=>!t.has(r))}function W_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function L0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function B0(n){return n.data||{}}function U0(n){return n.resolve||{}}function Y_(n){return"string"==typeof n.title||null===n.title}function Q_(n){return or(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,rt.U)(()=>e)):st(e)})}let Mg=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Ft);return r}getResolvedTitleForRoute(t){return t.data[Ci]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(j0)},providedIn:"root"}),n})(),j0=(()=>{class n extends Mg{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Oi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class QC{}class XC extends class JC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vf=new d.OlP("",{providedIn:"root",factory:()=>({})}),kg=new d.OlP("ROUTES");let bf=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Xs(t.loadComponent()).pipe((0,Be.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),cs(()=>{this.componentLoaders.delete(t)})),i=new ls(r,()=>new Nn.x).pipe(Qs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,rt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,T=!1;Array.isArray(f)?b=f:(_=f.create(t).injector,b=lg(_.get(kg,[],d.XFs.Self|d.XFs.Optional)));return{routes:b.map(bg),injector:_}}),cs(()=>{this.childrenLoaders.delete(r)})),u=new ls(a,()=>new Nn.x).pipe(Qs());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Xs(t()).pipe((0,D.z)(r=>r instanceof d.YKP||Array.isArray(r)?st(r):(0,gn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tD{}class nD{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function H0(n){throw n}function jc(n,e,t){return e.parse("/")}const $0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function iD(){const n=(0,d.f3M)(Zh),e=(0,d.f3M)(df),t=(0,d.f3M)(Fe),r=(0,d.f3M)(d.zs3),i=(0,d.f3M)(d.Sil),a=(0,d.f3M)(kg,{optional:!0})??[],u=(0,d.f3M)(vf,{optional:!0})??{},f=(0,d.f3M)(j0),_=(0,d.f3M)(Mg,{optional:!0}),b=(0,d.f3M)(tD,{optional:!0}),T=(0,d.f3M)(QC,{optional:!0}),A=new Wn(null,n,e,t,r,i,lg(a));return b&&(A.urlHandlingStrategy=b),T&&(A.routeReuseStrategy=T),A.titleStrategy=_??f,function rD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,A),A}let Wn=(()=>{class n{constructor(t,r,i,a,u,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Nn.x,this.errorHandler=H0,this.malformedUriErrorHandler=jc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new nD,this.routeReuseStrategy=new XC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(bf),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new A_(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new af(F)),this.ngModule=u.get(d.h0i),this.console=u.get(d.c2e);const A=u.get(d.R0b);this.isNgZoneEnabled=A instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function cg(){return new Ga(new Jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Al(this.currentUrlTree,this.rootComponentType),this.transitions=new bn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(C(i=>0!==i.id),(0,rt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),or(i=>{let a=!1,u=!1;return st(i).pipe((0,Be.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),or(f=>{const _=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return J_(f.source)&&(this.browserUrlTree=f.extractedUrl),st(f).pipe(or(A=>{const F=this.transitions.getValue();return r.next(new sf(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),F!==this.transitions.getValue()?Bi.E:Promise.resolve(A)}),function Qa(n,e,t,r){return or(i=>function KC(n,e,t,r,i){return new yd(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,rt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Be.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function q_(n,e,t,r,i,a){return(0,D.z)(u=>function ix(n,e,t,r,i,a,u="emptyOnly",f="legacy"){return new F0(n,e,t,r,i,u,f,a).recognize().pipe(or(_=>null===_?function rx(n){return new Yn.y(e=>e.error(n))}(new ZC):st(_)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,a).pipe((0,rt.U)(f=>({...u,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Be.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl($,A)}this.browserUrlTree=A.urlAfterRedirects}const F=new EC(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:$,source:Z,restoredState:le,extras:Te}=f,Qe=new sf(F,this.serializeUrl($),Z,le);r.next(Qe);const at=Al($,this.rootComponentType).snapshot;return st(i={...f,targetSnapshot:at,urlAfterRedirects:$,extras:{...Te,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Bi.E}),(0,Be.b)(f=>{const _=new IC(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,rt.U)(f=>i={...f,guards:ex(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function BC(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?st({...t,guardsResult:!0}):function UC(n,e,t,r){return(0,gn.D)(n).pipe((0,D.z)(i=>function zC(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?st(a.map(f=>{const _=pf(e)??i,b=gf(f,_);return Xs(function FC(n){return n&&Uc(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(ae())})).pipe(Vc()):st(!0)}(i.component,i.route,t,e,r)),ae(i=>!0!==i,!0))}(u,r,i,n).pipe((0,D.z)(f=>f&&function A0(n){return"boolean"==typeof n}(f)?function VC(n,e,t,r){return(0,gn.D)(e).pipe(xe(i=>Zs(function j_(n,e){return null!==n&&e&&e(new m0(n)),st(!0)}(i.route.parent,r),function jC(n,e){return null!==n&&e&&e(new y0(n)),st(!0)}(i.route,r),function $C(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function tx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>Ys(()=>st(u.guards.map(_=>{const b=pf(u.node)??t,T=gf(_,b);return Xs(function B_(n){return n&&Uc(n.canActivateChild)}(T)?T.canActivateChild(r,n):b.runInContext(()=>T(r,n))).pipe(ae())})).pipe(Vc())));return st(a).pipe(Vc())}(n,i.path,t),function HC(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(a=>Ys(()=>{const u=pf(e)??t,f=gf(a,u);return Xs(function M0(n){return n&&Uc(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(ae())}));return st(i).pipe(Vc())}(n,i.route,t))),ae(i=>!0!==i,!0))}(r,a,n,e):st(f)),(0,rt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Be.b)(f=>{if(i.guardsResult=f.guardsResult,ot(f.guardsResult))throw w0(0,f.guardsResult);const _=new CC(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),C(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),Q_(f=>{if(f.guards.canActivateChecks.length)return st(f).pipe((0,Be.b)(_=>{const b=new YA(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),or(_=>{let b=!1;return st(_).pipe(function K_(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let a=0;return(0,gn.D)(i).pipe(xe(u=>function V0(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Y_(i)&&(a[Ci]=i.title),function ox(n,e,t,r){const i=function bd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const a={};return(0,gn.D)(i).pipe((0,D.z)(u=>function Z_(n,e,t,r){const i=pf(e)??r,a=gf(n,i);return Xs(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[u],e,t,r).pipe(ae(),(0,Be.b)(f=>{a[u]=f}))),mt(1),function Go(n){return(0,rt.U)(()=>n)}(a),ut(u=>V_(u)?Bi.E:Fr(u)))}(a,n,e,r).pipe((0,rt.U)(u=>(n._resolvedData=u,n.data=lf(n,t).resolve,i&&Y_(i)&&(n.data[Ci]=i.title),null)))}(u.route,r,n,e)),(0,Be.b)(()=>a++),mt(1),(0,D.z)(u=>a===i.length?st(t):Bi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Be.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Be.b)(_=>{const b=new QA(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),Q_(f=>{const _=b=>{const T=[];b.routeConfig?.loadComponent&&!b.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(b.routeConfig).pipe((0,Be.b)(A=>{b.component=A}),(0,rt.U)(()=>{})));for(const A of b.children)T.push(..._(A));return T};return $a(_(f.targetSnapshot.root)).pipe(M(),_n(1))}),Q_(()=>this.afterPreactivation()),(0,rt.U)(f=>{const _=function AC(n,e,t){const r=fd(n,e._root,t?t._root:void 0);return new R_(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:_}}),(0,Be.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(r=>(new XA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Be.b)({next(){a=!0},complete(){a=!0}}),cs(()=>{a||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ut(f=>{if(u=!0,I0(f)){yg(f)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new mg(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(_),yg(f)){const b=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||J_(i.source)};this.scheduleNavigation(b,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new g0(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return Bi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(bg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:f,preserveFragment:_}=r,b=i||this.routerState.root,T=_?this.currentUrlTree.fragment:u;let A=null;switch(f){case"merge":A={...this.currentUrlTree.queryParams,...a};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),Xh(b,this.currentUrlTree,t,A,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ot(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$0}:!1===r?{...z0}:r,ot(t))return D_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return D_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Sl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){if(this.disposed)return Promise.resolve(!1);let f,_,b;u?(f=u.resolve,_=u.reject,b=u.promise):b=new Promise((F,$)=>{f=F,_=$});const T=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:T,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new mg(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:function(){return iD()},providedIn:"root"}),n})();function J_(n){return"imperative"!==n}class Ef{}let ty=(()=>{class n{constructor(t,r,i,a,u){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(C(t=>t instanceof Sl),xe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const u=a._injector??t,f=a._loadedInjector??u;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(u,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,gn.D)(i).pipe((0,zo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const a=i.pipe((0,D.z)(u=>null===u?st(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,gn.D)([a,u]).pipe((0,zo.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wn),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Ef),d.LFG(bf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Og=new d.OlP("");let Fg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof sf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Sl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof x_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new x_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function wd(n,e){return{\u0275kind:n,\u0275providers:e}}function ry(n){return[{provide:kg,multi:!0,useValue:n}]}function Lg(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Wn),i=n.get(iy);1===n.get(W0)&&r.initialNavigation(),n.get(Z0,null,d.XFs.Optional)?.setUpPreloading(),n.get(Og,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const iy=new d.OlP("",{factory:()=>new Nn.x}),W0=new d.OlP("",{providedIn:"root",factory:()=>1});const Z0=new d.OlP("");function cD(n){return wd(0,[{provide:Z0,useExisting:ty},{provide:Ef,useExisting:n}])}const Y0=new d.OlP("ROUTER_FORROOT_GUARD"),dD=[Fe,{provide:Zh,useClass:Cl},{provide:Wn,useFactory:iD},df,{provide:Za,useFactory:function ny(n){return n.routerState.root},deps:[Wn]},bf];function hD(){return new d.PXZ("Router",Wn)}let sy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dD,[],ry(t),{provide:Y0,useFactory:gD,deps:[[Wn,new d.FiY,new d.tp0]]},{provide:vf,useValue:r||{}},r?.useHash?{provide:we,useClass:et}:{provide:we,useClass:Xe},{provide:Og,useFactory:()=>{const n=(0,d.f3M)(Wn),e=(0,d.f3M)(Vu),t=(0,d.f3M)(vf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Fg(n,e,t)}},r?.preloadingStrategy?cD(r.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:hD},r?.initialNavigation?Gt(r):[],[{provide:oy,useFactory:Lg},{provide:d.tb,multi:!0,useExisting:oy}]]}}static forChild(t){return{ngModule:n,providers:[ry(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Y0,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[O_]}),n})();function gD(n){return"guarded"}function Gt(n){return["disabled"===n.initialNavigation?wd(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Wn);return()=>{e.setUpLocationChangeListener()}}},{provide:W0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wd(2,[{provide:W0,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(a=>{const u=e.get(Wn),f=e.get(iy);(function i(a){e.get(Wn).events.pipe(C(f=>f instanceof Sl||f instanceof mg||f instanceof g0),(0,rt.U)(f=>f instanceof Sl||f instanceof mg&&(0===f.code||1===f.code)&&null),C(f=>null!==f),_n(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),u.afterPreactivation=()=>(a(!0),r||f.closed?st(void 0):f),u.initialNavigation()}))}}]).\u0275providers:[]]}const oy=new d.OlP(""),_D=[];let yD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sy.forRoot(_D),sy]}),n})(),X0=(()=>{class n{constructor(){this.title="amongus_real"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"router-outlet"),d.qZA())},dependencies:[D0],styles:['container[_ngcontent-%COMP%]{background-image:rl("../assets/images/amongus_bg.jpg")}']}),n})();const ew_firebaseConfig={apiKey:"AIzaSyDyheibEWb-trxrovv7lViOAP5-pd9WiOQ",authDomain:"amongusreal-b3a3f.firebaseapp.com",projectId:"amongusreal-b3a3f",storageBucket:"amongusreal-b3a3f.appspot.com",messagingSenderId:"377367621953",appId:"1:377367621953:web:da0f8f35341b6f5e2e31c0"};var Cs=P(2011),Ug=P(4986),Jr=P(5813);function tw(){return(0,sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Vg(n,e=$o.y){return n=n??nw,(0,sr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Pn.x)(r,u=>{const f=e(u);(a||!n(i,f))&&(a=!1,i=f,r.next(u))}))})}function nw(n,e){return n===e}P(5881);var lt,vD=P(3942),Ee=P(5861),so=P(9681),jg=P(4859),Hc=P(1877),en=P(2090),cx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ja={},rw=rw||{},$t=cx||self;function Xa(){}function ay(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Id(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ly="closure_uid_"+(1e9*Math.random()>>>0),iw=0;function bD(n,e,t){return n.call.apply(n.bind,arguments)}function wD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xr(n,e,t){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bD:wD).apply(null,arguments)}function $g(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function el(){this.s=this.s,this.o=this.o}var sw={};el.prototype.s=!1,el.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Hg(n){return Object.prototype.hasOwnProperty.call(n,ly)&&n[ly]||(n[ly]=++iw)}(this);delete sw[n]}},el.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},zg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Gg(n){return Array.prototype.concat.apply([],arguments)}function uy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dy(n){return/^[\s\xa0]*$/.test(n)}var Lr,$c=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function gi(n,e){return-1!=n.indexOf(e)}function Wg(n,e){return n<e?-1:n>e?1:0}e:{var Ds=$t.navigator;if(Ds){var hy=Ds.userAgent;if(hy){Lr=hy;break e}}Lr=""}function fy(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qg(n){const e={};for(const t in n)e[t]=n[t];return e}var Yo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Kg(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Yo.length;a++)t=Yo[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Zg(n){return Zg[" "](n),n}Zg[" "]=Xa;var Dd,n,dx=gi(Lr,"Opera"),zc=gi(Lr,"Trident")||gi(Lr,"MSIE"),ID=gi(Lr,"Edge"),Cd=ID||zc,If=gi(Lr,"Gecko")&&!(gi(Lr.toLowerCase(),"webkit")&&!gi(Lr,"Edge"))&&!(gi(Lr,"Trident")||gi(Lr,"MSIE"))&&!gi(Lr,"Edge"),gy=gi(Lr.toLowerCase(),"webkit")&&!gi(Lr,"Edge");function Yg(){var n=$t.document;return n?n.documentMode:void 0}e:{var ow="",my=(n=Lr,If?/rv:([^\);]+)(\)|;)/.exec(n):ID?/Edge\/([\d\.]+)/.exec(n):zc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):gy?/WebKit\/(\S+)/.exec(n):dx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(my&&(ow=my?my[1]:""),zc){var _y=Yg();if(null!=_y&&_y>parseFloat(ow)){Dd=String(_y);break e}}Dd=ow}var CD={};var SD=$t.document&&zc&&(Yg()||parseInt(Dd,10))||void 0,hx=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{$t.addEventListener("test",Xa,e),$t.removeEventListener("test",Xa,e)}catch{}return n}();function ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Td(n,e){if(ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(If){e:{try{Zg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:AD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Td.Z.h.call(this)}}ti.prototype.h=function(){this.defaultPrevented=!0},ei(Td,ti);var AD={2:"touch",3:"pen",4:"mouse"};Td.prototype.h=function(){Td.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gc="closure_listenable_"+(1e6*Math.random()|0),fx=0;function px(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++fx,this.ca=this.fa=!1}function yy(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function vy(n){this.src=n,this.g={},this.h=0}function aw(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=cy(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(yy(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function lw(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}vy.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=lw(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new px(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var cw="closure_lm_"+(1e6*Math.random()|0),uw={};function xD(n,e,t,r,i){if(r&&r.once)return Jg(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)xD(n,e[a],t,r,i);return null}return t=Qo(t),n&&n[Gc]?n.N(e,t,Id(r)?!!r.capture:!!r,i):MD(n,e,t,!1,r,i)}function MD(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=Id(i)?!!i.capture:!!i,f=Cf(n);if(f||(n[cw]=f=new vy(n)),(t=f.add(e,t,r,u,a)).proxy)return t;if(r=function Ml(){var e=hw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hx||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(em(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Jg(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Jg(n,e[a],t,r,i);return null}return t=Qo(t),n&&n[Gc]?n.O(e,t,Id(r)?!!r.capture:!!r,i):MD(n,e,t,!0,r,i)}function dw(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)dw(n,e[a],t,r,i);else r=Id(r)?!!r.capture:!!r,t=Qo(t),n&&n[Gc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=lw(a=n.g[e],t,r,i))&&(yy(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Cf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=lw(e,t,r,i)),(t=-1<n?e[n]:null)&&Xg(t))}function Xg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Gc])aw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(em(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Cf(e))?(aw(t,n),0==t.h&&(t.src=null,e[cw]=null)):yy(n)}}}function em(n){return n in uw?uw[n]:uw[n]="on"+n}function hw(n,e){if(n.ca)n=!0;else{e=new Td(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xg(n),n=t.call(r,e)}return n}function Cf(n){return(n=n[cw])instanceof vy?n:null}var by="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qo(n){return"function"==typeof n?n:(n[by]||(n[by]=function(e){return n.handleEvent(e)}),n[by])}function kr(){el.call(this),this.i=new vy(this),this.P=this,this.I=null}function ni(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ti(e,n);else if(e instanceof ti)e.target=e.target||n;else{var i=e;Kg(e=new ti(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=tm(u,r,!0,e)&&i}if(i=tm(u=e.g=n,r,!0,e)&&i,i=tm(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=tm(u=e.g=t[a],r,!1,e)&&i}function tm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var f=u.listener,_=u.ia||u.src;u.fa&&aw(n.i,u),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}ei(kr,el),kr.prototype[Gc]=!0,kr.prototype.removeEventListener=function(n,e,t,r){dw(this,n,e,t,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)yy(t[r]);delete n.g[e],n.h--}}this.I=null},kr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var nm=$t.JSON.stringify;function RD(){var n=Iy;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ad,Df=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Sd,n=>n.reset());class Sd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wy(n){$t.setTimeout(()=>{throw n},0)}function Rl(n,e){Ad||function Tf(){var n=$t.Promise.resolve(void 0);Ad=function(){n.then(fw)}}(),Ey||(Ad(),Ey=!0),Iy.add(n,e)}var Ey=!1,Iy=new class kD{constructor(){this.h=this.g=null}add(e,t){const r=Df.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function fw(){for(var n;n=RD();){try{n.h.call(n.g)}catch(t){wy(t)}var e=Df;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ey=!1}function xd(n,e){kr.call(this),this.h=n||1,this.g=e||$t,this.j=Xr(this.kb,this),this.l=Date.now()}function Sf(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function rm(n,e,t){if("function"==typeof n)t&&(n=Xr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xr(n.handleEvent,n)}return 2147483647<Number(e)?-1:$t.setTimeout(n,e||0)}function im(n){n.g=rm(()=>{n.g=null,n.i&&(n.i=!1,im(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(xd,kr),(lt=xd.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ni(this,"tick"),this.da&&(Sf(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){xd.Z.M.call(this),Sf(this),delete this.g};class ND extends el{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:im(this)}M(){super.M(),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sm(n){el.call(this),this.h=n,this.g={}}ei(sm,el);var pw=[];function Cy(n,e,t,r){Array.isArray(t)||(t&&(pw[0]=t.toString()),t=pw);for(var i=0;i<t.length;i++){var a=xD(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function gw(n){fy(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xg(e)},n),n.g={}}function Af(){this.g=!0}function Br(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function OD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return nm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}sm.prototype.M=function(){sm.Z.M.call(this),gw(this)},sm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Af.prototype.Aa=function(){this.g=!1},Af.prototype.info=function(){};var Md={},yw=null;function Rd(){return yw=yw||new kr}function Dy(n){ti.call(this,Md.Ma,n)}function xf(n){const e=Rd();ni(e,new Dy(e,n))}function vw(n,e){ti.call(this,Md.STAT_EVENT,n),this.stat=e}function Di(n){const e=Rd();ni(e,new vw(e,n))}function Ty(n,e){ti.call(this,Md.Na,n),this.size=e}function Mf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return $t.setTimeout(function(){n()},e)}Md.Ma="serverreachability",ei(Dy,ti),Md.STAT_EVENT="statevent",ei(vw,ti),Md.Na="timingevent",ei(Ty,ti);var Rf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},bw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sy(){}function xy(){}Sy.prototype.h=null;var My,kf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ts(){ti.call(this,"d")}function Nf(){ti.call(this,"c")}function om(){}function am(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new sm(this),this.P=FD,this.W=new xd(n=Cd?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ry}function Ry(){this.i=null,this.g="",this.h=!1}ei(Ts,ti),ei(Nf,ti),ei(om,Sy),om.prototype.g=function(){return new XMLHttpRequest},om.prototype.i=function(){return{}},My=new om;var FD=45e3,ky={},lm={};function Pf(n,e,t){n.K=1,n.v=gm(Ss(e)),n.s=t,n.U=!0,ww(n,null)}function ww(n,e){n.F=Date.now(),Ff(n),n.A=Ss(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Tw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ry,n.g=Zy(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ND(Xr(n.Ia,n,n.g),n.O)),Cy(n.V,n.g,"readystatechange",n.gb),e=n.H?qg(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xf(1),function mw(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",f=a.split("&"),_=0;_<f.length;_++){var b=f[_].split("=");if(1<b.length){var T=b[0];b=b[1];var A=T.split("_");u=2<=A.length&&"type"==A[1]?u+(T+"=")+b+"&":u+(T+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Of(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ny(n,t),i==lm){4==e&&(n.o=4,Di(14),r=!1),Br(n.j,n.m,null,"[Incomplete Response]");break}if(i==ky){n.o=4,Di(15),Br(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Br(n.j,n.m,i,null),Bf(n,i)}Ew(n)&&i!=lm&&i!=ky&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Cm(e),e.L=!0,Di(11))):(Br(n.j,n.m,t,"[Invalid Chunked Response]"),kd(n),um(n))}function Ny(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?lm:(t=Number(e.substring(t,r)),isNaN(t)?ky:(r+=1)+t>e.length?lm:(e=e.substr(r,t),n.C=r+t,e))}function Ff(n){n.Y=Date.now()+n.P,cm(n,n.P)}function cm(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Mf(Xr(n.eb,n),e)}function Lf(n){n.B&&($t.clearTimeout(n.B),n.B=null)}function um(n){0==n.l.G||n.I||Wy(n.l,n)}function kd(n){Lf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sf(n.W),gw(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Kc(t.i,n)))if(t.I=n.N,!n.J&&Kc(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ud(t),Gf(t)}Kf(t),Di(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Mf(Xr(t.ab,t),6e3));if(1>=$D(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else nl(t,11)}else if((n.J||t.g==n)&&Ud(t),!dy(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const T=b[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const A=b[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const Z=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var a=r.i;!a.g&&(gi(Z,"spdy")||gi(Z,"quic")||gi(Z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Oy(a,a.h),a.h=null))}if(r.D){const le=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(r.sa=le,Qn(r.F,r.D,le))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=kw(r,r.H?r.la:null,r.W),u.J){Aw(r.i,u);var f=u,_=r.K;_&&f.setTimeout(_),f.B&&(Lf(f),Ff(f)),r.g=u}else Im(r);0<t.l.length&&wm(t)}else"stop"!=b[0]&&"close"!=b[0]||nl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?nl(t,7):zy(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}xf(4)}catch{}}function dm(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ay(n)||"string"==typeof n)zg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(ay(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function gx(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ay(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Wc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function hm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];kl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)kl(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function kl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=am.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==ra(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const T=ra(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||Cd||this.g&&(this.h.h||this.g.ga()||jy(this.g)))){this.I||4!=T||7==e||xf(8==e||0>=A?3:2),Lf(this);var t=this.g.ba();this.N=t;t:if(Ew(this)){var r=jy(this.g);n="";var i=r.length,a=4==ra(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kd(this),um(this);var u="";break t}this.h.i=new $t.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function PD(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dy(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Di(12),kd(this),um(this);break e}Br(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bf(this,t)}this.U?(Of(this,T,u),Cd&&this.i&&3==T&&(Cy(this.V,this.W,"tick",this.fb),this.W.start())):(Br(this.j,this.m,u,null),Bf(this,u)),4==T&&kd(this),this.i&&!this.I&&(4==T?Wy(this.l,this):(this.i=!1,Ff(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Di(12)):(this.o=0,Di(13)),kd(this),um(this)}}}catch{}},lt.fb=function(){if(this.g){var n=ra(this.g),e=this.g.ga();this.C<e.length&&(Lf(this),Of(this,n,e),this.i&&4!=n&&Ff(this))}},lt.cancel=function(){this.I=!0,kd(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function _w(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xf(3),Di(17)),kd(this),this.o=2,um(this)):cm(this,this.Y-n)},(lt=Wc.prototype).R=function(){hm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return hm(this),this.g.concat()},lt.get=function(n,e){return kl(this.h,n)?this.h[n]:e},lt.set=function(n,e){kl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var fm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Jo){this.g=void 0!==e?e:n.g,Nl(this,n.j),this.s=n.s,pm(this,n.i),Nd(this,n.m),this.l=n.l,e=n.h;var t=new qc;t.i=e.i,e.g&&(t.g=new Wc(e.g),t.h=e.h),Py(this,t),this.o=n.o}else n&&(t=String(n).match(fm))?(this.g=!!e,Nl(this,t[1]||"",!0),this.s=mm(t[2]||""),pm(this,t[3]||"",!0),Nd(this,t[4]),this.l=mm(t[5]||"",!0),Py(this,t[6]||"",!0),this.o=mm(t[7]||"")):(this.g=!!e,this.h=new qc(null,this.g))}function Ss(n){return new Jo(n)}function Nl(n,e,t){n.j=t?mm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function pm(n,e,t){n.i=t?mm(e,!0):e}function Nd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Py(n,e,t){e instanceof qc?(n.h=e,function jD(n,e){e&&!n.j&&(Pl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(_m(this,r),Tw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Vf(e,VD)),n.h=new qc(e,n.g))}function Qn(n,e,t){n.h.set(e,t)}function gm(n){return Qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,mx),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function mx(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Vf(e,Iw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Vf(e,Iw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Vf(t,"/"==t.charAt(0)?UD:BD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Vf(t,Cw)),n.join("")};var Iw=/[#\/\?@]/g,BD=/[#\?:]/g,UD=/[#\?]/g,VD=/[#\?@]/g,Cw=/#/g;function qc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Pl(n){n.g||(n.g=new Wc,n.h=0,n.i&&function tl(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function _m(n,e){Pl(n),e=Pd(n,e),kl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,kl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&hm(n)))}function Dw(n,e){return Pl(n),e=Pd(n,e),kl(n.g.h,e)}function Tw(n,e,t){_m(n,e),0<t.length&&(n.i=null,n.g.set(Pd(n,e),uy(t)),n.h+=t.length)}function Pd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Sw(n){this.l=n||ym,n=$t.PerformanceNavigationTiming?0<(n=$t.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=qc.prototype).add=function(n,e){Pl(this),this.i=null,n=Pd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){Pl(this),this.g.forEach(function(t,r){zg(t,function(i){n.call(e,i,r,this)},this)},this)},lt.T=function(){Pl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},lt.R=function(n){Pl(this);var e=[];if("string"==typeof n)Dw(this,n)&&(e=Gg(e,this.g.get(Pd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Gg(e,n[t])}return e},lt.set=function(n,e){return Pl(this),this.i=null,Dw(this,n=Pd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var ym=10;function Ol(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $D(n){return n.h?1:n.g?n.g.size:0}function Kc(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Oy(n,e){n.g?n.g.add(e):n.h=e}function Aw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vm(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return uy(n.i)}function Fy(){}function Xo(){this.g=new Fy}function jf(n,e,t){const r=t||"";try{dm(n,function(i,a){let u=i;Id(i)&&(u=nm(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ea(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Fl(n){this.l=n.$b||null,this.j=n.ib||!1}function Ti(n,e){kr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Sw.prototype.cancel=function(){if(this.i=vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Fy.prototype.stringify=function(n){return $t.JSON.stringify(n,void 0)},Fy.prototype.parse=function(n){return $t.JSON.parse(n,void 0)},ei(Fl,Sy),Fl.prototype.g=function(){return new Ti(this.l,this.j)},Fl.prototype.i=function(n){return function(){return n}}({}),ei(Ti,kr);var Hf=0;function Zc(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ta(n){n.readyState=4,n.l=null,n.j=null,n.A=null,na(n)}function na(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=Ti.prototype).open=function(n,e){if(this.readyState!=Hf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,na(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||$t).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ta(this)),this.readyState=Hf},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof $t.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zc(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ta(this):na(this),3==this.readyState&&Zc(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,ta(this))},lt.Ta=function(n){this.g&&(this.response=n,ta(this))},lt.ha=function(){this.g&&ta(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Od=$t.JSON.parse;function qn(n){kr.call(this),this.headers=new Wc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yc,this.K=this.L=!1}ei(qn,kr);var Yc="",Fd=/^https?$/i,Ld=["POST","PUT"];function xw(n){return"content-type"==n.toLowerCase()}function Ly(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,By(n),$f(n)}function By(n){n.D||(n.D=!0,ni(n,"complete"),ni(n,"error"))}function Uy(n){if(n.h&&typeof rw<"u"&&(!n.C[1]||4!=ra(n)||2!=n.ba()))if(n.v&&4==ra(n))rm(n.Fa,0,n);else if(ni(n,"readystatechange"),4==ra(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(fm)[1]||null;if(!i&&$t.self&&$t.self.location){var a=$t.self.location.protocol;i=a.substr(0,a.length-1)}r=!Fd.test(i?i.toLowerCase():"")}t=r}if(t)ni(n,"complete"),ni(n,"success");else{n.m=6;try{var u=2<ra(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.ba()+"]",By(n)}}finally{$f(n)}}}function $f(n,e){if(n.g){Vy(n);const t=n.g,r=n.C[0]?Xa:null;n.g=null,n.C=null,e||ni(n,"ready");try{t.onreadystatechange=r}catch{}}}function Vy(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&($t.clearTimeout(n.A),n.A=null)}function ra(n){return n.g?n.g.readyState:0}function jy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yc:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Hy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Mw(n){let e="";return fy(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Qn(n,e,t))}function zf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $y(n){this.za=0,this.l=[],this.h=new Af,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=zf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=zf("baseRetryDelayMs",5e3,n),this.$a=zf("retryDelaySeedMs",1e4,n),this.Ya=zf("forwardChannelMaxRetries",2,n),this.ra=zf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Sw(n&&n.concurrentRequestLimit),this.Ca=new Xo,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function zy(n){if(bm(n),3==n.G){var e=n.V++,t=Ss(n.F);Qn(t,"SID",n.J),Qn(t,"RID",e),Qn(t,"TYPE","terminate"),Qc(n,t),(e=new am(n,n.h,e,void 0)).K=2,e.v=gm(Ss(t)),t=!1,$t.navigator&&$t.navigator.sendBeacon&&(t=$t.navigator.sendBeacon(e.v.toString(),"")),!t&&$t.Image&&((new Image).src=e.v,t=!0),t||(e.g=Zy(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ff(e)}Ky(n)}function Gf(n){n.g&&(Cm(n),n.g.cancel(),n.g=null)}function bm(n){Gf(n),n.u&&($t.clearTimeout(n.u),n.u=null),Ud(n),n.i.cancel(),n.m&&("number"==typeof n.m&&$t.clearTimeout(n.m),n.m=null)}function Wf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&wm(n)}function wm(n){Ol(n.i)||n.m||(n.m=!0,Rl(n.Ha,n),n.C=0)}function qf(n,e){var t;t=e?e.m:n.V++;const r=Ss(n.F);Qn(r,"SID",n.J),Qn(r,"RID",t),Qn(r,"AID",n.U),Qc(n,r),n.o&&n.s&&Hy(r,n.o,n.s),t=new am(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Rw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Oy(n.i,t),Pf(t,r,e)}function Qc(n,e){n.j&&dm({},function(t,r){Qn(e,r,t)})}function Rw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Xr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let b=i[_].h;const T=i[_].g;if(b-=a,0>b)a=Math.max(0,i[_].h-100),f=!1;else try{jf(T,u,"req"+b+"_")}catch{r&&r(T)}}if(f){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Im(n){n.g||n.u||(n.Y=1,Rl(n.Ga,n),n.A=0)}function Kf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Mf(Xr(n.Ga,n),qy(n,n.A)),n.A++,0))}function Cm(n){null!=n.B&&($t.clearTimeout(n.B),n.B=null)}function Gy(n){n.g=new am(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ss(n.oa);Qn(e,"RID","rpc"),Qn(e,"SID",n.J),Qn(e,"CI",n.N?"0":"1"),Qn(e,"AID",n.U),Qc(n,e),Qn(e,"TYPE","xmlhttp"),n.o&&n.s&&Hy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=gm(Ss(e)),t.s=null,t.U=!0,ww(t,n)}function Ud(n){null!=n.v&&($t.clearTimeout(n.v),n.v=null)}function Wy(n,e){var t=null;if(n.g==e){Ud(n),Cm(n),n.g=null;var r=2}else{if(!Kc(n.i,e))return;t=e.D,Aw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ni(r=Rd(),new Ty(r,t,e,i)),wm(n)}else Im(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Em(n,e){return!($D(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Mf(Xr(n.Ha,n,e),qy(n,n.C)),n.C++,0)))}(n,e)||2==r&&Kf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:nl(n,5);break;case 4:nl(n,10);break;case 3:nl(n,6);break;default:nl(n,2)}}function qy(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function nl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Xr(n.jb,n);t||(t=new Jo("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||Nl(t,"https"),gm(t)),function mi(n,e){const t=new Af;if($t.Image){const r=new Image;r.onload=$g(ea,t,r,"TestLoadImage: loaded",!0,e),r.onerror=$g(ea,t,r,"TestLoadImage: error",!1,e),r.onabort=$g(ea,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=$g(ea,t,r,"TestLoadImage: timeout",!1,e),$t.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Di(2);n.G=0,n.j&&n.j.va(e),Ky(n),bm(n)}function Ky(n){n.G=0,n.I=-1,n.j&&((0!=vm(n.i).length||0!=n.l.length)&&(n.i.i.length=0,uy(n.l),n.l.length=0),n.j.ua())}function kw(n,e,t){let r=function Uf(n){return n instanceof Jo?Ss(n):new Jo(n,void 0)}(t);if(""!=r.i)e&&pm(r,e+"."+r.i),Nd(r,r.m);else{const i=$t.location;r=function LD(n,e,t,r){var i=new Jo(null,void 0);return n&&Nl(i,n),e&&pm(i,e),t&&Nd(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&fy(n.aa,function(i,a){Qn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Qn(r,e,t),Qn(r,"VER",n.ma),Qc(n,r),r}function Zy(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Ba&&!n.qa?new Fl({ib:!0}):n.qa)).L=n.H,e}function Yy(){}function Zf(){if(zc&&!(10<=Number(SD)))throw Error("Environmental error: no available transport.")}function Hi(n,e){kr.call(this),this.g=new $y(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!dy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Jc(this)}function Nw(n){Ts.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Qy(){Nf.call(this),this.status=1}function Jc(n){this.g=n}(lt=qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():My.g(),this.C=function Ay(n){return n.h||(n.h=n.i())}(this.u?this.u:My),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Ly(this,a)}n=t||"";const i=new Wc(this.headers);r&&dm(r,function(a,u){i.set(u,a)}),r=function ux(n){e:{var e=xw;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=$t.FormData&&n instanceof $t.FormData,!(0<=cy(Ld,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Vy(this),0<this.B&&((this.K=function Bd(n){return zc&&function DD(){return function py(n){var e=CD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=$c(String(Dd)).split("."),t=$c("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Wg(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Wg(0==i[2].length,0==a[2].length)||Wg(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=rm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Ly(this,a)}},lt.pa=function(){typeof rw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ni(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ni(this,"complete"),ni(this,"abort"),$f(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$f(this,!0)),qn.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?Uy(this):this.cb())},lt.cb=function(){Uy(this)},lt.ba=function(){try{return 2<ra(this)?this.g.status:-1}catch{return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Od(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=$y.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new am(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=qg(a),Kg(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Rw(this,i,e),Qn(t=Ss(this.F),"RID",n),Qn(t,"CVER",22),this.D&&Qn(t,"X-HTTP-Session-Id",this.D),Qc(this,t),this.o&&a&&Hy(t,this.o,a),Oy(this.i,i),this.Ra&&Qn(t,"TYPE","init"),this.ja?(Qn(t,"$req",e),Qn(t,"SID","null"),i.$=!0,Pf(i,t,null)):Pf(i,t,e),this.G=2}}else 3==this.G&&(n?qf(this,n):0==this.l.length||Ol(this.i)||qf(this))},lt.Ga=function(){if(this.u=null,Gy(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Mf(Xr(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Di(10),Gf(this),Gy(this))},lt.ab=function(){null!=this.v&&(this.v=null,Gf(this),Kf(this),Di(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Di(2)):(this.h.info("Failed to ping google.com"),Di(1))},(lt=Yy.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},Zf.prototype.g=function(n,e){return new Hi(n,e)},ei(Hi,kr),Hi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rl(Xr(n.hb,n,e))),Di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=kw(n,null,n.W),wm(n)},Hi.prototype.close=function(){zy(this.g)},Hi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Wf(this.g,e)}else this.v?((e={}).__data__=nm(n),Wf(this.g,e)):Wf(this.g,n)},Hi.prototype.M=function(){this.g.j=null,delete this.j,zy(this.g),delete this.g,Hi.Z.M.call(this)},ei(Nw,Ts),ei(Qy,Nf),ei(Jc,Yy),Jc.prototype.xa=function(){ni(this.g,"a")},Jc.prototype.wa=function(n){ni(this.g,new Nw(n))},Jc.prototype.va=function(n){ni(this.g,new Qy(n))},Jc.prototype.ua=function(){ni(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,Rf.NO_ERROR=0,Rf.TIMEOUT=8,Rf.HTTP_ERROR=6,bw.COMPLETE="complete",xy.EventType=kf,kf.OPEN="a",kf.CLOSE="b",kf.ERROR="c",kf.MESSAGE="d",kr.prototype.listen=kr.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.La,qn.prototype.getLastErrorCode=qn.prototype.Da,qn.prototype.getStatus=qn.prototype.ba,qn.prototype.getResponseJson=qn.prototype.Qa,qn.prototype.getResponseText=qn.prototype.ga,qn.prototype.send=qn.prototype.ea;var Pw=Ja.createWebChannelTransport=function(){return new Zf},Jy=Ja.getStatEventTarget=function(){return Rd()},Dm=Ja.ErrorCode=Rf,Ow=Ja.EventType=bw,Fw=Ja.Event=Md,Xy=Ja.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Lw=Ja.FetchXmlHttpFactory=Fl,Yf=Ja.WebChannel=xy,Bw=Ja.XhrIo=qn;const ev="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Vd="9.9.4";const Ll=new Hc.Yd("@firebase/firestore");function Tm(){return Ll.logLevel}function Re(n,...e){if(Ll.logLevel<=Hc.in.DEBUG){const t=e.map(tv);Ll.debug(`Firestore (${Vd}): ${n}`,...t)}}function dr(n,...e){if(Ll.logLevel<=Hc.in.ERROR){const t=e.map(tv);Ll.error(`Firestore (${Vd}): ${n}`,...t)}}function Xc(n,...e){if(Ll.logLevel<=Hc.in.WARN){const t=e.map(tv);Ll.warn(`Firestore (${Vd}): ${n}`,...t)}}function tv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Vd}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function Lt(n,e){n||dt()}function Je(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ri.UNAUTHENTICATED))}shutdown(){}}class Vw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _x{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let u=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ur,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const b=u;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},_=b=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ur)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new nv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new ri(e)}}class jw{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ri.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Lt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rv{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new jw(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WD{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.A;return this.A=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),this.A=t.token,new oo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ia(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class As{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ia(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function eu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function iv(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new Jn(0,0))}static max(){return new Rt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qf{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Qf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Qf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends Qf{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const sv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Qf{construct(e,t,r){return new Fn(e,t,r)}static isValidIdentifier(e){return sv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ue(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ue(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ue(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(a(),i++)}if(a(),u)throw new Ue(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(cn.fromString(e))}static fromName(e){return new Ye(cn.fromString(e).popFirst(5))}static empty(){return new Ye(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new cn(e.slice()))}}class Jf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function ov(n){return n.fields.find(e=>2===e.kind)}function Bl(n){return n.fields.filter(e=>2!==e.kind)}Jf.UNKNOWN_ID=-1;class tu{constructor(e,t){this.fieldPath=e,this.kind=t}}class jd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jd(0,_i.min())}}function av(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new _i(i,Ye.empty(),e)}function Sm(n){return new _i(n.readTime,n.key,-1)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Rt.min(),Ye.empty(),-1)}static max(){return new _i(Rt.max(),Ye.empty(),-1)}}function Am(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const lv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rl(n){return xm.apply(this,arguments)}function xm(){return xm=(0,Ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==lv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),xm.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++a,u&&a===i&&t()},_=>r(_))}),u=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,u=new Array(a);let f=0;for(let _=0;_<a;_++){const b=_;t(e[b]).next(T=>{u[b]=T,++f,f===a&&r(u)},T=>i(T))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Xf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ur,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ep(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=uv(r.target.error);this.P.reject(new ep(e,i))}}static open(e,t,r,i){try{return new Xf(t,e.transaction(i,r))}catch(a){throw new ep(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ZD(t)}}class xs{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===xs.D((0,en.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),nu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,en.hl)())return!1;if(xs.N())return!0;const e=(0,en.z$)(),t=xs.D(e),r=0<t&&t<10,i=xs.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new ep(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Ue(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ue(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new ep(e,f))},a.onupgradeneeded=u=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const _=Xf.open(a.db,e,u?"readonly":"readwrite",r),b=i(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),de.reject(T))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,T="FirebaseError"!==b.name&&f<3;if(Re("SimpleDb","Transaction failed with error:",b.message,"Retrying:",T),a.close(),!T)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class KD{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return nu(this.U.delete())}}class ep extends Ue{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ul(n){return"IndexedDbTransactionError"===n.name}class ZD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),nu(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),nu(this.store.add(e))}get(e){return nu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),nu(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),nu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(u,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,u,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const u=uv(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}H(e,t){const r=[];return new de((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const _=new KD(f),b=t(f.primaryKey,f.value,_);if(b instanceof de){const T=b.catch(A=>(_.done(),de.reject(A)));r.push(T)}_.isDone?i():null===_.G?f.continue():f.continue(_.G)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function nu(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=uv(r.target.error);t(i)}})}let $w=!1;function uv(n){const e=xs.D((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $w||($w=!0,setTimeout(()=>{throw r},0)),r}}return n}class YD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ul(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield rl(r)}yield t.nt(1)}))}}class QD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Re("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(f=>{i-=f,r.add(u)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,a)).next(f=>(Re("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=Sm(a);Am(u,r)>0&&(r=u)}),new _i(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class $i{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function zw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Gw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}$i.at=-1;class hr{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mm(this.root,e,this.comparator,!0)}}class Mm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??ii.RED,this.left=i??ii.EMPTY,this.right=a??ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ii(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ww(this.data.getIterator())}getIteratorFrom(e){return new Ww(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class Ww{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function iu(n){return n.hasNext()?n.getNext():void 0}class zi{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new zi([])}unionWith(e){let t=new Dn(Fn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Tr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tr.EMPTY_BYTE_STRING=new Tr("");const Kw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function il(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=Kw.exec(n);if(Lt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Vl(n){return"string"==typeof n?Tr.fromBase64String(n):Tr.fromUint8Array(n)}function Rm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dv(n){const e=n.mapValue.fields.__previous_value__;return Rm(e)?dv(e):e}function Hd(n){const e=il(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class su{constructor(e,t,r,i,a,u,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class jl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}function tp(n){return null==n}function sa(n){return 0===n&&1/n==-1/0}function JD(n){return"number"==typeof n&&Number.isInteger(n)&&!sa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const oa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hv={nullValue:"NULL_VALUE"};function Hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rm(n)?4:mv(n)?9007199254740991:10:dt()}function ao(n,e){if(n===e)return!0;const t=Hl(n);if(t!==Hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hd(n).isEqual(Hd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=il(r.timestampValue),u=il(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Vl(n.bytesValue).isEqual(Vl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ar(r.geoPointValue.latitude)===ar(i.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ar(r.integerValue)===ar(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ar(r.doubleValue),u=ar(i.doubleValue);return a===u?sa(a)===sa(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return eu(n.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(zw(a)!==zw(u))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===u[f]||!ao(a[f],u[f])))return!1;return!0}(n,e);default:return dt()}var i}function km(n,e){return void 0!==(n.values||[]).find(t=>ao(t,e))}function wt(n,e){if(n===e)return 0;const t=Hl(n),r=Hl(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=ar(i.integerValue||i.doubleValue),f=ar(a.integerValue||a.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return Zw(n.timestampValue,e.timestampValue);case 4:return Zw(Hd(n),Hd(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Vl(i),f=Vl(a);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),f=a.split("/");for(let _=0;_<u.length&&_<f.length;_++){const b=Tt(u[_],f[_]);if(0!==b)return b}return Tt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Tt(ar(i.latitude),ar(a.latitude));return 0!==u?u:Tt(ar(i.longitude),ar(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],f=a.values||[];for(let _=0;_<u.length&&_<f.length;++_){const b=wt(u[_],f[_]);if(b)return b}return Tt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===oa.mapValue&&a===oa.mapValue)return 0;if(i===oa.mapValue)return 1;if(a===oa.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),_=a.fields||{},b=Object.keys(_);f.sort(),b.sort();for(let T=0;T<f.length&&T<b.length;++T){const A=Tt(f[T],b[T]);if(0!==A)return A;const F=wt(u[f[T]],_[b[T]]);if(0!==F)return F}return Tt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw dt()}}function Zw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=il(n),r=il(e),i=Tt(t.seconds,r.seconds);return 0!==i?i:Tt(t.nanos,r.nanos)}function $d(n){return fv(n)}function fv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=il(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Vl(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=fv(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const f of i)u?u=!1:a+=",",a+=`${f}:${fv(r.fields[f])}`;return a+"}"}(n.mapValue):dt();var e}function Ms(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pv(n){return!!n&&"integerValue"in n}function $l(n){return!!n&&"arrayValue"in n}function np(n){return!!n&&"nullValue"in n}function lr(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gv(n){return!!n&&"mapValue"in n}function zd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function XD(n){return"nullValue"in n?hv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ms(jl.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function Yw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ms(jl.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?oa:dt()}function _v(n,e){const t=wt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yv(n,e){const t=wt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zd(t)}setAll(e){let t=Fn.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=zd(u):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());gv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ru(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Vr(zd(this.value))}}function Qw(n){const e=[];return ru(n.fields,(t,r)=>{const i=new Fn([t]);if(gv(r)){const a=Qw(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new zi(e)}class Ln{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ln(e,0,Rt.min(),Rt.min(),Vr.empty(),0)}static newFoundDocument(e,t,r){return new Ln(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new Ln(e,2,t,Rt.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new Ln(e,3,t,Rt.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eT{constructor(e,t=null,r=[],i=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=f,this.ht=null}}function Gd(n,e=null,t=[],r=[],i=null,a=null,u=null){return new eT(n,e,t,r,i,a,u)}function ou(n){const e=Je(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+$d(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),tp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),e.ht=t}return e.ht}function rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!iT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ao(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sT(n.startAt,e.startAt)&&sT(n.endAt,e.endAt)}function au(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ip(n,e){return n.filters.filter(t=>t instanceof si&&t.field.isEqual(e))}function vv(n,e,t){let r=hv,i=!0;for(const a of ip(n,e)){let u=hv,f=!0;switch(a.op){case"<":case"<=":u=XD(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,f=!1;break;case"!=":case"not-in":u=hv}_v({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];_v({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function bv(n,e,t){let r=oa,i=!0;for(const a of ip(n,e)){let u=oa,f=!0;switch(a.op){case">=":case">":u=Yw(a.value),f=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,f=!1;break;case"!=":case"not-in":u=oa}yv({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];yv({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class si extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new sp(e,t,r):"array-contains"===t?new rT(e,r):"in"===t?new Xw(e,r):"not-in"===t?new eE(e,r):"array-contains-any"===t?new tE(e,r):new si(e,t,r)}static lt(e,t,r){return"in"===t?new op(e,r):new nT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(wt(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.ft(wt(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sp extends si{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.ft(t)}}class op extends si{constructor(e,t){super(e,"in",t),this.keys=Jw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nT extends si{constructor(e,t){super(e,"not-in",t),this.keys=Jw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Jw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class rT extends si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $l(t)&&km(t.arrayValue,this.value)}}class Xw extends si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&km(this.value.arrayValue,t)}}class eE extends si{constructor(e,t){super(e,"not-in",t)}matches(e){if(km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!km(this.value.arrayValue,t)}}class tE extends si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$l(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>km(this.value.arrayValue,r))}}class zl{constructor(e,t){this.position=e,this.inclusive=t}}class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function iT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function nE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?Ye.comparator(Ye.fromName(u.referenceValue),t.key):wt(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function sT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ao(n.position[t],e.position[t]))return!1;return!0}class Gl{constructor(e,t=null,r=[],i=[],a=null,u="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=_,this._t=null,this.wt=null}}function oT(n,e,t,r,i,a,u,f){return new Gl(n,e,t,r,i,a,u,f)}function ap(n){return new Gl(n)}function wv(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Wd(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ev(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Iv(n){return null!==n.collectionGroup}function cu(n){const e=Je(n);if(null===e._t){e._t=[];const t=Ev(e),r=Wd(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new lu(t)),e._t.push(new lu(Fn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new lu(Fn.keyField(),a))}}}return e._t}function jr(n){const e=Je(n);if(!e.wt)if("F"===e.limitType)e.wt=Gd(e.path,e.collectionGroup,cu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of cu(e))t.push(new lu(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new zl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new zl(e.startAt.position,e.startAt.inclusive):null;e.wt=Gd(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Nm(n,e,t){return new Gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lp(n,e){return rp(jr(n),jr(e))&&n.limitType===e.limitType}function rE(n){return`${ou(jr(n))}|lt:${n.limitType}`}function Cv(n){return`Query(target=${function tT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$d(r.value)}`;var r}).join(", ")}]`),tp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$d(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$d(t)).join(",")),`Target(${e})`}(jr(n))}; limitType=${n.limitType})`}function Dv(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const f=nE(i,a,u);return i.inclusive?f<=0:f<0}(t.startAt,cu(t),r)||t.endAt&&!function(i,a,u){const f=nE(i,a,u);return i.inclusive?f>=0:f>0}(t.endAt,cu(t),r)));var t,r}function Tv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iE(n){return(e,t)=>{let r=!1;for(const i of cu(n)){const a=aT(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function aT(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,a,u){const f=a.data.field(i),_=u.data.field(i);return null!==f&&null!==_?wt(f,_):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function uu(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sa(e)?"-0":e}}function sE(n){return{integerValue:""+n}}function Sv(n,e){return JD(e)?sE(e):uu(n,e)}class Pm{constructor(){this._=void 0}}function oE(n,e,t){return n instanceof qd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof sl?aE(n,e):n instanceof Wl?xv(n,e):function(r,i){const a=Av(r,i),u=lE(a)+lE(r.yt);return pv(a)&&pv(r.yt)?sE(u):uu(r.It,u)}(n,e)}function lT(n,e,t){return n instanceof sl?aE(n,e):n instanceof Wl?xv(n,e):t}function Av(n,e){return n instanceof Kd?pv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class qd extends Pm{}class sl extends Pm{constructor(e){super(),this.elements=e}}function aE(n,e){const t=cE(e);for(const r of n.elements)t.some(i=>ao(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wl extends Pm{constructor(e){super(),this.elements=e}}function xv(n,e){let t=cE(e);for(const r of n.elements)t=t.filter(i=>!ao(i,r));return{arrayValue:{values:t}}}class Kd extends Pm{constructor(e,t){super(),this.It=e,this.yt=t}}function lE(n){return ar(n.integerValue||n.doubleValue)}function cE(n){return $l(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class du{constructor(e,t){this.field=e,this.transform=t}}class uE{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Om(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fm{}function dE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zd(n.key,Xn.none()):new hu(n.key,n.data,Xn.none());{const t=n.data,r=Vr.empty();let i=new Dn(Fn.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new aa(n.key,r,new zi(i.toArray()),Xn.none())}}function uT(n,e,t){n instanceof hu?function(r,i,a){const u=r.value.clone(),f=pE(r.fieldTransforms,i,a.transformResults);u.setAll(f),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof aa?function(r,i,a){if(!Om(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=pE(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(fE(r)),f.setAll(u),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function cp(n,e,t,r){return n instanceof hu?function(i,a,u,f){if(!Om(i.precondition,a))return u;const _=i.value.clone(),b=Mv(i.fieldTransforms,f,a);return _.setAll(b),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof aa?function(i,a,u,f){if(!Om(i.precondition,a))return u;const _=Mv(i.fieldTransforms,f,a),b=a.data;return b.setAll(fE(i)),b.setAll(_),a.convertToFoundDocument(a.version,b).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(u=t,Om(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function dT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Av(r.transform,i||null);null!=a&&(null===t&&(t=Vr.empty()),t.set(r.field,a))}return t||null}function hE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&eu(t,r,(i,a)=>function cT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof sl&&r instanceof sl||t instanceof Wl&&r instanceof Wl?eu(t.elements,r.elements,ao):t instanceof Kd&&r instanceof Kd?ao(t.yt,r.yt):t instanceof qd&&r instanceof qd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class hu extends Fm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class aa extends Fm{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function fE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pE(n,e,t){const r=new Map;Lt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,f=e.data.field(a.field);r.set(a.field,lT(u,f,t[i]))}return r}function Mv(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,oE(a,u,e))}return r}class Zd extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Rv extends Fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hT{constructor(e){this.count=e}}var fr,rn;function kv(n){switch(n){default:return dt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Lm(n){if(void 0===n)return dr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case fr.OK:return ge.OK;case fr.CANCELLED:return ge.CANCELLED;case fr.UNKNOWN:return ge.UNKNOWN;case fr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case fr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case fr.INTERNAL:return ge.INTERNAL;case fr.UNAVAILABLE:return ge.UNAVAILABLE;case fr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case fr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case fr.NOT_FOUND:return ge.NOT_FOUND;case fr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case fr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case fr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case fr.ABORTED:return ge.ABORTED;case fr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case fr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case fr.DATA_LOSS:return ge.DATA_LOSS;default:return dt()}}(rn=fr||(fr={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class ql{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}const fT=new hr(Ye.comparator);function yi(){return fT}const gE=new hr(Ye.comparator);function Yd(...n){let e=gE;for(const t of n)e=e.insert(t.key,t);return e}function fu(n){let e=gE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function lo(){return Bm()}function mE(){return Bm()}function Bm(){return new ql(n=>n.toString(),(n,e)=>n.isEqual(e))}const _E=new hr(Ye.comparator),Nv=new Dn(Ye.comparator);function qt(...n){let e=Nv;for(const t of n)e=e.add(t);return e}const Pv=new Dn(Tt);function Um(){return Pv}class Qd{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qd(Rt.min(),r,Um(),yi(),qt())}}class pu{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new pu(Tr.EMPTY_BYTE_STRING,t,qt(),qt(),qt())}}class up{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Ov{constructor(e,t){this.targetId=e,this.At=t}}class Fv{constructor(e,t,r=Tr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Lv{constructor(){this.Rt=0,this.bt=vE(),this.Pt=Tr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=qt(),t=qt(),r=qt();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new pu(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=vE()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class pT{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=yi(),this.qt=yE(),this.Kt=new Dn(Tt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(au(a))if(0===r){const u=new Ye(a.path);this.jt(t,u,Ln.newNoDocument(u,Rt.min()))}else Lt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,u)=>{const f=this.Xt(u);if(f){if(a.current&&au(f.target)){const _=new Ye(f.target.path);null!==this.Ut.get(_)||this.ee(u,_)||this.jt(u,_,Ln.newNoDocument(_,e))}a.Dt&&(t.set(u,a.xt()),a.Nt())}});let r=qt();this.qt.forEach((a,u)=>{let f=!0;u.forEachWhile(_=>{const b=this.Xt(_);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Ut.forEach((a,u)=>u.setReadTime(e));const i=new Qd(e,t,this.Kt,this.Ut,r);return this.Ut=yi(),this.qt=yE(),this.Kt=new Dn(Tt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new Lv,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Dn(Tt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Lv),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function yE(){return new hr(Ye.comparator)}function vE(){return new hr(Ye.comparator)}const gT={asc:"ASCENDING",desc:"DESCENDING"},bE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vx{constructor(e,t){this.databaseId=e,this.gt=t}}function Jd(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(n,e){return n.gt?e.toBase64():e.toUint8Array()}function mT(n,e){return Jd(n,e.toTimestamp())}function oi(n){return Lt(!!n),Rt.fromTimestamp(function(e){const t=il(e);return new Jn(t.seconds,t.nanos)}(n))}function EE(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function IE(n){const e=cn.fromString(n);return Lt(th(e)),e}function dp(n,e){return EE(n.databaseId,e.path)}function la(n,e){const t=IE(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(CE(t))}function Vm(n,e){return EE(n.databaseId,e)}function Bv(n){const e=IE(n);return 4===e.length?cn.emptyPath():CE(e)}function hp(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CE(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DE(n,e,t){return{name:dp(n,e),fields:t.value.mapValue.fields}}function TE(n,e,t){const r=la(n,e.name),i=oi(e.updateTime),a=new Vr({mapValue:{fields:e.fields}}),u=Ln.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function fp(n,e){let t;if(e instanceof hu)t={update:DE(n,e.key,e.value)};else if(e instanceof Zd)t={delete:dp(n,e.key)};else if(e instanceof aa)t={update:DE(n,e.key,e.data),updateMask:ET(e.fieldMask)};else{if(!(e instanceof Rv))return dt();t={verify:dp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof sl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Wl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Kd)return{fieldPath:a.field.canonicalString(),increment:u.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:mT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function gu(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Xn.updateTime(oi(i.updateTime)):void 0!==i.exists?Xn.exists(i.exists):Xn.none():Xn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let f=null;"setToServerValue"in u?(Lt("REQUEST_TIME"===u.setToServerValue),f=new qd):"appendMissingElements"in u?f=new sl(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new Wl(u.removeAllFromArray.values||[]):"increment"in u?f=new Kd(a,u.increment):dt();const _=Fn.fromServerFormat(u.fieldPath);return new du(_,f)}(n,i)):[];var i;if(e.update){const i=la(n,e.update.name),a=new Vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new zi((e.updateMask.fieldPaths||[]).map(b=>Fn.fromServerFormat(b)));return new aa(i,a,u,t,r)}return new hu(i,a,t,r)}if(e.delete){const i=la(n,e.delete);return new Zd(i,t)}if(e.verify){const i=la(n,e.verify);return new Rv(i,t)}return dt()}function Uv(n,e){return{documents:[Vm(n,e.path)]}}function Vv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Vm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Vm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(T=>function(A){if("=="===A.op){if(lr(A.value))return{unaryFilter:{field:Xd(A.field),op:"IS_NAN"}};if(np(A.value))return{unaryFilter:{field:Xd(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(lr(A.value))return{unaryFilter:{field:Xd(A.field),op:"IS_NOT_NAN"}};if(np(A.value))return{unaryFilter:{field:Xd(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(A.field),op:bx(A.op),value:A.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(b=>{return{field:Xd((T=b).field),direction:vT(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(b=e.limit,n.gt||tp(b)?b:{value:b});var b,f,_;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function jv(n){let e=Bv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Lt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=xE(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(T=>{return new lu(eh((A=T).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(T){let A;return A="object"==typeof T?T.value:T,tp(A)?null:A}(t.limit));let _=null;var T;t.startAt&&(_=new zl((T=t.startAt).values||[],!!T.before));let b=null;return t.endAt&&(b=function(T){return new zl(T.values||[],!T.before)}(t.endAt)),oT(e,i,u,a,f,"F",_,b)}function xE(n){return n?void 0!==n.unaryFilter?[wT(n)]:void 0!==n.fieldFilter?[bT(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>xE(e)).reduce((e,t)=>e.concat(t)):dt():[]}function vT(n){return gT[n]}function bx(n){return bE[n]}function Xd(n){return{fieldPath:n.canonicalString()}}function eh(n){return Fn.fromServerFormat(n.fieldPath)}function bT(n){return si.create(eh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function wT(n){switch(n.unaryFilter.op){case"IS_NAN":const e=eh(n.unaryFilter.field);return si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=eh(n.unaryFilter.field);return si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=eh(n.unaryFilter.field);return si.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=eh(n.unaryFilter.field);return si.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function ET(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function th(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Si(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=co(e)),e=Hv(n.get(t),e);return co(e)}function Hv(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function co(n){return n+"\x01\x01"}function ca(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&dt(),n.charAt(u+1)){case"\x01":const f=n.substring(a,u);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:dt()}a=u+2}return new cn(r)}const pp=["userId","batchId"];function Kl(n,e){return[n,Si(e)]}function ME(n,e,t){return[n,Si(e),t]}const IT={},CT=["prefixPath","collectionGroup","readTime","documentId"],jm=["prefixPath","collectionGroup","documentId"],Hm=["collectionGroup","readTime","prefixPath","documentId"],DT=["canonicalId","targetId"],TT=["targetId","path"],RE=["path","targetId"],kE=["collectionId","parent"],$v=["indexId","uid"],NE=["uid","sequenceNumber"],ST=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AT=["indexId","uid","orderedDocumentKey"],wx=["userId","collectionPath","documentId"],zv=["userId","collectionPath","largestBatchId"],Gv=["userId","collectionGroup","largestBatchId"],Wv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qv=[...Wv,"documentOverlays"],$m=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PE=$m,xT=[...PE,"indexConfiguration","indexState","indexEntries"];class Kv extends cv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Hr(n,e){const t=Je(n);return xs.O(t.ie,e)}class zm{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uT(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mE();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(i.key)?null:f;const _=dE(u,f);null!==_&&r.set(i.key,_),u.isValidDocument()||u.convertToNoDocument(Rt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&eu(this.mutations,e.mutations,(t,r)=>hE(t,r))&&eu(this.baseMutations,e.baseMutations,(t,r)=>hE(t,r))}}class gp{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Lt(e.mutations.length===r.length);let i=_E;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new gp(e,t,r,i)}}class Gm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ol{constructor(e,t,r,i,a=Rt.min(),u=Rt.min(),f=Tr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f}withSequenceNumber(e){return new ol(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ol(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Zv{constructor(e){this.re=e}}function FE(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:mp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dp(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Jd(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zl(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Zl(e.version)}}var i,a;return r}function mp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mu(n){const e=new Jn(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function Yl(n,e){const t=(e.baseMutations||[]).map(a=>gu(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>gu(n.re,a)),i=Jn.fromMillis(e.localWriteTimeMs);return new zm(e.batchId,i,t,r)}function nh(n){const e=mu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?mu(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=jr(ap(Bv(i.documents[0])))):r=jr(jv(n.query)),new ol(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Tr.fromBase64String(n.resumeToken))}function vi(n,e){const t=Zl(e.snapshotVersion),r=Zl(e.lastLimboFreeSnapshotVersion);let i;i=au(e.target)?Uv(n.re,e.target):Vv(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ou(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ql(n){const e=jv({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Nm(e,e.limit,"L"):e}function Yv(n,e){return new Gm(e.largestBatchId,gu(n.re,e.overlayMutation))}function LE(n,e){const t=e.path.lastSegment();return[n,Si(e.path.popLast()),t]}function MT(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Zl(r.readTime),documentKey:Si(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ex{getBundleMetadata(e,t){return Qv(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:mu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Qv(e).put({bundleId:(r=t).id,createTime:Zl(oi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Jv(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Ql(i.bundledQuery),readTime:mu(i.readTime)};var i})}saveNamedQuery(e,t){return Jv(e).put({name:(r=t).name,readTime:Zl(oi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Qv(n){return Hr(n,"bundles")}function Jv(n){return Hr(n,"namedQueries")}class Jl{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Jl(e,t.uid||"")}getOverlay(e,t){return _p(e).get(LE(this.userId,t)).next(r=>r?Yv(this.It,r):null)}getOverlays(e,t){const r=lo();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const f=new Gm(t,u);i.push(this.ue(e,f))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Si(u.getCollectionPath())));const a=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(_p(e).Y("collectionPathOverlayIndex",f))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=lo(),a=Si(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return _p(e).W("collectionPathOverlayIndex",u).next(f=>{for(const _ of f){const b=Yv(this.It,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=lo();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _p(e).Z({index:"collectionGroupOverlayIndex",range:f},(_,b,T)=>{const A=Yv(this.It,b);a.size()<i||A.largestBatchId===u?(a.set(A.getKey(),A),u=A.largestBatchId):T.done()}).next(()=>a)}ue(e,t){return _p(e).put(function(r,i,a){const[u,f,_]=LE(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:fp(r.re,a.mutation)}}(this.It,this.userId,t))}}function _p(n){return Hr(n,"documentOverlays")}class al{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),sa(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Vl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?mv(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ye.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function RT(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Xv(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=RT(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}al.Te=new al;class kT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=Xv(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=Xv(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class NT{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class PT{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class _u{constructor(){this.Be=new kT,this.Le=new NT(this.Be),this.Ue=new PT(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Xl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xl(this.indexId,this.documentKey,this.arrayValue,r)}}function ec(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yp(n.arrayValue,e.arrayValue),0!==t?t:(t=yp(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function yp(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class eb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=ov(e);if(void 0!==t&&!this.ze(t))return!1;const r=Bl(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ix{constructor(){this.Ye=new Wm}addToCollectionParentIndex(e,t){return this.Ye.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(_i.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class Wm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dn(cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dn(cn.comparator)).toArray()}}const qm=new Uint8Array(0);class BE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Wm,this.Ze=new ql(r=>ou(r),(r,i)=>rp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:Si(i)};return yu(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[iv(t),""],!1,!0);return yu(e).W(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(ca(u.parent))}return r})}addFieldIndex(e,t){const r=bp(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=vu(e);return a.next(f=>{u.put(MT(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=bp(e),i=vu(e),a=vp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=vp(e);let i=!0;const a=new Map;return de.forEach(this.tn(t),u=>this.en(e,u).next(f=>{i&&(i=!!f),a.set(u,f)})).next(()=>{if(i){let u=qt();const f=[];return de.forEach(a,(_,b)=>{var T;Re("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${ou(t)}`);const A=function(Ct,ft){const kt=ov(ft);if(void 0===kt)return null;for(const Ut of ip(Ct,kt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(b,_),F=function(Ct,ft){const kt=new Map;for(const Ut of Bl(ft))for(const hn of ip(Ct,Ut.fieldPath))switch(hn.op){case"==":case"in":kt.set(Ut.fieldPath.canonicalString(),hn.value);break;case"not-in":case"!=":return kt.set(Ut.fieldPath.canonicalString(),hn.value),Array.from(kt.values())}return null}(b,_),$=function(Ct,ft){const kt=[];let Ut=!0;for(const hn of Bl(ft)){const _s=0===hn.kind?vv(Ct,hn.fieldPath,Ct.startAt):bv(Ct,hn.fieldPath,Ct.startAt);kt.push(_s.value),Ut&&(Ut=_s.inclusive)}return new zl(kt,Ut)}(b,_),Z=function(Ct,ft){const kt=[];let Ut=!0;for(const hn of Bl(ft)){const _s=0===hn.kind?bv(Ct,hn.fieldPath,Ct.endAt):vv(Ct,hn.fieldPath,Ct.endAt);kt.push(_s.value),Ut&&(Ut=_s.inclusive)}return new zl(kt,Ut)}(b,_),le=this.nn(_,b,$),Te=this.nn(_,b,Z),Qe=this.sn(_,b,F),at=this.rn(_.indexId,A,le,$.inclusive,Te,Z.inclusive,Qe);return de.forEach(at,Ct=>r.J(Ct,t.limit).next(ft=>{ft.forEach(kt=>{const Ut=Ye.fromSegments(kt.documentKey);u.has(Ut)||(u=u.add(Ut),f.push(Ut))})}))}).next(()=>f)}return de.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,u,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),b=_/(null!=t?t.length:1),T=[];for(let A=0;A<_;++A){const F=t?this.on(t[A/b]):qm,$=this.un(e,F,r[A%b],i),Z=this.cn(e,F,a[A%b],u),le=f.map(Te=>this.un(e,F,Te,!0));T.push(...this.createRange($,Z,le))}return T}un(e,t,r,i){const a=new Xl(e,Ye.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Xl(e,Ye.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new eb(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const f of a)r.We(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;return de.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let f=new Dn(Fn.comparator),_=!1;for(const b of u.filters){const T=b;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:f=f.add(T.field))}for(const b of u.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new _u;for(const i of Bl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.qe(i.kind);al.Te.ce(a,u)}return r.$e()}on(e){const t=new _u;return al.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new _u;return al.Te.ce(Ms(this.databaseId,t),r.qe(function(i){const a=Bl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new _u);let a=0;for(const u of Bl(e)){const f=r[a++];for(const _ of i)if(this.ln(t,u.fieldPath)&&$l(f))i=this.fn(i,u,f);else{const b=_.qe(u.kind);al.Te.ce(f,b)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const f of i){const _=new _u;_.seed(f.$e()),al.Te.ce(u,_.qe(t.kind)),a.push(_)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof si&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=bp(e),i=vu(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const u=[];return de.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{u.push(function(b,T){const A=T?new jd(T.sequenceNumber,new _i(mu(T.readTime),new Ye(ca(T.documentKey)),T.largestBatchId)):jd.empty(),F=b.fields.map(([$,Z])=>new tu(Fn.fromServerFormat($),Z));return new Jf(b.indexId,b.collectionGroup,F,A)}(f,_))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Tt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=bp(e),a=vu(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>de.forEach(f,_=>a.put(MT(_.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?de.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),de.forEach(f,_=>this.wn(e,i,_).next(b=>{const T=this.mn(a,_);return b.isEqual(T)?de.resolve():this.gn(e,a,_,b,T)}))))})}yn(e,t,r,i){return vp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return vp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=vp(e);let a=new Dn(ec);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,f)=>{a=a.add(new Xl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}mn(e,t){let r=new Dn(ec);const i=this.an(t,e);if(null==i)return r;const a=ov(t);if(null!=a){const u=e.data.field(a.fieldPath);if($l(u))for(const f of u.arrayValue.values||[])r=r.add(new Xl(t.indexId,e.key,this.on(f),i))}else r=r.add(new Xl(t.indexId,e.key,qm,i));return r}gn(e,t,r,i,a){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,_,b,T,A){const F=f.getIterator(),$=_.getIterator();let Z=iu(F),le=iu($);for(;Z||le;){let Te=!1,Qe=!1;if(Z&&le){const at=b(Z,le);at<0?Qe=!0:at>0&&(Te=!0)}else null!=Z?Qe=!0:Te=!0;Te?(T(le),le=iu($)):Qe?(A(Z),Z=iu(F)):(Z=iu(F),le=iu($))}}(i,a,ec,f=>{u.push(this.yn(e,t,r,f))},f=>{u.push(this.pn(e,t,r,f))}),de.waitFor(u)}_n(e){let t=1;return vu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>ec(u,f)).filter((u,f,_)=>!f||0!==ec(u,_[f-1]));const i=[];i.push(e);for(const u of r){const f=ec(u,e),_=ec(u,t);if(0===f)i[0]=e.Ke();else if(f>0&&_<0)i.push(u),i.push(u.Ke());else if(_>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,qm,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,qm,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(OT)}getMinOffset(e,t){return de.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||dt())).next(OT)}}function yu(n){return Hr(n,"collectionParents")}function vp(n){return Hr(n,"indexEntries")}function bp(n){return Hr(n,"indexConfiguration")}function vu(n){return Hr(n,"indexState")}function OT(n){Lt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Am(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new _i(e.readTime,e.documentKey,t)}const UE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fs(e,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function VE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let f=0;const _=r.Z({range:u},(T,A,F)=>(f++,F.delete()));a.push(_.next(()=>{Lt(1===f)}));const b=[];for(const T of t.mutations){const A=ME(e,T.key.path,t.batchId);a.push(i.delete(A)),b.push(T.key)}return de.waitFor(a).next(()=>b)}function Km(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}fs.DEFAULT_COLLECTION_PERCENTILE=10,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fs.DEFAULT=new fs(41943040,fs.DEFAULT_COLLECTION_PERCENTILE,fs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fs.DISABLED=new fs(-1,0,0);class Zm{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Lt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Zm(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).Z({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=rh(e),u=ll(e);return u.add({}).next(f=>{Lt("number"==typeof f);const _=new zm(f,t,r,i),b=function(F,$,Z){const le=Z.baseMutations.map(Qe=>fp(F.re,Qe)),Te=Z.mutations.map(Qe=>fp(F.re,Qe));return{userId:$,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:le,mutations:Te}}(this.It,this.userId,_),T=[];let A=new Dn((F,$)=>Tt(F.canonicalString(),$.canonicalString()));for(const F of i){const $=ME(this.userId,F.key.path,f);A=A.add(F.key.path.popLast()),T.push(u.put(b)),T.push(a.put($,IT))}return A.forEach(F=>{T.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[f]=_.keys()}),de.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return ll(e).get(t).next(r=>r?(Lt(r.userId===this.userId),Yl(this.It,r)):null)}Tn(e,t){return this.In[t]?de.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ll(e).Z({index:"userMutationsIndex",range:i},(u,f,_)=>{f.userId===this.userId&&(Lt(f.batchId>=r),a=Yl(this.It,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ll(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).W("userMutationsIndex",t).next(r=>r.map(i=>Yl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return rh(e).Z({range:i},(u,f,_)=>{const[b,T,A]=u,F=ca(T);if(b===this.userId&&t.path.isEqual(F))return ll(e).get(A).next($=>{if(!$)throw dt();Lt($.userId===this.userId),a.push(Yl(this.It,$))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Tt);const i=[];return t.forEach(a=>{const u=Kl(this.userId,a.path),f=IDBKeyRange.lowerBound(u),_=rh(e).Z({range:f},(b,T,A)=>{const[F,$,Z]=b,le=ca($);F===this.userId&&a.path.isEqual(le)?r=r.add(Z):A.done()});i.push(_)}),de.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Kl(this.userId,r),u=IDBKeyRange.lowerBound(a);let f=new Dn(Tt);return rh(e).Z({range:u},(_,b,T)=>{const[A,F,$]=_,Z=ca(F);A===this.userId&&r.isPrefixOf(Z)?Z.length===i&&(f=f.add($)):T.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ll(e).get(a).next(u=>{if(null===u)throw dt();Lt(u.userId===this.userId),r.push(Yl(this.It,u))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return VE(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return rh(e).Z({range:r},(a,u,f)=>{if(a[0]===this.userId){const _=ca(a[1]);i.push(_)}else f.done()}).next(()=>{Lt(0===i.length)})})}containsKey(e,t){return tb(e,this.userId,t)}Rn(e){return nb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tb(n,e,t){const r=Kl(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return rh(n).Z({range:a,X:!0},(f,_,b)=>{const[T,A,F]=f;T===e&&A===i&&(u=!0),b.done()}).next(()=>u)}function ll(n){return Hr(n,"mutations")}function rh(n){return Hr(n,"documentMutations")}function nb(n){return Hr(n,"mutationQueues")}class tc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new tc(0)}static vn(){return new tc(-1)}}class FT{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new tc(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Rt.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ih(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return ih(e).Z((u,f)=>{const _=nh(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return ih(e).Z((r,i)=>{const a=nh(i);t(a)})}Vn(e){return rb(e).get("targetGlobalKey").next(t=>(Lt(null!==t),t))}Sn(e,t){return rb(e).put("targetGlobalKey",t)}Dn(e,t){return ih(e).put(vi(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ou(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return ih(e).Z({range:i,index:"queryTargetsIndex"},(u,f,_)=>{const b=nh(f);rp(t,b.target)&&(a=b,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=nc(e);return t.forEach(u=>{const f=Si(u.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=nc(e);return de.forEach(t,a=>{const u=Si(a.path);return de.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=nc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=nc(e);let a=qt();return i.Z({range:r,X:!0},(u,f,_)=>{const b=ca(u[1]),T=new Ye(b);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Si(t.path),i=IDBKeyRange.bound([r],[iv(r)],!1,!0);let a=0;return nc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,f],_,b)=>{0!==u&&(a++,b.done())}).next(()=>a>0)}se(e,t){return ih(e).get(t).next(r=>r?nh(r):null)}}function ih(n){return Hr(n,"targets")}function rb(n){return Hr(n,"targetGlobal")}function nc(n){return Hr(n,"targetDocuments")}function ib([n,e],[t,r]){const i=Tt(n,t);return 0===i?Tt(e,r):i}class jE{constructor(e){this.xn=e,this.buffer=new Dn(ib),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ib(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ul(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield rl(r)}yield t.Fn(3e5)}))}}class $E{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve($i.at);const r=new jE(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(UE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),UE):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,u,f,_,b;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,u=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(b=Date.now(),Tm()<=Hc.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-T}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(b-_)+`ms\nTotal Duration: ${b-T}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class LT{constructor(e,t){this.db=e,this.garbageCollector=new $E(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ym(e,r)}removeReference(e,t,r){return Ym(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ym(e,t)}Gn(e,t){return function(r,i){let a=!1;return nb(r).tt(u=>tb(r,u,i).next(f=>(f&&(a=!0),de.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(u,f)=>{if(f<=t){const _=this.Gn(e,u).next(b=>{if(!b)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Rt.min()),nc(e).delete([0,Si(u.path)])))});i.push(_)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ym(e,t)}Kn(e,t){const r=nc(e);let i,a=$i.at;return r.Z({index:"documentTargetsIndex"},([u,f],{path:_,sequenceNumber:b})=>{0===u?(a!==$i.at&&t(new Ye(ca(i)),a),a=b,i=_):a=$i.at}).next(()=>{a!==$i.at&&t(new Ye(ca(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ym(n,e){return nc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Si(e.path),sequenceNumber:r}));var r}class BT{constructor(){this.changes=new ql(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zE{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return sh(e).put(r)}removeEntry(e,t,r){return sh(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],mp(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Ln.newInvalidDocument(t);return sh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qm(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Ln.newInvalidDocument(t)};return sh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Qm(t))},(i,a)=>{r={document:this.jn(t,a),size:Km(a)}}).next(()=>r)}getEntries(e,t){let r=yi();return this.zn(e,t,(i,a)=>{const u=this.jn(i,a);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=yi(),i=new hr(Ye.comparator);return this.zn(e,t,(a,u)=>{const f=this.jn(a,u);r=r.insert(a,f),i=i.insert(a,Km(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return de.resolve();let i=new Dn(HT);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Qm(i.first()),Qm(i.last())),u=i.getIterator();let f=u.getNext();return sh(e).Z({index:"documentKeyIndex",range:a},(_,b,T)=>{const A=Ye.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&HT(f,A)<0;)r(f,null),f=u.getNext();f&&f.isEqual(A)&&(r(f,b),f=u.hasNext()?u.getNext():null),f?T.j(Qm(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),mp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sh(e).W(IDBKeyRange.bound(i,a,!0)).next(u=>{let f=yi();for(const _ of u){const b=this.jn(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=yi();const u=jT(t,r),f=jT(t,_i.max());return sh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(_,b,T)=>{const A=this.jn(Ye.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(A.key,A),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new Cx(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VT(e).get("remoteDocumentGlobalKey").next(t=>(Lt(!!t),t))}Qn(e,t){return VT(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function OE(n,e){let t;if(e.document)t=TE(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=mu(e.noDocument.readTime);t=Ln.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Ye.fromSegments(e.unknownDocument.path),i=mu(e.unknownDocument.version);t=Ln.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Jn(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return Ln.newInvalidDocument(e)}}function UT(n){return new zE(n)}class Cx extends BT{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ql(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Dn((a,u)=>Tt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),u.isValidDocument()){const _=FE(this.Yn.It,u);i=i.add(a.path.popLast()),r+=Km(_)-f.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=FE(this.Yn.It,u.convertToNoDocument(Rt.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,u)=>{this.Xn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function VT(n){return Hr(n,"remoteDocumentGlobal")}function sh(n){return Hr(n,"remoteDocumentsV14")}function Qm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jT(n,e){const t=e.documentKey.path.toArray();return[n,mp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HT(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Tt(t[a],r[a]),i)return i;return i=Tt(t.length,r.length),i||(i=Tt(t[t.length-2],r[r.length-2]),i||Tt(t[t.length-1],r[r.length-1]))}class Dx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wp{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&cp(r.mutation,i,zi.empty(),Jn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const i=lo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=Yd();return a.forEach((f,_)=>{u=u.insert(f,_.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=lo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let a=yi();const u=Bm(),f=Bm();return t.forEach((_,b)=>{const T=r.get(b.key);i.has(b.key)&&(void 0===T||T.mutation instanceof aa)?a=a.insert(b.key,b):void 0!==T&&(u.set(b.key,T.mutation.getFieldMask()),cp(T.mutation,b,T.mutation.getFieldMask(),Jn.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((b,T)=>u.set(b,T)),t.forEach((b,T)=>{var A;return f.set(b,new Dx(T,null!==(A=u.get(b))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Bm();let i=new hr((u,f)=>u-f),a=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let T=r.get(_)||zi.empty();T=f.applyToLocalView(b,T),r.set(_,T);const A=(i.get(f.batchId)||qt()).add(_);i=i.insert(f.batchId,A)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),b=_.key,T=_.value,A=mE();T.forEach(F=>{if(!a.has(F)){const $=dE(t.get(F),r.get(F));null!==$&&A.set(F,$),a=a.add(F)}}),u.push(this.documentOverlayCache.saveOverlays(e,b,A))}return de.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Iv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(lo());let f=-1,_=a;return u.next(b=>de.forEach(b,(T,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(T)?de.resolve():this.getBaseDocument(e,T,A).next(F=>{_=_.insert(T,F)}))).next(()=>this.populateOverlays(e,b,a)).next(()=>this.computeViews(e,_,b,qt())).next(T=>({batchId:f,changes:fu(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=Yd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Yd();return this.indexManager.getCollectionParents(e,i).next(u=>de.forEach(u,f=>{const _=(b=t,T=f.child(i),new Gl(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((T,A)=>{a=a.insert(T,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,_)=>{const b=_.getKey();null===i.get(b)&&(i=i.insert(b,Ln.newInvalidDocument(b)))});let u=Yd();return i.forEach((f,_)=>{const b=a.get(f);void 0!==b&&cp(b.mutation,_,zi.empty(),Jn.now()),Dv(t,_)&&(u=u.insert(f,_))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(Ln.newInvalidDocument(t))}}class Tx{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return de.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:oi(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Ql(r.bundledQuery),readTime:oi(r.readTime)}),de.resolve();var r}}class GE{constructor(){this.overlays=new hr(Ye.comparator),this.es=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=lo();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=lo(),a=t.length+1,u=new Ye(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const _=f.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new hr((b,T)=>b-T);const u=this.overlays.getIterator();for(;u.hasNext();){const b=u.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let T=a.get(b.largestBatchId);null===T&&(T=lo(),a=a.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=lo(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,T)=>f.set(b,T)),!(f.size()>=i)););return de.resolve(f)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new Gm(t,r));let a=this.es.get(t);void 0===a&&(a=qt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class oh{constructor(){this.ns=new Dn(Nr.ss),this.rs=new Dn(Nr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Nr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Nr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ye(new cn([])),r=new Nr(t,e),i=new Nr(t,e+1),a=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),a.push(u.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ye(new cn([])),r=new Nr(t,e),i=new Nr(t,e+1);let a=qt();return this.rs.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Nr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Nr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ye.comparator(e.key,t.key)||Tt(e._s,t._s)}static os(e,t){return Tt(e._s,t._s)||Ye.comparator(e.key,t.key)}}class WE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Dn(Nr.ss)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const u=new zm(a,t,r,i);this.mutationQueue.push(u);for(const f of i)this.gs=this.gs.add(new Nr(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(u)}lookupMutationBatch(e,t){return de.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Nr(t,0),i=new Nr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],u=>{const f=this.ys(u._s);a.push(f)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Tt);return t.forEach(i=>{const a=new Nr(i,0),u=new Nr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,u],f=>{r=r.add(f._s)})}),de.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ye.isDocumentKey(a)||(a=a.child(""));const u=new Nr(new Ye(a),0);let f=new Dn(Tt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(_._s)),!0)},u),de.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Lt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return de.forEach(t.mutations,i=>{const a=new Nr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Nr(t,0),i=this.gs.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sx{constructor(e){this.Es=e,this.docs=new hr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=yi();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=yi();const a=new Ye(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:f,value:{document:_}}=u.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||Am(Sm(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}As(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sb(this)}getSize(e){return de.resolve(this.size)}}class sb extends BT{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class qE{constructor(e){this.persistence=e,this.Rs=new ql(t=>ou(t),rp),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new oh,this.targetCount=0,this.vs=tc.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),de.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new tc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Dn(t),de.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.Ps.containsKey(t))}}class KE{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new $i(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new qE(this),this.indexManager=new Ix,this.remoteDocumentCache=new Sx(r=>this.referenceDelegate.xs(r)),this.It=new Zv(t),this.Ns=new Tx(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new WE(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new ZE(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return de.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class ZE extends cv{constructor(e){super(),this.currentSequenceNumber=e}}class ob{constructor(e){this.persistence=e,this.Fs=new oh,this.$s=null}static Bs(e){return new ob(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),de.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ls,r=>{const i=Ye.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Rt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return de.or([()=>de.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class $T{constructor(e){this.It=e}$(e,t,r,i){const a=new Xf("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0}),f.createObjectStore("documentMutations"),YE(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=de.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),YE(e)),u=u.next(()=>function(f){const _=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,_){return _.store("mutations").W().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pp,{unique:!0});const T=_.store("mutations"),A=b.map(F=>T.put(F));return de.waitFor(A)})}(e,a))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(a))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(a))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(a))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:wx});_.createIndex("collectionPathOverlayIndex",zv,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Gv,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:CT});_.createIndex("documentKeyIndex",jm),_.createIndex("collectionGroupIndex",Hm)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:$v}).createIndex("sequenceNumberIndex",NE,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:ST}).createIndex("documentKeyIndex",AT,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Km(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>de.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(f=>de.forEach(f,_=>{Lt(_.userId===a.userId);const b=Yl(this.It,_);return VE(e,a.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((u,f)=>{const _=new cn(u),b=[0,Si(_)];a.push(t.get(b).next(T=>T?de.resolve():t.put({targetId:0,path:Si(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:kE});const r=t.store("collectionParents"),i=new Wm,a=u=>{if(i.add(u)){const f=u.lastSegment(),_=u.popLast();return r.put({collectionId:f,parent:Si(_)})}};return t.store("remoteDocuments").Z({X:!0},(u,f)=>{const _=new cn(u);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,f,_],b)=>{const T=ca(f);return a(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=nh(i),u=vi(this.It,a);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,u)=>{const f=t.store("remoteDocumentsV14"),_=(b=u,b.document?new Ye(cn.fromString(b.document.name).popFirst(5)):b.noDocument?Ye.fromSegments(b.noDocument.path):b.unknownDocument?Ye.fromSegments(b.unknownDocument.path):dt()).path.toArray();var b;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(T))}).next(()=>de.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=UT(this.It),a=new KE(ob.Bs,this.It.re);return r.W().next(u=>{const f=new Map;return u.forEach(_=>{var b;let T=null!==(b=f.get(_.userId))&&void 0!==b?b:qt();Yl(this.It,_).keys().forEach(A=>T=T.add(A)),f.set(_.userId,T)}),de.forEach(f,(_,b)=>{const T=new ri(b),A=Jl.oe(this.It,T),F=a.getIndexManager(T),$=Zm.oe(T,this.It,F,a.referenceDelegate);return new wp(i,$,A,F).recalculateAndSaveOverlaysForDocumentKeys(new Kv(t,$i.at),_).next()})})}}function YE(n){n.createObjectStore("targetDocuments",{keyPath:TT}).createIndex("documentTargetsIndex",RE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",DT,{unique:!0}),n.createObjectStore("targetGlobal")}const ab="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ah{constructor(e,t,r,i,a,u,f,_,b,T,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=u,this.document=f,this.Js=b,this.Ys=T,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!ah.C())throw new Ue(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LT(this,i),this.ii=t+"main",this.It=new Zv(_),this.ri=new xs(this.ii,this.Xs,new $T(this.It)),this.Cs=new FT(this.referenceDelegate,this.It),this.remoteDocumentCache=UT(this.It),this.Ns=new Ex,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(ge.FAILED_PRECONDITION,ab);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new $i(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lb(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ul(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ep(e).get("owner").next(t=>de.resolve(this.mi(t)))}gi(e){return lb(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Hr(r,"clientMetadata");return i.W().next(a=>{const u=e.Ii(a,18e5),f=a.filter(_=>-1===u.indexOf(_));return de.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?de.resolve(!0):Ep(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(ge.FAILED_PRECONDITION,ab);return!1}}return!(!this.networkEnabled||!this.inForeground)||lb(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Kv(t,$i.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lb(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Zm.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new BE(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Jl.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Xs)?xT:14===u?PE:13===u?$m:12===u?qv:11===u?Wv:void dt();var u;let f;return this.ri.runTransaction(e,i,a,_=>(f=new Kv(_,this.Ss?this.Ss.next():$i.at),"readwrite-primary"===t?this.fi(f).next(b=>!!b||this.di(f)).next(b=>{if(!b)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(ge.FAILED_PRECONDITION,lv);return r(f)}).next(b=>this.wi(f).next(()=>b)):this.Vi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Vi(e){return Ep(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(ge.FAILED_PRECONDITION,ab)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ep(e).put("owner",t)}static C(){return xs.C()}_i(e){const t=Ep(e);return t.get("owner").next(r=>this.mi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(dr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,en.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return dr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ep(n){return Hr(n,"owner")}function lb(n){return Hr(n,"clientMetadata")}function QE(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class JE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=qt(),i=qt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new JE(e,t.fromCache,r,i)}}class XE{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(wv(t))return de.resolve(null);let r=jr(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Nm(t,null,"F"),r=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const u=qt(...a);return this.Ni.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,f);return this.$i(t,b,u,_.readTime)?this.ki(e,Nm(t,null,"F")):this.Bi(e,b,t,_)}))})))}Mi(e,t,r,i){return wv(t)||i.isEqual(Rt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const u=this.Fi(t,a);return this.$i(t,u,r,i)?this.Oi(e,t):(Tm()<=Hc.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cv(t)),this.Bi(e,u,t,av(i,-1)))})}Fi(e,t){let r=new Dn(iE(e));return t.forEach((i,a)=>{Dv(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return Tm()<=Hc.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Cv(t)),this.Ni.getDocumentsMatchingQuery(e,t,_i.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class zT{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new hr(Tt),this.qi=new ql(a=>ou(a),rp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function eI(n,e,t,r){return new zT(n,e,t,r)}function GT(n,e){return cb.apply(this,arguments)}function cb(){return cb=(0,Ee.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],f=[];let _=qt();for(const b of i){u.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}for(const b of a){f.push(b.batchId);for(const T of b.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:u,addedBatchIds:f}))})})}),cb.apply(this,arguments)}function tI(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,f,_,b){const T=_.batch,A=T.keys();let F=de.resolve();return A.forEach($=>{F=F.next(()=>b.getEntry(f,$)).next(Z=>{const le=_.docVersions.get($);Lt(null!==le),Z.version.compareTo(le)<0&&(T.applyToRemoteDocument(Z,_),Z.isValidDocument()&&(Z.setReadTime(_.commitVersion),b.addEntry(Z)))})}),F.next(()=>u.mutationQueue.removeMutationBatch(f,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=qt();for(let _=0;_<u.mutationResults.length;++_)u.mutationResults[_].transformResults.length>0&&(f=f.add(u.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ub(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ax(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const f=[];e.targetChanges.forEach((T,A)=>{const F=i.get(A);if(!F)return;f.push(t.Cs.removeMatchingKeys(a,T.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,T.addedDocuments,A)));let $=F.withSequenceNumber(a.currentSequenceNumber);var Z,le,Te;e.targetMismatches.has(A)?$=$.withResumeToken(Tr.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):T.resumeToken.approximateByteSize()>0&&($=$.withResumeToken(T.resumeToken,r)),i=i.insert(A,$),le=$,Te=T,(0===(Z=F).resumeToken.approximateByteSize()||le.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,$))});let _=yi(),b=qt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),f.push(Rs(a,u,e.documentUpdates).next(T=>{_=T.Wi,b=T.zi})),!r.isEqual(Rt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(T)}return de.waitFor(f).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,b)).next(()=>_)}).then(a=>(t.Ui=i,a))}function Rs(n,e,t){let r=qt(),i=qt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=yi();return t.forEach((f,_)=>{const b=a.get(f);_.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(Rt.min())?(e.removeEntry(f,_.readTime),u=u.insert(f,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),u=u.insert(f,_)):Re("LocalStore","Ignoring outdated watch update for ",f,". Current version:",b.version," Watch version:",_.version)}),{Wi:u,zi:i}})}function WT(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rc(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new ol(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function lh(n,e,t){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Ul(u))throw u;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),Gi.apply(this,arguments)}function Jm(n,e,t){const r=Je(n);let i=Rt.min(),a=qt();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,_,b){const T=Je(f),A=T.qi.get(b);return void 0!==A?de.resolve(T.Ui.get(A)):T.Cs.getTargetData(_,b)}(r,u,jr(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,f.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:Rt.min(),t?a:qt())).next(f=>(rI(r,Tv(e),f),{documents:f,Hi:a})))}function Xm(n,e){const t=Je(n),r=Je(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(u=>u?u.target:null))}function nI(n,e){const t=Je(n),r=t.Ki.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,av(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rI(t,e,i),i))}function rI(n,e,t){let r=Rt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function e_(){return e_=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n);let a=qt(),u=yi();for(const b of t){const T=e.Ji(b.metadata.name);b.document&&(a=a.add(T));const A=e.Yi(b);A.setReadTime(e.Xi(b.metadata.readTime)),u=u.insert(T,A)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield rc(i,(b=r,jr(ap(cn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Rs(b,f,u).next(T=>(f.apply(b),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.Cs.addMatchingKeys(b,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,T.Wi,T.zi)).next(()=>T.Wi)))}),e_.apply(this,arguments)}function iI(n,e){return hb.apply(this,arguments)}function hb(){return hb=(0,Ee.Z)(function*(n,e,t=qt()){const r=yield rc(n,jr(Ql(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=oi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Tr.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),hb.apply(this,arguments)}function fb(n,e){return`firestore_clients_${n}_${e}`}function pb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gb(n,e){return`firestore_targets_${n}_${e}`}class Ip{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Ue(i.error.code,i.error.message))),u?new Ip(e,t,i.state,a):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Cp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ue(r.error.code,r.error.message))),a?new Cp(e,r.state,i):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ch{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Um();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=JD(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new ch(e,a):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ua{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ua(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class t_{constructor(){this.activeTargetIds=Um()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dp{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new hr(Tt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=fb(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new t_),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(fb(e.persistenceKey,i));if(a){const u=ch.Zi(i,a);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gb(this.persistenceKey,e));if(r){const i=Cp.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gb(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let u=$i.at;if(null!=a)try{const f=JSON.parse(a);Lt("number"==typeof f),u=f}catch(f){dr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==$i.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new Ip(this.currentUser,e,t,r),a=pb(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=pb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=gb(this.persistenceKey,e),a=new Cp(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return ch.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return Ip.Zi(new ri(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Cp.Zi(i,t)}yr(e){return ua.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),u=[],f=[];return a.forEach(_=>{i.has(_)||u.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Br(u,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Um();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class da{constructor(){this.Lr=new t_,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new t_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qT{qr(e){}shutdown(){}}class KT{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ZT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class YT{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class QT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const u=this.ao(e,t);Re("RestConnection","Sending: ",u,r);const f={};return this.ho(f,i,a),this.lo(e,u,f,r).then(_=>(Re("RestConnection","Received: ",_),_),_=>{throw Xc("RestConnection",`${e} failed with error: `,_,"url: ",u,"request:",r),_})}fo(e,t,r,i,a,u){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${ZT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,u)=>{const f=new Bw;f.listenOnce(Ow.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Dm.NO_ERROR:const b=f.getResponseJson();Re("Connection","XHR received:",JSON.stringify(b)),a(b);break;case Dm.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),u(new Ue(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Dm.HTTP_ERROR:const T=f.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const F=function($){const Z=$.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Z)>=0?Z:ge.UNKNOWN}(A.status);u(new Ue(F,A.message))}else u(new Ue(ge.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new Ue(ge.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Pw(),u=Jy(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Lw({})),this.ho(f.initMessageHeaders,t,r),(0,en.uI)()||(0,en.b$)()||(0,en.d)()||(0,en.w1)()||(0,en.Mn)()||(0,en.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Re("Connection","Creating WebChannel: "+_,f);const b=a.createWebChannel(_,f);let T=!1,A=!1;const F=new YT({Hr:Z=>{A?Re("Connection","Not sending because WebChannel is closed:",Z):(T||(Re("Connection","Opening WebChannel transport."),b.open(),T=!0),Re("Connection","WebChannel sending:",Z),b.send(Z))},Jr:()=>b.close()}),$=(Z,le,Te)=>{Z.listen(le,Qe=>{try{Te(Qe)}catch(at){setTimeout(()=>{throw at},0)}})};return $(b,Yf.EventType.OPEN,()=>{A||Re("Connection","WebChannel transport opened.")}),$(b,Yf.EventType.CLOSE,()=>{A||(A=!0,Re("Connection","WebChannel transport closed"),F.io())}),$(b,Yf.EventType.ERROR,Z=>{A||(A=!0,Xc("Connection","WebChannel transport errored:",Z),F.io(new Ue(ge.UNAVAILABLE,"The operation could not be completed")))}),$(b,Yf.EventType.MESSAGE,Z=>{var le;if(!A){const Te=Z.data[0];Lt(!!Te);const Qe=Te,at=Qe.error||(null===(le=Qe[0])||void 0===le?void 0:le.error);if(at){Re("Connection","WebChannel received error:",at);const Ct=at.status;let ft=function(Ut){const hn=fr[Ut];if(void 0!==hn)return Lm(hn)}(Ct),kt=at.message;void 0===ft&&(ft=ge.INTERNAL,kt="Unknown error status: "+Ct+" with message "+at.message),A=!0,F.io(new Ue(ft,kt)),b.close()}else Re("Connection","WebChannel received:",Te),F.ro(Te)}}),$(u,Fw.STAT_EVENT,Z=>{Z.stat===Xy.PROXY?Re("Connection","Detected buffering proxy"):Z.stat===Xy.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function sI(){return typeof window<"u"?window:null}function Tp(){return typeof document<"u"?document:null}function n_(n){return new vx(n,!0)}class r_{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class oI{constructor(e,t,r,i,a,u,f,_){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new r_(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ue(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aI extends oI{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function yT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:dt(),i=e.targetChange.targetIds||[],a=function(_,b){return _.gt?(Lt(void 0===b||"string"==typeof b),Tr.fromBase64String(b||"")):(Lt(void 0===b||b instanceof Uint8Array),Tr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(_){const b=void 0===_.code?ge.UNKNOWN:Lm(_.code);return new Ue(b,_.message||"")}(u);t=new Fv(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=la(n,r.document.name),a=oi(r.document.updateTime),u=new Vr({mapValue:{fields:r.document.fields}}),f=Ln.newFoundDocument(i,a,u);t=new up(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=la(n,r.document),a=r.readTime?oi(r.readTime):Rt.min(),u=Ln.newNoDocument(i,a);t=new up([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=la(n,r.document);t=new up([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,a=new hT(r.count||0);t=new Ov(r.targetId,a)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Rt.min():a.readTime?oi(a.readTime):Rt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=hp(this.It),t.addTarget=function(i,a){let u;const f=a.target;return u=au(f)?{documents:Uv(i,f)}:{query:Vv(i,f)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=wE(i,a.resumeToken):a.snapshotVersion.compareTo(Rt.min())>0&&(u.readTime=Jd(i,a.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function AE(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=hp(this.It),t.removeTarget=e,this.Bo(t)}}class xx extends oI{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function SE(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,i){let a=oi(r.updateTime?r.updateTime:i);return a.isEqual(Rt.min())&&(a=oi(i)),new uE(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=oi(e.commitTime);return this.listener.Zo(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=hp(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fp(this.It,r))};this.Bo(t)}}class mb extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ue(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(ge.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.Vo.fo(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ue(ge.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class lI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(dr(t),this.ou=!1):Re("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class cI{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(f=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;ic(u)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(b){const T=Je(b);T._u.add(4),yield bu(T),T.gu.set("Unknown"),T._u.delete(4),yield uh(T)}),function(b){return _.apply(this,arguments)})(u))}))}),this.gu=new lI(r,i)}}function uh(n){return i_.apply(this,arguments)}function i_(){return i_=(0,Ee.Z)(function*(n){if(ic(n))for(const e of n.wu)yield e(!0)}),i_.apply(this,arguments)}function bu(n){return dh.apply(this,arguments)}function dh(){return dh=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),dh.apply(this,arguments)}function wu(n,e){const t=Je(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),vb(t)?s_(t):Iu(t).ko()&&_b(t,e))}function hh(n,e){const t=Je(n),r=Iu(t);t.du.delete(e),r.ko()&&yb(t,e),0===t.du.size&&(r.ko()?r.Fo():ic(t)&&t.gu.set("Unknown"))}function _b(n,e){n.yu.Ot(e.targetId),Iu(n).zo(e)}function yb(n,e){n.yu.Ot(e),Iu(n).Ho(e)}function s_(n){n.yu=new pT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Iu(n).start(),n.gu.uu()}function vb(n){return ic(n)&&!Iu(n).No()&&n.du.size>0}function ic(n){return 0===Je(n)._u.size}function JT(n){n.yu=void 0}function Mx(n){return o_.apply(this,arguments)}function o_(){return o_=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{_b(n,e)})}),o_.apply(this,arguments)}function XT(n,e){return bb.apply(this,arguments)}function bb(){return bb=(0,Ee.Z)(function*(n,e){JT(n),vb(n)?(n.gu.hu(e),s_(n)):n.gu.set("Unknown")}),bb.apply(this,arguments)}function eS(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Fv&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const u=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wb(n,r)}else if(e instanceof up?n.yu.Gt(e):e instanceof Ov?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Rt.min()))try{const r=yield ub(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.yu.te(a);return u.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.du.get(_);b&&i.du.set(_,b.withResumeToken(f.resumeToken,a))}}),u.targetMismatches.forEach(f=>{const _=i.du.get(f);if(!_)return;i.du.set(f,_.withResumeToken(Tr.EMPTY_BYTE_STRING,_.snapshotVersion)),yb(i,f);const b=new ol(_.target,f,1,_.sequenceNumber);_b(i,b)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield wb(n,r)}var r}),uI.apply(this,arguments)}function wb(n,e,t){return dI.apply(this,arguments)}function dI(){return dI=(0,Ee.Z)(function*(n,e,t){if(!Ul(e))throw e;n._u.add(1),yield bu(n),n.gu.set("Offline"),t||(t=()=>ub(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield uh(n)}))}),dI.apply(this,arguments)}function tS(n,e){return e().catch(t=>wb(n,t,e))}function Sp(n){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,Ee.Z)(function*(n){const e=Je(n),t=sc(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;a_(e);)try{const i=yield WT(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,nS(e,i)}catch(i){yield wb(e,i)}hI(e)&&Ib(e)}),Eb.apply(this,arguments)}function a_(n){return ic(n)&&n.fu.length<10}function nS(n,e){n.fu.push(e);const t=sc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function hI(n){return ic(n)&&!sc(n).No()&&n.fu.length>0}function Ib(n){sc(n).start()}function Eu(n){return l_.apply(this,arguments)}function l_(){return l_=(0,Ee.Z)(function*(n){sc(n).eu()}),l_.apply(this,arguments)}function Cb(n){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Ee.Z)(function*(n){const e=sc(n);for(const t of n.fu)e.Xo(t.mutations)}),Ap.apply(this,arguments)}function rS(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=gp.from(r,e,t);yield tS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Sp(n)}),xp.apply(this,arguments)}function Db(n,e){return fh.apply(this,arguments)}function fh(){return fh=(0,Ee.Z)(function*(n,e){var t;e&&sc(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(kv(a=i.code)&&a!==ge.ABORTED){const u=r.fu.shift();sc(r).Oo(),yield tS(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Sp(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),hI(n)&&Ib(n)}),fh.apply(this,arguments)}function iS(n,e){return fI.apply(this,arguments)}function fI(){return fI=(0,Ee.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=ic(t);t._u.add(3),yield bu(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield uh(t)}),fI.apply(this,arguments)}function pI(n,e){return gI.apply(this,arguments)}function gI(){return gI=(0,Ee.Z)(function*(n,e){const t=Je(n);e?(t._u.delete(2),yield uh(t)):e||(t._u.add(2),yield bu(t),t.gu.set("Unknown"))}),gI.apply(this,arguments)}function Iu(n){return n.pu||(n.pu=function(e,t,r){const i=Je(e);return i.su(),new aI(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Mx.bind(null,n),Zr:XT.bind(null,n),Wo:eS.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Oo(),vb(n)?s_(n):n.gu.set("Unknown")):(yield n.pu.stop(),JT(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function sc(n){return n.Iu||(n.Iu=function(e,t,r){const i=Je(e);return i.su(),new xx(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Eu.bind(null,n),Zr:Db.bind(null,n),tu:Cb.bind(null,n),Zo:rS.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Oo(),yield Sp(n)):(yield n.Iu.stop(),n.fu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Tb{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,f=new Tb(e,t,u,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ph(n,e){if(dr("AsyncQueue",`${e}: ${n}`),Ul(n))return new Ue(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class gh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=Yd(),this.sortedSet=new hr(this.comparator)}static emptySet(e){return new gh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new gh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Sb{constructor(){this.Tu=new hr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cu{constructor(e,t,r,i,a,u,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Cu(e,t,gh.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mI{constructor(){this.Au=void 0,this.listeners=[]}}class sS{constructor(){this.queries=new ql(e=>rE(e),lp),this.onlineState="Unknown",this.Ru=new Set}}function Ab(n,e){return c_.apply(this,arguments)}function c_(){return c_=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new mI),i)try{a.Au=yield t.onListen(r)}catch(u){const f=ph(u,`Initialization of query '${Cv(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&Mb(t)}),c_.apply(this,arguments)}function Mp(n,e){return _I.apply(this,arguments)}function _I(){return _I=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),_I.apply(this,arguments)}function yI(n,e){const t=Je(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.Pu(i)&&(r=!0);u.Au=i}}r&&Mb(t)}function xb(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Mb(n){n.Ru.forEach(e=>{e.next()})}class Rb{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class Rx{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class oS{constructor(e){this.It=e}Ji(e){return la(this.It,e)}Yi(e){return e.metadata.exists?TE(this.It,e.document,!1):Ln.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return oi(e)}}class aS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vI(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new oS(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||qt()).add(a);t.set(u,f)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function db(n,e,t,r){return e_.apply(this,arguments)}(e.localStore,new oS(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield iI(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function vI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bI{constructor(e){this.key=e}}class lS{constructor(e){this.key=e}}class cS{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=qt(),this.mutatedKeys=qt(),this.Ku=iE(e),this.Gu=new gh(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Sb,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,A)=>{const F=i.get(T),$=Dv(this.query,A)?A:null,Z=!!F&&this.mutatedKeys.has(F.key),le=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Te=!1;F&&$?F.data.isEqual($.data)?Z!==le&&(r.track({type:3,doc:$}),Te=!0):this.zu(F,$)||(r.track({type:2,doc:$}),Te=!0,(_&&this.Ku($,_)>0||b&&this.Ku($,b)<0)&&(f=!0)):!F&&$?(r.track({type:0,doc:$}),Te=!0):F&&!$&&(r.track({type:1,doc:F}),Te=!0,(_||b)&&(f=!0)),Te&&($?(u=u.add($),a=le?a.add(T):a.delete(T)):(u=u.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const T="F"===this.query.limitType?u.last():u.first();u=u.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{Gu:u,Wu:r,$i:f,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((b,T)=>function(A,F){const $=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return $(A)-$(F)}(b.type,T.type)||this.Ku(b.doc,T.doc)),this.Hu(r);const u=t?this.Ju():[],f=0===this.qu.size&&this.current?1:0,_=f!==this.Uu;return this.Uu=f,0!==a.length||_?{snapshot:new Cu(this.query,e.Gu,i,a,e.mutatedKeys,0===f,_,!1),Yu:u}:{Yu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Sb,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=qt(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new lS(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new bI(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=qt();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return Cu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class kx{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Nx{constructor(e){this.key=e,this.ec=!1}}class Px{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.nc={},this.sc=new ql(f=>rE(f),lp),this.ic=new Map,this.rc=new Set,this.oc=new hr(Ye.comparator),this.uc=new Map,this.cc=new oh,this.ac={},this.hc=new Map,this.lc=tc.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function uS(n,e){return wI.apply(this,arguments)}function wI(){return wI=(0,Ee.Z)(function*(n,e){const t=pS(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const u=yield rc(t.localStore,jr(e));t.isPrimaryClient&&wu(t.remoteStore,u);const f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield EI(t,e,r,"current"===f)}return i}),wI.apply(this,arguments)}function EI(n,e,t,r){return II.apply(this,arguments)}function II(){return II=(0,Ee.Z)(function*(n,e,t,r){n.dc=(T,A,F)=>{return($=(0,Ee.Z)(function*(Z,le,Te,Qe){let at=le.view.ju(Te);at.$i&&(at=yield Jm(Z.localStore,le.query,!1).then(({documents:kt})=>le.view.ju(kt,at)));const Ct=Qe&&Qe.targetChanges.get(le.targetId),ft=le.view.applyChanges(at,Z.isPrimaryClient,Ct);return Ze(Z,le.targetId,ft.Yu),ft.snapshot}),function(Z,le,Te,Qe){return $.apply(this,arguments)})(n,T,A,F);var $};const i=yield Jm(n.localStore,e,!0),a=new cS(e,i.Hi),u=a.ju(i.documents),f=pu.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(u,n.isPrimaryClient,f);Ze(n,t,_.Yu);const b=new kx(e,t,a);return n.sc.set(e,b),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),II.apply(this,arguments)}function Ox(n,e){return CI.apply(this,arguments)}function CI(){return CI=(0,Ee.Z)(function*(n,e){const t=Je(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!lp(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield lh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hh(t.remoteStore,r.targetId),Ce(t,r.targetId)}).catch(rl))):(Ce(t,r.targetId),yield lh(t.localStore,r.targetId,!0))}),CI.apply(this,arguments)}function s(){return s=(0,Ee.Z)(function*(n,e,t){const r=gS(n);try{const i=yield function(a,u){const f=Je(a),_=Jn.now(),b=u.reduce((F,$)=>F.add($.key),qt());let T,A;return f.persistence.runTransaction("Locally write mutations","readwrite",F=>{let $=yi(),Z=qt();return f.Gi.getEntries(F,b).next(le=>{$=le,$.forEach((Te,Qe)=>{Qe.isValidDocument()||(Z=Z.add(Te))})}).next(()=>f.localDocuments.getOverlayedDocuments(F,$)).next(le=>{T=le;const Te=[];for(const Qe of u){const at=dT(Qe,T.get(Qe.key).overlayedDocument);null!=at&&Te.push(new aa(Qe.key,at,Qw(at.value.mapValue),Xn.exists(!0)))}return f.mutationQueue.addMutationBatch(F,_,Te,u)}).next(le=>{A=le;const Te=le.applyToLocalDocumentSet(T,Z);return f.documentOverlayCache.saveOverlays(F,le.batchId,Te)})}).then(()=>({batchId:A.batchId,changes:fu(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,f){let _=a.ac[a.currentUser.toKey()];_||(_=new hr(Tt)),_=_.insert(u,f),a.ac[a.currentUser.toKey()]=_}(r,i.batchId,t),yield ke(r,i.changes),yield Sp(r.remoteStore)}catch(i){const a=ph(i,"Failed to persist write");t.reject(a)}}),s.apply(this,arguments)}function o(n,e){return l.apply(this,arguments)}function l(){return l=(0,Ee.Z)(function*(n,e){const t=Je(n);try{const r=yield Ax(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.uc.get(a);u&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.ec=!0:i.modifiedDocuments.size>0?Lt(u.ec):i.removedDocuments.size>0&&(Lt(u.ec),u.ec=!1))}),yield ke(t,r,e)}catch(r){yield rl(r)}}),l.apply(this,arguments)}function c(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,u)=>{const f=u.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,u){const f=Je(a);f.onlineState=u;let _=!1;f.queries.forEach((b,T)=>{for(const A of T.listeners)A.bu(u)&&(_=!0)}),_&&Mb(f)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h(n,e,t){return p.apply(this,arguments)}function p(){return p=(0,Ee.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let u=new hr(Ye.comparator);u=u.insert(a,Ln.newNoDocument(a,Rt.min()));const f=qt().add(a),_=new Qd(Rt.min(),new Map,new Dn(Tt),u,f);yield o(r,_),r.oc=r.oc.remove(a),r.uc.delete(e),At(r)}else yield lh(r.localStore,e,!1).then(()=>Ce(r,e,t)).catch(rl)}),p.apply(this,arguments)}function y(n,e){return w.apply(this,arguments)}function w(){return w=(0,Ee.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield tI(t.localStore,e);re(t,r,null),K(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ke(t,i)}catch(i){yield rl(i)}}),w.apply(this,arguments)}function I(n,e,t){return S.apply(this,arguments)}function S(){return S=(0,Ee.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,u){const f=Je(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return f.mutationQueue.lookupMutationBatch(_,u).next(T=>(Lt(null!==T),b=T.keys(),f.mutationQueue.removeMutationBatch(_,T))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,b,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>f.localDocuments.getDocuments(_,b))})}(r.localStore,e);re(r,e,t),K(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ke(r,i)}catch(i){yield rl(i)}}),S.apply(this,arguments)}function O(){return O=(0,Ee.Z)(function*(n,e){const t=Je(n);ic(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Je(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=ph(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),O.apply(this,arguments)}function K(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function re(n,e,t){const r=Je(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Ce(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||He(n,r)})}function He(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(hh(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),At(n))}function Ze(n,e,t){for(const r of t)r instanceof bI?(n.cc.addReference(r.key,e),ct(n,r)):r instanceof lS?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||He(n,r.key)):dt()}function ct(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.rc.add(r),At(n))}function At(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ye(cn.fromString(e)),r=n.lc.next();n.uc.set(r,new Nx(t)),n.oc=n.oc.insert(t,r),wu(n.remoteStore,new ol(jr(ap(t.path)),r,2,$i.at))}}function ke(n,e,t){return It.apply(this,arguments)}function It(){return It=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],u=[];var f;r.sc.isEmpty()||(r.sc.forEach((f,_)=>{u.push(r.dc(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const T=JE.Ci(_.targetId,b);a.push(T)}}))}),yield Promise.all(u),r.nc.Wo(i),yield(f=(0,Ee.Z)(function*(_,b){const T=Je(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>de.forEach(b,F=>de.forEach(F.Si,$=>T.persistence.referenceDelegate.addReference(A,F.targetId,$)).next(()=>de.forEach(F.Di,$=>T.persistence.referenceDelegate.removeReference(A,F.targetId,$)))))}catch(A){if(!Ul(A))throw A;Re("LocalStore","Failed to update sequence numbers: "+A)}for(const A of b){const F=A.targetId;if(!A.fromCache){const $=T.Ui.get(F),le=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);T.Ui=T.Ui.insert(F,le)}}}),function(_,b){return f.apply(this,arguments)})(r.localStore,a))}),It.apply(this,arguments)}function sn(n,e){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,Ee.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield GT(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(u=>{u.forEach(f=>{f.reject(new Ue(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ke(t,r.ji)}var i}),Mn.apply(this,arguments)}function Du(n,e){const t=Je(n),r=t.uc.get(e);if(r&&r.ec)return qt().add(r.key);{let i=qt();const a=t.ic.get(e);if(!a)return i;for(const u of a){const f=t.sc.get(u);i=i.unionWith(f.view.Qu)}return i}}function kb(n,e){return Rp.apply(this,arguments)}function Rp(){return Rp=(0,Ee.Z)(function*(n,e){const t=Je(n),r=yield Jm(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&Ze(t,e.targetId,i.Yu),i}),Rp.apply(this,arguments)}function Nb(n,e){return kp.apply(this,arguments)}function kp(){return kp=(0,Ee.Z)(function*(n,e){const t=Je(n);return nI(t.localStore,e).then(r=>ke(t,r))}),kp.apply(this,arguments)}function Pb(n,e,t,r){return Np.apply(this,arguments)}function Np(){return Np=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(u,f){const _=Je(u),b=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.Tn(T,f).next(A=>A?_.localDocuments.getDocuments(T,A):de.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Sp(i.remoteStore):"acknowledged"===t||"rejected"===t?(re(i,e,r||null),K(i,e),f=e,Je(Je(i.localStore).mutationQueue).An(f)):dt(),yield ke(i,a)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),Np.apply(this,arguments)}function Pp(){return Pp=(0,Ee.Z)(function*(n,e){const t=Je(n);if(pS(t),gS(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield u_(t,r.toArray());t.fc=!0,yield pI(t.remoteStore,!0);for(const a of i)wu(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Ce(t,u),lh(t.localStore,u,!0))),hh(t.remoteStore,u)}),yield i,yield u_(t,r),function(a){const u=Je(a);u.uc.forEach((f,_)=>{hh(u.remoteStore,_)}),u.cc.fs(),u.uc=new Map,u.oc=new hr(Ye.comparator)}(t),t.fc=!1,yield pI(t.remoteStore,!1)}}),Pp.apply(this,arguments)}function u_(n,e,t){return dS.apply(this,arguments)}function dS(){return dS=(0,Ee.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const u of e){let f;const _=r.ic.get(u);if(_&&0!==_.length){f=yield rc(r.localStore,jr(_[0]));for(const b of _){const T=r.sc.get(b),A=yield kb(r,T);A.snapshot&&a.push(A.snapshot)}}else{const b=yield Xm(r.localStore,u);f=yield rc(r.localStore,b),yield EI(r,Lx(b),u,!1)}i.push(f)}return r.nc.Wo(a),i}),dS.apply(this,arguments)}function Lx(n){return oT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function c1(n){const e=Je(n);return Je(Je(e.localStore).persistence).vi()}function u1(n,e,t,r){return hS.apply(this,arguments)}function hS(){return hS=(0,Ee.Z)(function*(n,e,t,r){const i=Je(n);if(i.fc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield nI(i.localStore,Tv(a[0])),f=Qd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ke(i,u,f);break}case"rejected":yield lh(i.localStore,e,!0),Ce(i,e,r);break;default:dt()}}),hS.apply(this,arguments)}function d1(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,Ee.Z)(function*(n,e,t){const r=pS(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Re("SyncEngine","Adding an already active target "+i);continue}const a=yield Xm(r.localStore,i),u=yield rc(r.localStore,a);yield EI(r,Lx(a),u.targetId,!1),wu(r.remoteStore,u)}for(const i of t)r.ic.has(i)&&(yield lh(r.localStore,i,!1).then(()=>{hh(r.remoteStore,i),Ce(r,i)}).catch(rl))}}),fS.apply(this,arguments)}function pS(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Du.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h.bind(null,e),e.nc.Wo=yI.bind(null,e.eventManager),e.nc._c=xb.bind(null,e.eventManager),e}function gS(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I.bind(null,e),e}class Bx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=n_(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return eI(this.persistence,new XE,e.initialUser,this.It)}gc(e){return new KE(ob.Bs,this.It)}mc(e){return new da}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ux extends Bx{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield gS(r.Ec.syncEngine),yield Sp(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return eI(this.persistence,new XE,e.initialUser,this.It)}Ic(e,t){return new HE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new QD(t,this.persistence);return new YD(e.asyncQueue,r)}gc(e){const t=QE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fs.withCacheSize(this.cacheSizeBytes):fs.DEFAULT;return new ah(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,sI(),Tp(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new da}}class f1 extends Ux{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof Dp&&(r.sharedClientState.syncEngine={Fr:Pb.bind(null,i),$r:u1.bind(null,i),Br:d1.bind(null,i),vi:c1.bind(null,i),Or:Nb.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,Ee.Z)(function*(u){yield function Ob(n,e){return Pp.apply(this,arguments)}(r.Ec.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}mc(e){const t=sI();if(!Dp.C(t))throw new Ue(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=QE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mS{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>c(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=sn.bind(null,r.syncEngine),yield pI(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sS}createDatastore(e){const t=n_(e.databaseInfo.databaseId),r=new QT(e.databaseInfo);return new mb(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>c(this.syncEngine,f,0),u=KT.C()?new KT:new qT,new cI(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,f,_,b){const T=new Px(r,i,a,u,f,_);return b&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Je(t);Re("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield bu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Vx(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class DI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class p1{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ur,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new Rx(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class g1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,u){const f=Je(a),_=hp(f.It)+"/documents",b={documents:u.map($=>dp(f.It,$))},T=yield f.fo("BatchGetDocuments",_,b,u.length),A=new Map;T.forEach($=>{const Z=function _T(n,e){return"found"in e?function(t,r){Lt(!!r.found);const i=la(t,r.found.name),a=oi(r.found.updateTime),u=new Vr({mapValue:{fields:r.found.fields}});return Ln.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const i=la(t,r.missing),a=oi(r.readTime);return Ln.newNoDocument(i,a)}(n,e):dt()}(f.It,$);A.set(Z.key.toString(),Z)});const F=[];return u.forEach($=>{const Z=A.get($.toString());Lt(!!Z),F.push(Z)}),F}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ye.fromPath(i);e.mutations.push(new Rv(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const u=Je(i),f=hp(u.It)+"/documents",_={writes:a.map(b=>fp(u.It,b))};yield u.co("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Rt.min())?Xn.exists(!1):Xn.updateTime(t):Xn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Ue(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xn.updateTime(t)}return Xn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class m1{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new r_(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,Ee.Z)(function*(){const t=new g1(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!tp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!kv(t)}return!1}}class _1{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ri.UNAUTHENTICATED,this.clientId=As.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ee.Z)(function*(f){Re("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Re("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=ph(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function jx(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield GT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),_S.apply(this,arguments)}function Hx(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vS(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>iS(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>iS(e.remoteStore,a)),n.onlineComponents=e}),yS.apply(this,arguments)}function vS(n){return bS.apply(this,arguments)}function bS(){return bS=(0,Ee.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield jx(n,new Bx)),n.offlineComponents}),bS.apply(this,arguments)}function TI(n){return wS.apply(this,arguments)}function wS(){return wS=(0,Ee.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield Hx(n,new mS)),n.onlineComponents}),wS.apply(this,arguments)}function $x(n){return vS(n).then(e=>e.persistence)}function SI(n){return vS(n).then(e=>e.localStore)}function zx(n){return TI(n).then(e=>e.remoteStore)}function ES(n){return TI(n).then(e=>e.syncEngine)}function d_(n){return IS.apply(this,arguments)}function IS(){return IS=(0,Ee.Z)(function*(n){const e=yield TI(n),t=e.eventManager;return t.onListen=uS.bind(null,e.syncEngine),t.onUnlisten=Ox.bind(null,e.syncEngine),t}),IS.apply(this,arguments)}function Gx(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,f,_){const b=new DI({next:A=>{a.enqueueAndForget(()=>Mp(i,T));const F=A.docs.has(u);!F&&A.fromCache?_.reject(new Ue(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&A.fromCache&&f&&"server"===f.source?_.reject(new Ue(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new Rb(ap(u.path),b,{includeMetadataChanges:!0,Nu:!0});return Ab(i,T)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}function Wx(n,e,t={}){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,u,f,_){const b=new DI({next:A=>{a.enqueueAndForget(()=>Mp(i,T)),A.fromCache&&"server"===f.source?_.reject(new Ue(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),T=new Rb(u,b,{includeMetadataChanges:!0,Nu:!0});return Ab(i,T)}(yield d_(n),n.asyncQueue,e,t,r)})),r.promise}const qx=new Map;function CS(n,e,t){if(!t)throw new Ue(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kx(n,e,t,r){if(!0===e&&!0===r)throw new Ue(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zx(n){if(!Ye.isDocumentKey(n))throw new Ue(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yx(n){if(Ye.isDocumentKey(n))throw new Ue(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function AI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=AI(n);throw new Ue(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Qx(n,e){if(e<=0)throw new Ue(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Jx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Kx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fb{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new GD;switch(t.type){case"gapi":return new rv(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qx.get(e);t&&(Re("ComponentProvider","Removing Datastore"),qx.delete(e),t.terminate())}(this),Promise.resolve()}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class oc extends Wi{constructor(e,t,r){super(e,t,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new Ye(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function Xx(n,e,...t){if(n=(0,en.m9)(n),CS("collection","path",e),n instanceof Fb){const r=cn.fromString(e,...t);return Yx(r),new oc(n,null,r)}{if(!(n instanceof cr||n instanceof oc))throw new Ue(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return Yx(r),new oc(n.firestore,null,r)}}function Lb(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=As.R()),CS("doc","path",e),n instanceof Fb){const r=cn.fromString(e,...t);return Zx(r),new cr(n,null,new Ye(r))}{if(!(n instanceof cr||n instanceof oc))throw new Ue(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return Zx(r),new cr(n.firestore,n instanceof oc?n.converter:null,new Ye(r))}}function eM(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof cr||n instanceof oc)&&(e instanceof cr||e instanceof oc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function tM(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&lp(n._query,e._query)&&n.converter===e.converter}class A1{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new r_(this,"async_queue_retry"),this.jc=()=>{const t=Tp();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=Tp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=Tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ur;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Ul(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,dr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=Tb.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&dt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function DS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class x1{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends Fb{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new A1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nM(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||nM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function nM(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new su(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new _1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function rM(n,e,t){const r=new Ur;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield jx(n,t),yield Hx(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;Xc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function iM(n){if(n._initialized||n._terminated)throw new Ue(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ac{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ac(Tr.fromBase64String(e))}catch(t){throw new Ue(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ac(Tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Op{constructor(e){this._methodName=e}}class xI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const V1=/^__.*__$/;class j1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new hu(e,this.data,t,this.fieldTransforms)}}class sM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function oM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class MI{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new MI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return NI(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(oM(this.na)&&V1.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class H1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||n_(e)}fa(e,t,r,i=!1){return new MI({na:e,methodName:t,la:r,path:Fn.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Fp(n){const e=n._freezeSettings(),t=n_(n._databaseId);return new H1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function RI(n,e,t,r,i,a={}){const u=n.fa(a.merge||a.mergeFields?2:0,e,t,i);xS("Data must be an object, but it was:",u,r);const f=cM(r,u);let _,b;if(a.merge)_=new zi(u.fieldMask),b=u.fieldTransforms;else if(a.mergeFields){const T=[];for(const A of a.mergeFields){const F=MS(e,A,t);if(!u.contains(F))throw new Ue(ge.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);dM(T,F)||T.push(F)}_=new zi(T),b=u.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,b=u.fieldTransforms;return new j1(new Vr(f),_,b)}class Bb extends Op{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bb}}function aM(n,e,t){return new MI({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class TS extends Op{_toFieldTransform(e){return new du(e.path,new qd)}isEqual(e){return e instanceof TS}}class $1 extends Op{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=aM(this,e,!0),r=this.da.map(a=>Lp(a,t)),i=new sl(r);return new du(e.path,i)}isEqual(e){return this===e}}class z1 extends Op{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=aM(this,e,!0),r=this.da.map(a=>Lp(a,t)),i=new Wl(r);return new du(e.path,i)}isEqual(e){return this===e}}class G1 extends Op{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Kd(e.It,Sv(e.It,this._a));return new du(e.path,t)}isEqual(e){return this===e}}function SS(n,e,t,r){const i=n.fa(1,e,t);xS("Data must be an object, but it was:",i,r);const a=[],u=Vr.empty();ru(r,(_,b)=>{const T=kI(e,_,t);b=(0,en.m9)(b);const A=i.ua(T);if(b instanceof Bb)a.push(T);else{const F=Lp(b,A);null!=F&&(a.push(T),u.set(T,F))}});const f=new zi(a);return new sM(u,f,i.fieldTransforms)}function AS(n,e,t,r,i,a){const u=n.fa(1,e,t),f=[MS(e,r,t)],_=[i];if(a.length%2!=0)throw new Ue(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<a.length;F+=2)f.push(MS(e,a[F])),_.push(a[F+1]);const b=[],T=Vr.empty();for(let F=f.length-1;F>=0;--F)if(!dM(b,f[F])){const $=f[F];let Z=_[F];Z=(0,en.m9)(Z);const le=u.ua($);if(Z instanceof Bb)b.push($);else{const Te=Lp(Z,le);null!=Te&&(b.push($),T.set($,Te))}}const A=new zi(b);return new sM(T,A,u.fieldTransforms)}function lM(n,e,t,r=!1){return Lp(t,n.fa(r?4:3,e))}function Lp(n,e){if(uM(n=(0,en.m9)(n)))return xS("Unsupported field value:",e,n),cM(n,e);if(n instanceof Op)return function(t,r){if(!oM(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let f=Lp(u,r.ca(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sv(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Jn.fromDate(t);return{timestampValue:Jd(r.It,i)}}if(t instanceof Jn){const i=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jd(r.It,i)}}if(t instanceof xI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ac)return{bytesValue:wE(r.It,t._byteString)};if(t instanceof cr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:EE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${AI(t)}`)}(n,e)}function cM(n,e){const t={};return Gw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(n,(r,i)=>{const a=Lp(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function uM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof xI||n instanceof ac||n instanceof cr||n instanceof Op)}function xS(n,e,t){if(!uM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=AI(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function MS(n,e,t){if((e=(0,en.m9)(e))instanceof Tu)return e._internalPath;if("string"==typeof e)return kI(n,e);throw NI("Field path arguments must be of type string or ",n,!1,void 0,t)}const W1=new RegExp("[~\\*/\\[\\]]");function kI(n,e,t){if(e.search(W1)>=0)throw NI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tu(...e.split("."))._internalPath}catch{throw NI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function NI(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||u)&&(_+=" (found",a&&(_+=` in field ${r}`),u&&(_+=` in document ${i}`),_+=")"),new Ue(ge.INVALID_ARGUMENT,f+n+_)}function dM(n,e){return n.some(t=>t.isEqual(e))}class Ub{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new q1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class q1 extends Ub{data(){return super.data()}}function PI(n,e){return"string"==typeof e?kI(n,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}class Bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Su extends Ub{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Vb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vb extends Su{data(e={}){return super.data(e)}}class mh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Vb(this._firestore,this._userDataWriter,r.key,r,new Bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new Vb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new Vb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==u.type&&(_=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),b=a.indexOf(u.doc.key)),{type:K1(u.type),doc:f,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function K1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function hM(n,e){return n instanceof Su&&e instanceof Su?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mh&&e instanceof mh&&n._firestore===e._firestore&&tM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function fM(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jb{}function _h(n,...e){for(const t of e)n=t._apply(n);return n}class Z1 extends jb{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Fp(e.firestore),r=function(i,a,u,f,_,b,T){let A;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ue(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){vM(T,b);const $=[];for(const Z of T)$.push(yM(f,i,Z));A={arrayValue:{values:$}}}else A=yM(f,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||vM(T,b),A=lM(u,"where",T,"in"===b||"not-in"===b);const F=si.create(_,b,A);return function($,Z){if(Z.dt()){const Te=Ev($);if(null!==Te&&!Te.isEqual(Z.field))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${Z.field.toString()}'`);const Qe=Wd($);null!==Qe&&bM(0,Z.field,Qe)}const le=function(Te,Qe){for(const at of Te.filters)if(Qe.indexOf(at.op)>=0)return at.op;return null}($,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==le)throw new Ue(ge.INVALID_ARGUMENT,le===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${le.toString()}' filters.`)}(i,F),F}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Wi(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Gl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Q1 extends jb{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new lu(i,a);return function(f,_){if(null===Wd(f)){const b=Ev(f);null!==b&&bM(0,b,_.field)}}(r,u),u}(e._query,this.wa,this.ya);return new Wi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Gl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pM extends jb{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Wi(e.firestore,e.converter,Nm(e._query,this.pa,this.Ia))}}class gM extends jb{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=_M(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(i=t,new Gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class mM extends jb{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=_M(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(i=t,new Gl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function _M(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof Ub)return function(i,a,u,f,_){if(!f)throw new Ue(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const b=[];for(const T of cu(i))if(T.field.isKeyField())b.push(Ms(a,f.key));else{const A=f.data.field(T.field);if(Rm(A))throw new Ue(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const F=T.field.canonicalString();throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(A)}return new zl(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Fp(n.firestore);return function(a,u,f,_,b,T){const A=a.explicitOrderBy;if(b.length>A.length)throw new Ue(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let $=0;$<b.length;$++){const Z=b[$];if(A[$].field.isKeyField()){if("string"!=typeof Z)throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Z}`);if(!Iv(a)&&-1!==Z.indexOf("/"))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Z}' contains a slash.`);const le=a.path.child(cn.fromString(Z));if(!Ye.isDocumentKey(le))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const Te=new Ye(le);F.push(Ms(u,Te))}else{const le=lM(f,_,Z);F.push(le)}}return new zl(F,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function yM(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Ue(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iv(e)&&-1!==t.indexOf("/"))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!Ye.isDocumentKey(r))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ms(n,new Ye(r))}if(t instanceof cr)return Ms(n,t._key);throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${AI(t)}.`)}function vM(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function bM(n,e,t){if(!t.isEqual(e))throw new Ue(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const sN={maxAttempts:5};class RS{convertValue(e,t="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return ru(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new xI(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hd(e));default:return null}}convertTimestamp(e){const t=il(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Lt(th(r));const i=new jl(r.get(1),r.get(3)),a=new Ye(r.popFirst(5));return i.isEqual(t)||dr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function OI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class oN extends RS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class wM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fp(e)}set(e,t,r){this._verifyNotCommitted();const i=yh(e,this._firestore),a=OI(i.converter,t,r),u=RI(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Xn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=yh(e,this._firestore);let u;return u="string"==typeof(t=(0,en.m9)(t))||t instanceof Tu?AS(this._dataReader,"WriteBatch.update",a._key,t,r,i):SS(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yh(e,this._firestore);return this._mutations=this._mutations.concat(new Zd(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yh(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Ue(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Up extends RS{constructor(e){super(),this.firestore=e}convertBytes(e){return new ac(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function EM(n,e,t){n=dn(n,cr);const r=dn(n.firestore,pr),i=OI(n.converter,e,t);return h_(r,[RI(Fp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Xn.none())])}function IM(n,e,t,...r){n=dn(n,cr);const i=dn(n.firestore,pr),a=Fp(i);let u;return u="string"==typeof(e=(0,en.m9)(e))||e instanceof Tu?AS(a,"updateDoc",n._key,e,t,r):SS(a,"updateDoc",n._key,e),h_(i,[u.toMutation(n._key,Xn.exists(!0))])}function CM(n){return h_(dn(n.firestore,pr),[new Zd(n._key,Xn.none())])}function DM(n,...e){var t,r,i;n=(0,en.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||DS(e[u])||(a=e[u],u++);const f={includeMetadataChanges:a.includeMetadataChanges};if(DS(e[u])){const A=e[u];e[u]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[u+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[u+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,b,T;if(n instanceof cr)b=dn(n.firestore,pr),T=ap(n._key.path),_={next:A=>{e[u]&&e[u](kS(b,n,A))},error:e[u+1],complete:e[u+2]};else{const A=dn(n,Wi);b=dn(A.firestore,pr),T=A._query;const F=new Up(b);_={next:$=>{e[u]&&e[u](new mh(b,F,A,$))},error:e[u+1],complete:e[u+2]},fM(n._query)}return function(A,F,$,Z){const le=new DI(Z),Te=new Rb(F,le,$);return A.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Ab(yield d_(A),Te)})),()=>{le.Rc(),A.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Mp(yield d_(A),Te)}))}}($r(b),T,f,_)}function h_(n,e){return function(t,r){const i=new Ur;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function Fx(n,e,t){return s.apply(this,arguments)}(yield ES(t),r,i)})),i.promise}($r(n),e)}function kS(n,e,t){const r=t.docs.get(e._key),i=new Up(n);return new Su(n,i,e._key,r,new Bp(t.hasPendingWrites,t.fromCache),e.converter)}class gN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Fp(e)}get(e){const t=yh(e,this._firestore),r=new oN(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const a=i[0];if(a.isFoundDocument())return new Ub(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ub(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=yh(e,this._firestore),a=OI(i.converter,t,r),u=RI(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=yh(e,this._firestore);let u;return u="string"==typeof(t=(0,en.m9)(t))||t instanceof Tu?AS(this._dataReader,"Transaction.update",a._key,t,r,i):SS(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yh(e,this._firestore),r=new Up(this._firestore);return super.get(e).then(i=>new Su(this._firestore,r,t._key,i._document,new Bp(!1,!1),t.converter))}}function NS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SM(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function AM(){if(!function qw(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vd=so.SDK_VERSION,(0,so._registerComponent)(new jg.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),u=new pr(new _x(t.getProvider("auth-internal")),new WD(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ue(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,so.registerVersion)(ev,"3.4.15",n),(0,so.registerVersion)(ev,"3.4.15","esm2017")}();class Hb{constructor(e){this._delegate=e}static fromBase64String(e){return AM(),new Hb(ac.fromBase64String(e))}static fromUint8Array(e){return SM(),new Hb(ac.fromUint8Array(e))}toBase64(){return AM(),this._delegate.toBase64()}toUint8Array(){return SM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PS(n){return function CN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class DN{enableIndexedDbPersistence(e,t){return function k1(n,e){iM(n=dn(n,pr));const t=$r(n),r=n._freezeSettings(),i=new mS;return rM(t,i,new Ux(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function N1(n){iM(n=dn(n,pr));const e=$r(n),t=n._freezeSettings(),r=new mS;return rM(e,r,new f1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function P1(n){if(n._initialized&&!n._terminated)throw new Ue(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ur;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!xs.C())return Promise.resolve();const i=r+"main";yield xs.delete(i)}),function(r){return t.apply(this,arguments)})(QE(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Xc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function T1(n,e,t,r={}){var i;const a=(n=dn(n,Fb))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Xc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,f;if("string"==typeof r.mockUserToken)u=r.mockUserToken,f=ri.MOCK_USER;else{u=(0,en.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ue(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ri(_)}n._authCredentials=new Vw(new nv(u,f))}}(this._delegate,e,t,r)}enableNetwork(){return function F1(n){return function y1(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield $x(n),t=yield zx(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i._u.delete(0),uh(i)}(t)}))}($r(n=dn(n,pr)))}(this._delegate)}disableNetwork(){return function L1(n){return function v1(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield $x(n),t=yield zx(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=Je(i);a._u.add(0),yield bu(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}($r(n=dn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Kx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function O1(n){return function(e){const t=new Ur;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function R(n,e){return O.apply(this,arguments)}(yield ES(e),t)})),t.promise}($r(n=dn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function pN(n,e){return function E1(n,e){const t=new DI(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield d_(n),i=t,Je(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield d_(n),i=t,void Je(r).Ru.delete(i);var r,i}))}}($r(n=dn(n,pr)),DS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new f_(this,Xx(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,Lb(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function S1(n,e){if(n=dn(n,Fb),CS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new Gl(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function mN(n,e,t){n=dn(n,pr);const r=Object.assign(Object.assign({},sN),t);return function(i){if(i.maxAttempts<1)throw new Ue(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function I1(n,e,t){const r=new Ur;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const i=yield(a=n,TI(a).then(u=>u.datastore));var a;new m1(n.asyncQueue,i,t,e,r).run()})),r.promise}($r(n),i=>e(new gN(n,i)),r)}(this._delegate,t=>e(new MM(this,t)))}batch(){return $r(this._delegate),new RM(new wM(this._delegate,e=>h_(this._delegate,e)))}loadBundle(e){return function B1(n,e){const t=$r(n=dn(n,pr)),r=new x1;return function C1(n,e,t,r){const i=function(a,u){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,b){if(_ instanceof Uint8Array)return Vx(_,b);if(_ instanceof ArrayBuffer)return Vx(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new p1(_,u);var _}(t,n_(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function h1(n,e,t){const r=Je(n);var i;(i=(0,Ee.Z)(function*(a,u,f){try{const _=yield u.getMetadata();if(yield function(F,$){const Z=Je(F),le=oi($.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Te=>Z.Ns.getBundleMetadata(Te,$.id)).then(Te=>!!Te&&Te.createTime.compareTo(le)>=0)}(a.localStore,_))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=_).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(vI(_));const b=new aS(_,a.localStore,u.It);let T=yield u.wc();for(;T;){const F=yield b.Ou(T);F&&f._updateProgress(F),T=yield u.wc()}const A=yield b.complete();return yield ke(a,A.Bu,void 0),yield function(F,$){const Z=Je(F);return Z.persistence.runTransaction("Save bundle","readwrite",le=>Z.Ns.saveBundleMetadata(le,$))}(a.localStore,_),f._completeWith(A.progress),Promise.resolve(A.$u)}catch(_){return Xc("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var F}),function(a,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ES(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function U1(n,e){return function D1(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield SI(n),e)}))}($r(n=dn(n,pr)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class FI extends RS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hb(new ac(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class MM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}get(e){const t=jp(e);return this._delegate.get(t).then(r=>new $b(this._firestore,new Su(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jp(e);return r?(NS("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}}class RM{constructor(e){this._delegate=e}set(e,t,r){const i=jp(e);return r?(NS("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=jp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=jp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Vb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Vp(e,new FI(e),t),i.set(t,a)),a}}Vp.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new cr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new ha(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new f_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new f_(this.firestore,Xx(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof cr&&eM(this._delegate,e)}set(e,t){t=NS("DocumentReference.set",t);try{return t?EM(this._delegate,e,t):EM(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?IM(this._delegate,e):IM(this._delegate,e,t,...r)}catch(i){throw ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return CM(this._delegate)}onSnapshot(...e){const t=kM(e),r=NM(e,i=>new $b(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return DM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function lN(n){n=dn(n,cr);const e=dn(n.firestore,pr),t=$r(e),r=new Up(e);return function b1(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const f=yield function(_,b){const T=Je(_);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,b))}(i,a);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Ue(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=ph(f,`Failed to get document '${a} from cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield SI(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Su(e,r,n._key,i,new Bp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function cN(n){n=dn(n,cr);const e=dn(n.firestore,pr);return Gx($r(e),n._key,{source:"server"}).then(t=>kS(e,n,t))}(this._delegate):function aN(n){n=dn(n,cr);const e=dn(n.firestore,pr);return Gx($r(e),n._key).then(t=>kS(e,n,t))}(this._delegate),t.then(r=>new $b(this.firestore,new Su(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function kM(n){for(const e of n)if("object"==typeof e&&!PS(e))return e;return{}}function NM(n,e){var t,r;let i;return i=PS(n[0])?n[0]:PS(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $b{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return hM(this._delegate,e._delegate)}}class zb extends $b{data(e){const t=this._delegate.data(e);return function Uw(n,e){n||dt()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new FI(e)}where(e,t,r){try{return new gs(this.firestore,_h(this._delegate,function Y1(n,e,t){const r=e,i=PI("where",n);return new Z1(i,r,t)}(e,t,r)))}catch(i){throw ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,_h(this._delegate,function J1(n,e="asc"){const t=e,r=PI("orderBy",n);return new Q1(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,_h(this._delegate,function X1(n){return Qx("limit",n),new pM("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,_h(this._delegate,function eN(n){return Qx("limitToLast",n),new pM("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,_h(this._delegate,function tN(...n){return new gM("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,_h(this._delegate,function nN(...n){return new gM("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,_h(this._delegate,function rN(...n){return new mM("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,_h(this._delegate,function iN(...n){return new mM("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return tM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function dN(n){n=dn(n,Wi);const e=dn(n.firestore,pr),t=$r(e),r=new Up(e);return function w1(n,e){const t=new Ur;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,u){try{const f=yield Jm(i,a,!0),_=new cS(a,f.Hi),b=_.ju(f.documents),T=_.applyChanges(b,!1);u.resolve(T.snapshot)}catch(f){const _=ph(f,`Failed to execute query '${a} against cache`);u.reject(_)}}),function(i,a,u){return r.apply(this,arguments)})(yield SI(n),e,t);var r})),t.promise}(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate):"server"===e?.source?function hN(n){n=dn(n,Wi);const e=dn(n.firestore,pr),t=$r(e),r=new Up(e);return Wx(t,n._query,{source:"server"}).then(i=>new mh(e,r,n,i))}(this._delegate):function uN(n){n=dn(n,Wi);const e=dn(n.firestore,pr),t=$r(e),r=new Up(e);return fM(n._query),Wx(t,n._query).then(i=>new mh(e,r,n,i))}(this._delegate),t.then(r=>new OS(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=kM(e),r=NM(e,i=>new OS(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return DM(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}class SN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new SN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zb(this._firestore,r))})}isEqual(e){return hM(this._delegate,e._delegate)}}class f_ extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?Lb(this._delegate):Lb(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function fN(n,e){const t=dn(n.firestore,pr),r=Lb(n),i=OI(n.converter,e);return h_(t,[RI(Fp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Xn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return eM(this._delegate,e._delegate)}withConverter(e){return new f_(this.firestore,this._delegate.withConverter(e?Vp.getInstance(this.firestore,e):null))}}function jp(n){return dn(n,cr)}class FS{constructor(...e){this._delegate=new Tu(...e)}static documentId(){return new FS(Fn.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yN(){return new TS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hp(e)}static delete(){const e=function _N(){return new Bb("deleteField")}();return e._methodName="FieldValue.delete",new Hp(e)}static arrayUnion(...e){const t=function vN(...n){return new $1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hp(t)}static arrayRemove(...e){const t=function bN(...n){return new z1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hp(t)}static increment(e){const t=function wN(n){return new G1("increment",n)}(e);return t._methodName="FieldValue.increment",new Hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const AN={Firestore:xM,GeoPoint:xI,Timestamp:Jn,Blob:Hb,Transaction:MM,WriteBatch:RM,DocumentReference:ha,DocumentSnapshot:$b,Query:gs,QueryDocumentSnapshot:zb,QuerySnapshot:OS,CollectionReference:f_,FieldPath:FS,FieldValue:Hp,setLogLevel:function TN(n){!function zD(n){Ll.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MN(n){(function xN(n,e){n.INTERNAL.registerComponent(new jg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},AN)))})(n,(e,t)=>new xM(e,t,new DN)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(vD.Z);var LI=P(6451),BI=P(5363),RN=P(6063);class kN extends Nn.x{constructor(e=1/0,t=1/0,r=RN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=u;_+=2)f=_;f&&r.splice(0,f+1)}}}var PM=P(3099);function OM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,PM.B)({connector:()=>new kN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function FM(n,e){return(0,Mr.m)(e)?or(()=>n,e):or(()=>n)}var LS=P(9468);P(5867);const BM=new Map,LN={activated:!1,tokenObservers:[]},BN={initialized:!1,enabled:!1};function bi(n){return BM.get(n)||LN}function cl(n,e){BM.set(n,e)}function VI(){return BN}class $N{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function zN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function VM(n){if(!bi(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function jS(n,e){return HS.apply(this,arguments)}function HS(){return HS=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const $=yield u.getHeartbeatsHeader();$&&(a["X-Firebase-Client"]=$)}const f={method:"POST",body:JSON.stringify(e),headers:a};let _,b;try{_=yield fetch(n,f)}catch($){throw ms.create("fetch-network-error",{originalErrorMessage:null===(r=$)||void 0===r?void 0:r.message})}if(200!==_.status)throw ms.create("fetch-status-error",{httpStatus:_.status});try{b=yield _.json()}catch($){throw ms.create("fetch-parse-error",{originalErrorMessage:null===(i=$)||void 0===i?void 0:i.message})}const T=b.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${b.ttl}`});const A=1e3*Number(T[1]),F=Date.now();return{token:b.token,expireTimeMillis:F+A,issuedAtTimeMillis:F}}),HS.apply(this,arguments)}function KN(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Gb="firebase-app-check-store";let $I=null;function HM(){return $I||($I=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(ms.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Gb,{keyPath:"compositeKey"})}}catch(r){e(ms.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),$I)}function $S(){return $S=(0,Ee.Z)(function*(n,e){const r=(yield HM()).transaction(Gb,"readwrite"),a=r.objectStore(Gb).put({compositeKey:n,value:e});return new Promise((u,f)=>{a.onsuccess=_=>{u()},r.onerror=_=>{var b;f(ms.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),$S.apply(this,arguments)}const Wb=new Hc.Yd("@firebase/app-check");function WM(n,e){return(0,en.hl)()?function JN(n,e){return function $M(n,e){return $S.apply(this,arguments)}(function GM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Wb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function qM(){return VI().enabled}function KM(){return qS.apply(this,arguments)}function qS(){return qS=(0,Ee.Z)(function*(){const n=VI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),qS.apply(this,arguments)}const iP={error:"UNKNOWN_ERROR"};function sP(n){return en.US.encodeString(JSON.stringify(n),!1)}function zI(n){return KS.apply(this,arguments)}function KS(){return KS=(0,Ee.Z)(function*(n,e=!1){const t=n.app;VM(t);const r=bi(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&GI(_)&&(i=_)}if(!e&&i&&GI(i))return{token:i.token};let f,u=!1;if(qM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jS(KN(t,yield KM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),u=!0);const _=yield r.exchangeTokenPromise;return yield WM(t,_),cl(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),u=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Wb.warn(_.message):Wb.error(_),a=_}return i?(f={token:i.token},cl(t,Object.assign(Object.assign({},r),{token:i})),yield WM(t,i)):f=aP(a),u&&YM(t,f),f}),KS.apply(this,arguments)}function YS(n,e){const t=bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),cl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ZM(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function oP(n){const{app:e}=n;return new $N((0,Ee.Z)(function*(){let r;if(r=bi(e).token?yield zI(n,!0):yield zI(n),r.error)throw r.error}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),cl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function YM(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function GI(n){return n.expireTimeMillis-Date.now()>0}function aP(n){return{token:sP(iP),error:n}}class lP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)YS(this.app,t.next);return Promise.resolve()}}const iR="app-check-internal";!function EP(){(0,so._registerComponent)(new jg.wA("app-check",n=>function cP(n,e){return new lP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(iR).initialize()})),(0,so._registerComponent)(new jg.wA(iR,n=>function uP(n){return{getToken:e=>zI(n,e),addTokenListener:e=>function ZS(n,e,t,r){const{app:i}=n,a=bi(i),u={next:t,error:r,type:e};if(cl(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&GI(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),ZM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ZM(n))}(n,"INTERNAL",e),removeTokenListener:e=>YS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,so.registerVersion)("@firebase/app-check","0.5.12")}();class eA{constructor(){return(0,Jr.vb)("app-check")}}typeof window<"u"&&window;var SP=P(127);const oR=new d.OlP("angularfire2.auth.use-emulator"),aR=new d.OlP("angularfire2.auth.settings"),lR=new d.OlP("angularfire2.auth.tenant-id"),cR=new d.OlP("angularfire2.auth.langugage-code"),uR=new d.OlP("angularfire2.auth.use-device-language"),dR=new d.OlP("angularfire.auth.persistence"),hR=(n,e,t,r,i,a,u,f)=>(0,Cs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),u)for(const[b,T]of Object.entries(u))_.settings[b]=T;return f&&_.setPersistence(f),_},[t,r,i,a,u,f]);let nA=(()=>{class n{constructor(t,r,i,a,u,f,_,b,T,A,F,$){const Z=new Nn.x,le=st(void 0).pipe((0,BI.Q)(u.outsideAngular),or(()=>a.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5881)))),(0,rt.U)(()=>(0,Cs.on)(t,a,r)),(0,rt.U)(Te=>hR(Te,a,f,b,T,A,_,F)),OM({bufferSize:1,refCount:!1}));if(Eo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{le.pipe(ae()).subscribe();const Qe=le.pipe(or(ft=>ft.getRedirectResult().then(kt=>kt,()=>null)),Jr.iC,OM({bufferSize:1,refCount:!1})),at=le.pipe(or(ft=>new Yn.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ft.onAuthStateChanged(Ut=>kt.next(Ut),Ut=>kt.error(Ut),()=>kt.complete()))})))),Ct=le.pipe(or(ft=>new Yn.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ft.onIdTokenChanged(Ut=>kt.next(Ut),Ut=>kt.error(Ut),()=>kt.complete()))}))));this.authState=Qe.pipe(FM(at),(0,LS.R)(u.outsideAngular),(0,BI.Q)(u.insideAngular)),this.user=Qe.pipe(FM(Ct),(0,LS.R)(u.outsideAngular),(0,BI.Q)(u.insideAngular)),this.idToken=this.user.pipe(or(ft=>ft?(0,gn.D)(ft.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(or(ft=>ft?(0,gn.D)(ft.getIdTokenResult()):st(null))),this.credential=(0,LI.T)(Qe,Z,this.authState.pipe(C(ft=>!ft))).pipe((0,rt.U)(ft=>ft?.user?ft:null),(0,LS.R)(u.outsideAngular),(0,BI.Q)(u.insideAngular))}return(0,Cs.pX)(this,le,a,{spy:{apply:(Te,Qe,at)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&at.then(Ct=>Z.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cs.Dh),d.LFG(Cs.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Jr.HU),d.LFG(oR,8),d.LFG(aR,8),d.LFG(lR,8),d.LFG(cR,8),d.LFG(uR,8),d.LFG(dR,8),d.LFG(eA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function fR(n,e){return function xP(n,e=Ug.z){return new Yn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function rA(n,e){return fR(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function qI(n,e){return rA(n,e).pipe(Ui(void 0),tw(),(0,rt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const _=i.find(T=>T.doc.ref.isEqual(u.ref)),b=t?.payload.docs.find(T=>T.ref.isEqual(u.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(u.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),a}))}function pR(n,e,t){return qI(n,t).pipe(Ot((r,i)=>function RP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function kP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Vg(),(0,rt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function iA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function gR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class mR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ui(void 0),tw(),C(([r,i])=>i.length>0||!r),(0,rt.U)(([r,i])=>i),Jr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ot((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gR(e);return pR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jr.iC)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Jr.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Jr.iC)}add(e){return this.ref.add(e)}doc(e){return new _R(this.ref.doc(e),this.afs)}}class _R{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=bR(r,t);return new mR(i,a,this.afs)}snapshotChanges(){return function MP(n,e){return fR(n,e).pipe(Ui(void 0),tw(),(0,rt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Jr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(Jr.iC)}}class NP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qI(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),C(t=>t.length>0),Jr.iC):qI(this.query,this.afs.schedulers.outsideAngular).pipe(Jr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ot((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=gR(e);return pR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Jr.iC)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Jr.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Jr.iC)}}const yR=new d.OlP("angularfire2.enableFirestorePersistence"),vR=new d.OlP("angularfire2.firestore.persistenceSettings"),PP=new d.OlP("angularfire2.firestore.settings"),OP=new d.OlP("angularfire2.firestore.use-emulator");function bR(n,e=(t=>t)){return{query:e(n),ref:n}}let qb=(()=>{class n{constructor(t,r,i,a,u,f,_,b,T,A,F,$,Z,le,Te,Qe,at){this.schedulers=_;const Ct=(0,Cs.on)(t,f,r),ft=T;A&&hR(Ct,f,F,Z,le,Te,$,Qe),[this.firestore,this.persistenceEnabled$]=(0,Cs.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const kt=f.runOutsideAngular(()=>Ct.firestore());if(a&&kt.settings(a),ft&&kt.useEmulator(...ft),i&&!Eo(u)){const Ut=()=>{try{return(0,gn.D)(kt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(hn){return typeof console<"u"&&console.warn(hn),st(!1)}};return[kt,f.runOutsideAngular(Ut)]}return[kt,st(!1)]},[a,ft,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=bR(i,r),f=this.schedulers.ngZone.run(()=>a);return new mR(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new NP(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new _R(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Cs.Dh),d.LFG(Cs.xv,8),d.LFG(yR,8),d.LFG(PP,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Jr.HU),d.LFG(vR,8),d.LFG(OP,8),d.LFG(nA,8),d.LFG(oR,8),d.LFG(aR,8),d.LFG(lR,8),d.LFG(cR,8),d.LFG(uR,8),d.LFG(dR,8),d.LFG(eA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FP=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",Jr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yR,useValue:!0},{provide:vR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[qb]}),n})();var LP=P(8554);let sA=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.db=i,this.userDetails={}}GoogleAuth(){return this.AuthLogin(new LP.Q)}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{let i=this.db.collection("users");this.userDetails={uid:r.user?.uid,name:r.user?.displayName},i.add(this.userDetails),localStorage.setItem("name",String(r.user?.displayName)),localStorage.setItem("uid",String(r.user?.uid)),this.router.navigate(["/main"])}).catch(r=>{console.log(r)})}getUser(){return this.userDetails}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(nA),d.LFG(Wn),d.LFG(qb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BP=["*"];let UP=(()=>{class n{constructor(){this.color="dark",this.click=new d.vpe}ngOnInit(){}onClick(t){this.disabled||(this.click.emit(t),t.stopPropagation(),t.preventDefault())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["cool-google-button"]],inputs:{disabled:"disabled",color:"color"},outputs:{click:"click"},ngContentSelectors:BP,decls:9,vars:6,consts:[["type","button",1,"google-button",3,"click"],[1,"icon"],["viewBox","0 0 366 372","xmlns","http://www.w3.org/2000/svg"],["d","M125.9 10.2c40.2-13.9 85.3-13.6 125.3 1.1 22.2 8.2 42.5 21 59.9 37.1-5.8 6.3-12.1 12.2-18.1 18.3l-34.2 34.2c-11.3-10.8-25.1-19-40.1-23.6-17.6-5.3-36.6-6.1-54.6-2.2-21 4.5-40.5 15.5-55.6 30.9-12.2 12.3-21.4 27.5-27 43.9-20.3-15.8-40.6-31.5-61-47.3 21.5-43 60.1-76.9 105.4-92.4z","id","Shape","fill","#EA4335"],["d","M20.6 102.4c20.3 15.8 40.6 31.5 61 47.3-8 23.3-8 49.2 0 72.4-20.3 15.8-40.6 31.6-60.9 47.3C1.9 232.7-3.8 189.6 4.4 149.2c3.3-16.2 8.7-32 16.2-46.8z","id","Shape","fill","#FBBC05"],["d","M361.7 151.1c5.8 32.7 4.5 66.8-4.7 98.8-8.5 29.3-24.6 56.5-47.1 77.2l-59.1-45.9c19.5-13.1 33.3-34.3 37.2-57.5H186.6c.1-24.2.1-48.4.1-72.6h175z","id","Shape","fill","#4285F4"],["d","M81.4 222.2c7.8 22.9 22.8 43.2 42.6 57.1 12.4 8.7 26.6 14.9 41.4 17.9 14.6 3 29.7 2.6 44.4.1 14.6-2.6 28.7-7.9 41-16.2l59.1 45.9c-21.3 19.7-48 33.1-76.2 39.6-31.2 7.1-64.2 7.3-95.2-1-24.6-6.5-47.7-18.2-67.6-34.1-20.9-16.6-38.3-38-50.4-62 20.3-15.7 40.6-31.5 60.9-47.3z","fill","#34A853"],[1,"text"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"button",0),d.NdJ("click",function(a){return r.onClick(a)}),d.TgZ(1,"span",1),d.O4$(),d.TgZ(2,"svg",2),d._UZ(3,"path",3)(4,"path",4)(5,"path",5)(6,"path",6),d.qZA()(),d.kcU(),d.TgZ(7,"span",7),d.Hsn(8),d.qZA()()),2&t&&d.ekj("disabled",r.disabled)("light","light"===r.color)("dark","dark"===r.color)},styles:[".google-button{height:36px;background-color:#4285f4;border:1px solid #4285f4;color:#fff;border-radius:5px;white-space:nowrap;box-shadow:1px 1px 0 1px #0000000d;transition-property:background-color,box-shadow;transition-duration:.15s;transition-timing-function:ease-in-out;padding:0;line-height:1;cursor:pointer}.google-button.dark{background-color:#4285f4;border:1px solid #4285f4;color:#fff}.google-button.light{background-color:#fff;border:1px solid #fff;color:#757575}.google-button:focus,.google-button:active,.google-button:hover{outline:0}.google-button:not(.disabled):focus,.google-button:not(.disabled):active,.google-button:not(.disabled):hover{box-shadow:1px 4px 5px 1px #0000001a}.google-button.disabled{cursor:default;background-color:#0000001f;box-shadow:0 0 #0003,0 0 #00000024,0 0 #0000001f;border-color:#eee;color:#00000042}.google-button.disabled .icon{background-color:#eee}.google-button .icon{display:inline-block;vertical-align:middle;width:40px;height:100%;padding:9px 12px;box-sizing:border-box;border-top-left-radius:5px;border-bottom-left-radius:5px;background-color:#fff}.google-button .text{display:inline-block;vertical-align:middle;padding:0 10px;font-size:14px;font-weight:500;text-align:left;-webkit-user-select:none;user-select:none}\n"],encapsulation:3,changeDetection:0}),n})(),VP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Uu]}),n})(),jP=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,null!=localStorage.getItem("uid")&&this.router.navigate(["/main"])}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(sA),d.Y36(Wn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:4,vars:0,consts:[[1,"container"],[1,"screen"],["color","dark",1,"google",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"cool-google-button",2),d.NdJ("click",function(){return r.authService.GoogleAuth()}),d._uU(3," Login with Google "),d.qZA()()())},dependencies:[UP],styles:['@import"https://fonts.googleapis.com/css?family=Raleway:400,700";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0;font-family:Raleway,sans-serif}body[_ngcontent-%COMP%]{background:linear-gradient(90deg,#C7C5F4,#776BCC)}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;margin:-8px -8px -8px -10px}.google[_ngcontent-%COMP%]{align-self:center}.screen[_ngcontent-%COMP%]{background:linear-gradient(90deg,#5D54A4,#7C78B8);position:relative;height:600px;width:320px;box-shadow:0 0 24px #5c5696;background-image:url(amongus_purple_bg.96d31cb55563a593.jpg);background-size:cover;align-items:center;justify-content:center;display:flex}.screen__content[_ngcontent-%COMP%]{z-index:1;position:relative;height:100%}.screen__background[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:0;clip-path:inset(0 0 0 0)}.screen__background__shape[_ngcontent-%COMP%]{transform:rotate(45deg);position:absolute}.screen__background__shape1[_ngcontent-%COMP%]{height:520px;width:520px;background:#FFF;top:-50px;right:120px;border-radius:0 72px 0 0}.screen__background__shape2[_ngcontent-%COMP%]{height:220px;width:220px;background:#6C63AC;top:-172px;right:0;border-radius:32px}.screen__background__shape3[_ngcontent-%COMP%]{height:540px;width:190px;background:linear-gradient(270deg,#5D54A4,#6A679E);top:-24px;right:0;border-radius:32px}.screen__background__shape4[_ngcontent-%COMP%]{height:400px;width:200px;background:#7E7BB9;top:420px;right:50px;border-radius:60px}.login[_ngcontent-%COMP%]{width:320px;padding:156px 30px 30px}.login__field[_ngcontent-%COMP%]{padding:20px 0;position:relative}.login__icon[_ngcontent-%COMP%]{position:absolute;top:30px;color:#7875b5}.login__input[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #D1D1D4;background:none;padding:10px 10px 10px 24px;font-weight:700;width:75%;transition:.2s}.login__input[_ngcontent-%COMP%]:active, .login__input[_ngcontent-%COMP%]:focus, .login__input[_ngcontent-%COMP%]:hover{outline:none;border-bottom-color:#6a679e}.login__submit[_ngcontent-%COMP%]{background:#fff;font-size:14px;margin-top:30px;padding:16px 20px;border-radius:26px;border:1px solid #D4D3E8;text-transform:uppercase;font-weight:700;display:flex;align-items:center;width:100%;color:#4c489d;box-shadow:0 2px 2px #5c5696;cursor:pointer;transition:.2s}.login__submit[_ngcontent-%COMP%]:active, .login__submit[_ngcontent-%COMP%]:focus, .login__submit[_ngcontent-%COMP%]:hover{border-color:#6a679e;outline:none}.button__icon[_ngcontent-%COMP%]{font-size:24px;margin-left:auto;color:#7875b5}.social-login[_ngcontent-%COMP%]{position:absolute;height:140px;width:160px;text-align:center;bottom:0px;right:0px;color:#fff}.social-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.social-login__icon[_ngcontent-%COMP%]{padding:20px 10px;color:#fff;text-decoration:none;text-shadow:0px 0px 8px #7875B5}.social-login__icon[_ngcontent-%COMP%]:hover{transform:scale(1.5)}']}),n})();const HP=[{tid:0,task:"Do 10 pushups",isDone:!1},{tid:1,task:"Talk to your friend",isDone:!1},{tid:2,task:"Know your friend's name",isDone:!1}];function $P(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",5)(1,"p",6),d._uU(2,"Enter code:"),d.qZA(),d.TgZ(3,"form",7),d.NdJ("submit",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onJoin())}),d.TgZ(4,"input",8),d.NdJ("keyup",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onKey(i))}),d.qZA(),d.TgZ(5,"button",9),d._uU(6,"JOIN"),d.qZA()()()}}let oA,zP=(()=>{class n{constructor(t,r){this.db=t,this.router=r,this.code="",localStorage.getItem("name"),localStorage.setItem("code","")}ngOnInit(){}onCreate(){this.code=(Math.random()+1).toString(36).substring(6),this.db.collection("lobbies").doc(this.code).set({code:this.code,tasks:HP,users:[],inGame:!1,tasksFinished:!1,crewmatesDead:!1}),localStorage.setItem("code",this.code),localStorage.setItem("isAdmin","true"),this.router.navigate(["/lobby",this.code],{state:{data:this.code}})}onJoinBtn(){this.joinClicked=!this.joinClicked}onKey(t){this.code=t.target.value}onJoin(){localStorage.setItem("code",this.code),localStorage.setItem("isAdmin","false"),this.router.navigate(["/lobby",this.code],{state:{data:this.code}})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qb),d.Y36(Wn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-main-menu"]],decls:7,vars:1,consts:[[1,"container"],[1,"logo"],["type","button",1,"button",3,"click"],["type","button",1,"button",2,"margin-top","20px",3,"click"],["class","modal",4,"ngIf"],[1,"modal"],[1,"text"],[3,"submit"],[1,"inputField",3,"keyup"],["type","submit",1,"button",2,"margin-top","20px"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"p",1),d.TgZ(2,"button",2),d.NdJ("click",function(){return r.onCreate()}),d._uU(3,"CREATE"),d.qZA(),d.TgZ(4,"button",3),d.NdJ("click",function(){return r.onJoinBtn()}),d._uU(5,"JOIN"),d.qZA(),d.YNc(6,$P,7,0,"div",4),d.qZA()),2&t&&(d.xp6(6),d.Q6J("ngIf",r.joinClicked))},dependencies:[Rn],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;min-height:100vh;margin:-8px}.button[_ngcontent-%COMP%]{width:100px;height:50px;color:#fff;border-color:#fff;background-color:transparent;border-radius:4px;font-family:joffrey;font-size:26px}.logo[_ngcontent-%COMP%]{width:200px;height:100px;background-image:url(amongus_logo.e19d83f891029c17.png);background-size:cover}.modal[_ngcontent-%COMP%]{z-index:5;width:200px;height:200px;justify-content:center;align-items:center;display:flex;position:fixed;background:linear-gradient(90deg,black,#171717);box-shadow:0 0 24px #5c5696;padding:10px;flex-direction:column}.textField[_ngcontent-%COMP%]{box-shadow:0 0 24px #5c5696;padding:10px;align-self:center}"]}),n})();try{oA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oA=!1}let Kb,aA,Au=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function di(n){return n===ui}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!oA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KI(n){return function GP(){if(null==Kb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kb=!0}))}finally{Kb=Kb||!1}return Kb}()?n:!!n.capture}function Zb(n){return n.composedPath?n.composedPath()[0]:n.target}function ER(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function lA(n,e=Ug.z){return(0,sr.e)((t,r)=>{let i=null,a=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const b=a;a=null,r.next(b)}};function _(){const b=u+n,T=e.now();if(T<b)return i=this.schedule(void 0,b-T),void r.add(i);f()}t.subscribe((0,Pn.x)(r,b=>{a=b,u=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}function cA(n){return C((e,t)=>n<=t)}var fO=P(5032);function vh(n){return(0,sr.e)((e,t)=>{(0,xr.Xf)(n).subscribe((0,Pn.x)(t,()=>t.complete(),fO.Z)),!t.closed&&e.subscribe(t)})}function bh(n){return null!=n&&"false"!=`${n}`}function YI(n,e=0){return function pO(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function IR(n){return Array.isArray(n)?n:[n]}function g_(n){return n instanceof d.SBq?n.nativeElement:n}let CR=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gO=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=g_(t);return new Yn.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Nn.x,i=this._mutationObserverFactory.create(a=>r.next(a));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(CR))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mO=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=bh(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=YI(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(lA(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(gO),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),DR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[CR]}),n})();const TR=new Set;let m_,_O=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):vO}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function yO(n){if(!TR.has(n))try{m_||(m_=document.createElement("style"),m_.setAttribute("type","text/css"),document.head.appendChild(m_)),m_.sheet&&(m_.sheet.insertRule(`@media ${n} {body{ }}`,0),TR.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Au))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vO(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let bO=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Nn.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return SR(IR(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let a=$a(SR(IR(t)).map(u=>this._registerQuery(u).observable));return a=Zs(a.pipe(_n(1)),a.pipe(cA(1),lA(0))),a.pipe((0,rt.U)(u=>{const f={matches:!1,breakpoints:{}};return u.forEach(({matches:_,query:b})=>{f.matches=f.matches||_,f.breakpoints[b]=_}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),a={observable:new Yn.y(u=>{const f=_=>this._zone.run(()=>u.next(_));return r.addListener(f),()=>{r.removeListener(f)}}).pipe(Ui(r),(0,rt.U)(({matches:u})=>({query:t,matches:u})),vh(this._destroySubject)),mql:r};return this._queries.set(t,a),a}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_O),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SR(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class CO extends class IO{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Nn.x,this._typeaheadSubscription=Rr.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Nn.x,this.change=new Nn.x,e instanceof d.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Be.b)(t=>this._pressedLetters.push(t)),lA(e),C(()=>this._pressedLetters.length>0),(0,rt.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const a=(this._activeItemIndex+i)%r.length,u=r[a];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(a);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(a=>!e[a]||this._allowedModifierKeys.indexOf(a)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||ER(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof d.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function RR(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function kR(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const MO=new d.OlP("cdk-input-modality-detector-options"),RO={ignoreKeys:[18,17,224,91,16]},__=KI({passive:!0,capture:!0});let kO=(()=>{class n{constructor(t,r,i,a){this._platform=t,this._mostRecentTarget=null,this._modality=new bn(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(f=>f===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Zb(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RR(u)?"keyboard":"mouse"),this._mostRecentTarget=Zb(u))},this._onTouchstart=u=>{kR(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Zb(u))},this._options={...RO,...a},this.modalityDetected=this._modality.pipe(cA(1)),this.modalityChanged=this.modalityDetected.pipe(Vg()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,__),i.addEventListener("mousedown",this._onMousedown,__),i.addEventListener("touchstart",this._onTouchstart,__)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,__),document.removeEventListener("mousedown",this._onMousedown,__),document.removeEventListener("touchstart",this._onTouchstart,__))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Au),d.LFG(d.R0b),d.LFG(ue),d.LFG(MO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PO=new d.OlP("cdk-focus-monitor-default-options"),QI=KI({passive:!0,capture:!0});let OO=(()=>{class n{constructor(t,r,i,a,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Nn.x,this._rootNodeFocusAndBlurListener=f=>{for(let b=Zb(f);b;b=b.parentElement)"focus"===f.type?this._onFocus(f,b):this._onBlur(f,b)},this._document=a,this._detectionMode=u?.detectionMode||0}monitor(t,r=!1){const i=g_(t);if(!this._platform.isBrowser||1!==i.nodeType)return st(null);const a=function qP(n){if(function WP(){if(null==aA){const n=typeof document<"u"?document.head:null;aA=!(!n||!n.createShadowRoot&&!n.attachShadow)}return aA}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const f={checkChildren:r,subject:new Nn.x,rootNode:a};return this._elementInfo.set(i,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=g_(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const a=g_(t);a===this._getDocument().activeElement?this._getClosestElementsInfo(a).forEach(([f,_])=>this._originChanged(f,r,_)):(this._setOrigin(r),"function"==typeof a.focus&&a.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),a=Zb(t);!i||!i.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,QI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,QI)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(vh(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,QI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,QI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,a)=>{(a===t||i.checkChildren&&a.contains(t))&&r.push([a,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const a=t.labels;if(a)for(let u=0;u<a.length;u++)if(a[u].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(Au),d.LFG(kO),d.LFG(ue,8),d.LFG(PO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),FO=(()=>{class n{constructor(t,r){this._elementRef=t,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new d.vpe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){const t=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(t,1===t.nodeType&&t.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(OO))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"]}),n})();const PR="cdk-high-contrast-black-on-white",OR="cdk-high-contrast-white-on-black",uA="cdk-high-contrast-active";let FR=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(bO).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(uA,PR,OR),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(uA,PR):2===r&&t.add(uA,OR)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Au),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LO=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(FR))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[DR]}),n})();class dA{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class BO extends dA{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class LR extends dA{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class UO extends dA{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}let hA=(()=>{class n extends class VO{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof BO?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof LR?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof UO?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=a=>{const u=a.element,f=this._document.createComment("dom-portal");a.setAttachedHost(this),u.parentNode.insertBefore(f,u),this._getRootNode().appendChild(u),this._attachedPortal=a,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(u,f)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,a=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),u=r.createComponent(a,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=t,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(ue))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),jO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const HO=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function $O(){return(0,d.f3M)(ue)}}),zO=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Yb=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function GO(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?zO.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(HO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const qO=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function WO(){return!0}});let y_=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function KP(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(FR),d.LFG(qO,8),d.LFG(ue))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[BR,BR]}),n})();function jR(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=bh(e)}}}function KO(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function ZO(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=bh(e)}}}class QO{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const HR={enterDuration:225,exitDuration:150},fA=KI({passive:!0}),$R=["mousedown","touchstart"],zR=["mouseup","mouseleave","touchend","touchcancel"];class XO{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=g_(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),a={...HR,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function eF(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),f=e-i.left,_=t-i.top,b=a.enterDuration,T=document.createElement("div");T.classList.add("mat-ripple-element"),T.style.left=f-u+"px",T.style.top=_-u+"px",T.style.height=2*u+"px",T.style.width=2*u+"px",null!=r.color&&(T.style.backgroundColor=r.color),T.style.transitionDuration=`${b}ms`,this._containerElement.appendChild(T);const A=window.getComputedStyle(T),$=A.transitionDuration,Z="none"===A.transitionProperty||"0s"===$||"0s, 0s"===$,le=new QO(this,T,r,Z);T.style.transform="scale3d(1, 1, 1)",le.state=0,r.persistent||(this._mostRecentTransientRipple=le);let Te=null;return!Z&&(b||a.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Qe=()=>this._finishRippleTransition(le),at=()=>this._destroyRipple(le);T.addEventListener("transitionend",Qe),T.addEventListener("transitioncancel",at),Te={onTransitionEnd:Qe,onTransitionCancel:at}}),this._activeRipples.set(le,Te),(Z||!b)&&this._finishRippleTransition(le),le}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...HR,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=g_(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents($R))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zR),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=RR(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!kR(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,fA)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&($R.forEach(e=>{this._triggerElement.removeEventListener(e,this,fA)}),this._pointerUpEventsRegistered&&zR.forEach(e=>{this._triggerElement.removeEventListener(e,this,fA)}))}}const tF=new d.OlP("mat-ripple-global-options");let GR=(()=>{class n{constructor(t,r,i,a,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new XO(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(Au),d.Y36(tF,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),nF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[y_,y_]}),n})();var rF=P(1144);const iF=["addListener","removeListener"],sF=["addEventListener","removeEventListener"],oF=["on","off"];function Jb(n,e,t,r){if((0,Mr.m)(t)&&(r=t,t=void 0),r)return Jb(n,e,t).pipe(Va(r));const[i,a]=function cF(n){return(0,Mr.m)(n.addEventListener)&&(0,Mr.m)(n.removeEventListener)}(n)?sF.map(u=>f=>n[u](e,f,t)):function aF(n){return(0,Mr.m)(n.addListener)&&(0,Mr.m)(n.removeListener)}(n)?iF.map(WR(n,e)):function lF(n){return(0,Mr.m)(n.on)&&(0,Mr.m)(n.off)}(n)?oF.map(WR(n,e)):[];if(!i&&(0,rF.z)(n))return(0,D.z)(u=>Jb(u,e,t))((0,xr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Yn.y(u=>{const f=(..._)=>u.next(1<_.length?_:_[0]);return i(f),()=>a(f)})}function WR(n,e){return t=>r=>n[t](e,r)}var uF=P(3532);function qR(n=0,e,t=Ug.P){let r=-1;return null!=e&&((0,uF.K)(e)?t=e:r=e),new Yn.y(i=>{let a=function dF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;a<0&&(a=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},a)})}class KR{}const xu="*";function fF(n,e){return{type:7,name:n,definitions:e,options:{}}}function pA(n,e=null){return{type:4,styles:e,timings:n}}function ZR(n,e=null){return{type:2,steps:n,options:e}}function zp(n){return{type:6,styles:n,offset:null}}function gA(n,e,t){return{type:0,name:n,styles:e,options:t}}function mA(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function YR(n){Promise.resolve(null).then(n)}class Xb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){YR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class QR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?YR(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var JR=P(4408);const e0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=e0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(a=>{t=void 0,n(a)});return new Rr.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=e0;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=e0;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var XR=P(7565);new class gF extends XR.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class pF extends JR.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=e0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(e0.cancelAnimationFrame(t),e._scheduled=void 0)}});let yA,_F=1;const JI={};function ek(n){return n in JI&&(delete JI[n],!0)}const yF={setImmediate(n){const e=_F++;return JI[e]=!0,yA||(yA=Promise.resolve()),yA.then(()=>ek(e)&&n()),e},clearImmediate(n){ek(n)}},{setImmediate:vF,clearImmediate:bF}=yF,XI={setImmediate(...n){const{delegate:e}=XI;return(e?.setImmediate||vF)(...n)},clearImmediate(n){const{delegate:e}=XI;return(e?.clearImmediate||bF)(n)},delegate:void 0};new class EF extends XR.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class wF extends JR.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=XI.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(XI.clearImmediate(t),e._scheduled=void 0)}});let vA=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Nn.x,this._changeListener=a=>{this._change.next(a)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,a=i.getBoundingClientRect();return{top:-a.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-a.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(function DF(n,e=Ug.z){return function CF(n){return(0,sr.e)((e,t)=>{let r=!1,i=null,a=null,u=!1;const f=()=>{if(a?.unsubscribe(),a=null,r){r=!1;const b=i;i=null,t.next(b)}u&&t.complete()},_=()=>{a=null,u&&t.complete()};e.subscribe((0,Pn.x)(t,b=>{r=!0,i=b,a||(0,xr.Xf)(n(b)).subscribe(a=(0,Pn.x)(t,f,_))},()=>{u=!0,(!r||!a||a.closed)&&t.complete()}))})}(()=>qR(n,e))}(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Au),d.LFG(d.R0b),d.LFG(ue,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SF(n,e){1&n&&d.Hsn(0)}const tk=["*"];function AF(n,e){}const xF=function(n){return{animationDuration:n}},MF=function(n,e){return{value:n,params:e}},RF=["tabListContainer"],kF=["tabList"],NF=["tabListInner"],PF=["nextPaginator"],OF=["previousPaginator"],FF=["tabBodyWrapper"],LF=["tabHeader"];function BF(n,e){}function UF(n,e){if(1&n&&d.YNc(0,BF,0,0,"ng-template",10),2&n){const t=d.oxw().$implicit;d.Q6J("cdkPortalOutlet",t.templateLabel)}}function VF(n,e){if(1&n&&d._uU(0),2&n){const t=d.oxw().$implicit;d.Oqu(t.textLabel)}}function jF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6),d.NdJ("click",function(){const i=d.CHM(t),a=i.$implicit,u=i.index,f=d.oxw(),_=d.MAs(1);return d.KtG(f._handleClick(a,_,u))})("cdkFocusChange",function(i){const u=d.CHM(t).index,f=d.oxw();return d.KtG(f._tabFocusChanged(i,u))}),d.TgZ(1,"div",7),d.YNc(2,UF,1,1,"ng-template",8),d.YNc(3,VF,1,1,"ng-template",null,9,d.W1O),d.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=d.MAs(4),a=d.oxw();d.ekj("mat-tab-label-active",a.selectedIndex===r),d.Q6J("id",a._getTabLabelId(r))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||a.disableRipple),d.uIk("tabIndex",a._getTabIndex(t,r))("aria-posinset",r+1)("aria-setsize",a._tabs.length)("aria-controls",a._getTabContentId(r))("aria-selected",a.selectedIndex===r)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),d.xp6(2),d.Q6J("ngIf",t.templateLabel)("ngIfElse",i)}}function HF(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"mat-tab-body",11),d.NdJ("_onCentered",function(){d.CHM(t);const i=d.oxw();return d.KtG(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a._setTabBodyWrapperHeight(i))}),d.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.ekj("mat-tab-body-active",i.selectedIndex===r),d.Q6J("id",i._getTabContentId(r))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),d.uIk("tabindex",null!=i.contentTabIndex&&i.selectedIndex===r?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(r))}}const $F=new d.OlP("MatInkBarPositioner",{providedIn:"root",factory:function zF(){return e=>({left:e?(e.offsetLeft||0)+"px":"0",width:e?(e.offsetWidth||0)+"px":"0"})}});let nk=(()=>{class n{constructor(t,r,i,a){this._elementRef=t,this._ngZone=r,this._inkBarPositioner=i,this._animationMode=a}alignToElement(t){this.show(),this._ngZone.run(()=>{this._ngZone.onStable.pipe(_n(1)).subscribe(()=>{const r=this._inkBarPositioner(t),i=this._elementRef.nativeElement;i.style.left=r.left,i.style.width=r.width})})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36($F),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)}}),n})();const GF=new d.OlP("MatTabContent"),WF=new d.OlP("MatTabLabel"),qF=new d.OlP("MAT_TAB"),KF=jR(class{}),rk=new d.OlP("MAT_TAB_GROUP");let bA=(()=>{class n extends KF{constructor(t,r){super(),this._viewContainerRef=t,this._closestTabGroup=r,this.textLabel="",this._contentPortal=null,this._stateChanges=new Nn.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new LR(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(rk,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,WF,5),d.Suo(i,GF,7,d.Rgc)),2&t){let a;d.iGM(a=d.CRH())&&(r.templateLabel=a.first),d.iGM(a=d.CRH())&&(r._explicitContent=a.first)}},viewQuery:function(t,r){if(1&t&&d.Gf(d.Rgc,7),2&t){let i;d.iGM(i=d.CRH())&&(r._implicitContent=i.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[d._Bn([{provide:qF,useExisting:n}]),d.qOj,d.TTD],ngContentSelectors:tk,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.YNc(0,SF,1,0,"ng-template"))},encapsulation:2}),n})();const ZF={translateTab:fF("translateTab",[gA("center, void, left-origin-center, right-origin-center",zp({transform:"none"})),gA("left",zp({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),gA("right",zp({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),mA("* => left, * => right, left => center, right => center",pA("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),mA("void => left-origin-center",[zp({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),pA("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),mA("void => right-origin-center",[zp({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),pA("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let YF=(()=>{class n extends hA{constructor(t,r,i,a){super(t,r,a),this._host=i,this._centeringSub=Rr.w0.EMPTY,this._leavingSub=Rr.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(Ui(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36((0,d.Gpc)(()=>ik)),d.Y36(ue))},n.\u0275dir=d.lG2({type:n,selectors:[["","matTabBodyHost",""]],features:[d.qOj]}),n})(),QF=(()=>{class n{constructor(t,r,i){this._elementRef=t,this._dir=r,this._dirChangeSubscription=Rr.w0.EMPTY,this._translateTabComplete=new Nn.x,this._onCentering=new d.vpe,this._beforeCentering=new d.vpe,this._afterLeavingCenter=new d.vpe,this._onCentered=new d.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,r&&(this._dirChangeSubscription=r.change.subscribe(a=>{this._computePositionAnimationState(a),i.markForCheck()})),this._translateTabComplete.pipe(Vg((a,u)=>a.fromState===u.fromState&&a.toState===u.toState)).subscribe(a=>{this._isCenterPosition(a.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(a.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const r=this._isCenterPosition(t.toState);this._beforeCentering.emit(r),r&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const r=this._getLayoutDirection();return"ltr"==r&&t<=0||"rtl"==r&&t>0?"left-origin-center":"right-origin-center"}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Yb,8),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),n})(),ik=(()=>{class n extends QF{constructor(t,r,i){super(t,r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(Yb,8),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-body"]],viewQuery:function(t,r){if(1&t&&d.Gf(hA,5),2&t){let i;d.iGM(i=d.CRH())&&(r._portalHost=i.first)}},hostAttrs:[1,"mat-tab-body"],features:[d.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,r){1&t&&(d.TgZ(0,"div",0,1),d.NdJ("@translateTab.start",function(a){return r._onTranslateTabStarted(a)})("@translateTab.done",function(a){return r._translateTabComplete.next(a)}),d.YNc(2,AF,0,0,"ng-template",2),d.qZA()),2&t&&d.Q6J("@translateTab",d.WLB(3,MF,r._position,d.VKq(1,xF,r.animationDuration)))},dependencies:[YF],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[ZF.translateTab]}}),n})();const sk=new d.OlP("MAT_TABS_CONFIG"),JF=jR(class{});let ok=(()=>{class n extends JF{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,r){2&t&&(d.uIk("aria-disabled",!!r.disabled),d.ekj("mat-tab-disabled",r.disabled))},inputs:{disabled:"disabled"},features:[d.qOj]}),n})();const ak=KI({passive:!0});let tL=(()=>{class n{constructor(t,r,i,a,u,f,_){this._elementRef=t,this._changeDetectorRef=r,this._viewportRuler=i,this._dir=a,this._ngZone=u,this._platform=f,this._animationMode=_,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Nn.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Nn.x,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new d.vpe,this.indexFocused=new d.vpe,u.runOutsideAngular(()=>{Jb(t.nativeElement,"mouseleave").pipe(vh(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=bh(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=YI(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){Jb(this._previousPaginator.nativeElement,"touchstart",ak).pipe(vh(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Jb(this._nextPaginator.nativeElement,"touchstart",ak).pipe(vh(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:st("ltr"),r=this._viewportRuler.change(150),i=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new CO(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(_n(1)).subscribe(i),(0,LI.T)(t,r,this._items.changes,this._itemsResized()).pipe(vh(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),i()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe(vh(this._destroyed)).subscribe(a=>{this.indexFocused.emit(a),this._setTabFocus(a)})}_itemsResized(){return"function"!=typeof ResizeObserver?Bi.E:this._items.changes.pipe(Ui(this._items),or(t=>new Yn.y(r=>this._ngZone.runOutsideAngular(()=>{const i=new ResizeObserver(()=>{r.next()});return t.forEach(a=>{i.observe(a.elementRef.nativeElement)}),()=>{i.disconnect()}}))),cA(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!ER(t))switch(t.keyCode){case 13:case 32:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const r=this._items?this._items.toArray()[t]:null;return!!r&&!r.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const r=this._tabListContainer.nativeElement;r.scrollLeft="ltr"==this._getLayoutDirection()?0:r.scrollWidth-r.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,r="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(r)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const r=this._items?this._items.toArray()[t]:null;if(!r)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:a,offsetWidth:u}=r.elementRef.nativeElement;let f,_;"ltr"==this._getLayoutDirection()?(f=a,_=f+u):(_=this._tabListInner.nativeElement.offsetWidth-a,f=_-u);const b=this.scrollDistance,T=this.scrollDistance+i;f<b?this.scrollDistance-=b-f+60:_>T&&(this.scrollDistance+=_-T+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,r=t?t.elementRef.nativeElement:null;r?this._inkBar.alignToElement(r):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,r){r&&null!=r.button&&0!==r.button||(this._stopInterval(),qR(650,100).pipe(vh((0,LI.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:i,distance:a}=this._scrollHeader(t);(0===a||a>=i)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const r=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(r,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:r,distance:this._scrollDistance}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(vA),d.Y36(Yb,8),d.Y36(d.R0b),d.Y36(Au),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{disablePagination:"disablePagination"}}),n})(),nL=(()=>{class n extends tL{constructor(t,r,i,a,u,f,_){super(t,r,i,a,u,f,_),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=bh(t)}_itemSelected(t){t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(vA),d.Y36(Yb,8),d.Y36(d.R0b),d.Y36(Au),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{disableRipple:"disableRipple"},features:[d.qOj]}),n})(),rL=(()=>{class n extends nL{constructor(t,r,i,a,u,f,_){super(t,r,i,a,u,f,_)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(vA),d.Y36(Yb,8),d.Y36(d.R0b),d.Y36(Au),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-header"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,ok,4),2&t){let a;d.iGM(a=d.CRH())&&(r._items=a)}},viewQuery:function(t,r){if(1&t&&(d.Gf(nk,7),d.Gf(RF,7),d.Gf(kF,7),d.Gf(NF,7),d.Gf(PF,5),d.Gf(OF,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._inkBar=i.first),d.iGM(i=d.CRH())&&(r._tabListContainer=i.first),d.iGM(i=d.CRH())&&(r._tabList=i.first),d.iGM(i=d.CRH())&&(r._tabListInner=i.first),d.iGM(i=d.CRH())&&(r._nextPaginator=i.first),d.iGM(i=d.CRH())&&(r._previousPaginator=i.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-tab-header-rtl","rtl"==r._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[d.qOj],ngContentSelectors:tk,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"button",0,1),d.NdJ("click",function(){return r._handlePaginatorClick("before")})("mousedown",function(a){return r._handlePaginatorPress("before",a)})("touchend",function(){return r._stopInterval()}),d._UZ(2,"div",2),d.qZA(),d.TgZ(3,"div",3,4),d.NdJ("keydown",function(a){return r._handleKeydown(a)}),d.TgZ(5,"div",5,6),d.NdJ("cdkObserveContent",function(){return r._onContentChanges()}),d.TgZ(7,"div",7,8),d.Hsn(9),d.qZA(),d._UZ(10,"mat-ink-bar"),d.qZA()(),d.TgZ(11,"button",9,10),d.NdJ("mousedown",function(a){return r._handlePaginatorPress("after",a)})("click",function(){return r._handlePaginatorClick("after")})("touchend",function(){return r._stopInterval()}),d._UZ(13,"div",2),d.qZA()),2&t&&(d.ekj("mat-tab-header-pagination-disabled",r._disableScrollBefore),d.Q6J("matRippleDisabled",r._disableScrollBefore||r.disableRipple)("disabled",r._disableScrollBefore||null),d.xp6(5),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode),d.xp6(6),d.ekj("mat-tab-header-pagination-disabled",r._disableScrollAfter),d.Q6J("matRippleDisabled",r._disableScrollAfter||r.disableRipple)("disabled",r._disableScrollAfter||null))},dependencies:[GR,mO,nk],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}.mat-tab-label::before{margin:5px}@media(max-width: 599px){.mat-tab-label{min-width:72px}}"],encapsulation:2}),n})(),iL=0;class sL{}const oL=KO(ZO(class{constructor(n){this._elementRef=n}}),"primary");let aL=(()=>{class n extends oL{constructor(t,r,i,a){super(t),this._changeDetectorRef=r,this._animationMode=a,this._tabs=new d.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Rr.w0.EMPTY,this._tabLabelSubscription=Rr.w0.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new d.vpe,this.focusChange=new d.vpe,this.animationDone=new d.vpe,this.selectedTabChange=new d.vpe(!0),this._groupId=iL++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination,this.dynamicHeight=!(!i||null==i.dynamicHeight)&&i.dynamicHeight,this.contentTabIndex=i?.contentTabIndex??null,this.preserveContent=!!i?.preserveContent}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=bh(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=YI(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=YI(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=bh(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=bh(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const r=this._elementRef.nativeElement;r.classList.remove(`mat-background-${this.backgroundColor}`),t&&r.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const r=null==this._selectedIndex;if(!r){this.selectedTabChange.emit(this._createChangeEvent(t));const i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,a)=>i.isActive=a===t),r||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((r,i)=>{r.position=i-t,null!=this._selectedIndex&&0==r.position&&!r.origin&&(r.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const r=this._tabs.toArray();let i;for(let a=0;a<r.length;a++)if(r[a].isActive){this._indexToSelect=this._selectedIndex=a,this._lastFocusedTabIndex=null,i=r[a];break}!i&&r[t]&&Promise.resolve().then(()=>{r[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(Ui(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(r=>r._closestTabGroup===this||!r._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const r=this._tabHeader;r&&(r.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const r=new sL;return r.index=t,this._tabs&&this._tabs.length&&(r.tab=this._tabs.toArray()[t]),r}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,LI.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const r=this._tabBodyWrapper.nativeElement;r.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(r.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,r,i){t.disabled||(this.selectedIndex=r.focusIndex=i)}_getTabIndex(t,r){return t.disabled?null:r===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,r){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=r)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(sk,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[d.qOj]}),n})(),ck=(()=>{class n extends aL{constructor(t,r,i,a){super(t,r,i,a)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(sk,8),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-tab-group"]],contentQueries:function(t,r,i){if(1&t&&d.Suo(i,bA,5),2&t){let a;d.iGM(a=d.CRH())&&(r._allTabs=a)}},viewQuery:function(t,r){if(1&t&&(d.Gf(FF,5),d.Gf(LF,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._tabBodyWrapper=i.first),d.iGM(i=d.CRH())&&(r._tabHeader=i.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-tab-group-dynamic-height",r.dynamicHeight)("mat-tab-group-inverted-header","below"===r.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[d._Bn([{provide:rk,useExisting:n}]),d.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,r){1&t&&(d.TgZ(0,"mat-tab-header",0,1),d.NdJ("indexFocused",function(a){return r._focusChanged(a)})("selectFocusedIndex",function(a){return r.selectedIndex=a}),d.YNc(2,jF,5,15,"div",2),d.qZA(),d.TgZ(3,"div",3,4),d.YNc(5,HF,1,11,"mat-tab-body",5),d.qZA()),2&t&&(d.Q6J("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination),d.xp6(2),d.Q6J("ngForOf",r._tabs),d.xp6(1),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode),d.xp6(2),d.Q6J("ngForOf",r._tabs))},dependencies:[un,ki,Rn,hA,GR,FO,ok,ik,rL],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],encapsulation:2}),n})(),lL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Uu,y_,jO,nF,DR,LO,y_]}),n})();function cL(n,e){if(1&n&&(d.TgZ(0,"div",11)(1,"p"),d._uU(2),d.qZA()()),2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.name)}}function uL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",14)(1,"span",15),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit,a=d.oxw();return d.KtG(a.onClickEdit(i))}),d._uU(2,"edit"),d.qZA(),d.TgZ(3,"span",15),d.NdJ("click",function(){d.CHM(t);const i=d.oxw().$implicit,a=d.oxw();return d.KtG(a.onClickDelete(i))}),d._uU(4,"delete"),d.qZA()()}}function dL(n,e){if(1&n&&(d.TgZ(0,"div",12)(1,"p"),d._uU(2),d.qZA(),d.YNc(3,uL,5,0,"div",13),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(2),d.Oqu(t.task),d.xp6(1),d.Q6J("ngIf",r.isAdmin)}}function hL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",16),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onClickNewTask())}),d._uU(1,"add"),d.qZA()}}function fL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",17)(1,"p",18),d._uU(2,"Enter task:"),d.qZA(),d.TgZ(3,"form",19),d.NdJ("submit",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onEditSubmit(i))}),d.TgZ(4,"input",20),d.NdJ("keyup",function(i){d.CHM(t);const a=d.oxw();return d.KtG(a.onKey(i))}),d.qZA(),d.TgZ(5,"button",21),d._uU(6,"Submit"),d.qZA()()()}}function pL(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",22),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onStart())}),d._uU(1,"START"),d.qZA()}}let gL=(()=>{class n{constructor(t,r,i){this.db=t,this.authService=r,this.router=i,this.user=this.authService.getUser(),this.members=Array(),this.code=localStorage.getItem("code"),this.isAdmin="true"==localStorage.getItem("isAdmin"),this.lobby=t.collection("lobbies").doc(this.code),this.getItems()}ngOnInit(){}getItems(){var t=this;return(0,Ee.Z)(function*(){yield t.lobby.valueChanges().subscribe(r=>{t.users={},t.members=[],t.taskList={},t.tasks=[],Object.entries(r.users).forEach(([i,a],u)=>{t.users[i]=a,t.members.push(a)}),Object.entries(r.tasks).forEach(([i,a],u)=>{t.taskList[i]=a,t.tasks.push(a)}),r.inGame&&t.router.navigate(["/game",t.code],{state:{data:t.code}})}),t.currMember={uid:localStorage.getItem("uid"),name:localStorage.getItem("name"),isAdmin:localStorage.getItem("isAdmin"),isImposter:!1,tasksDone:!1,isDead:!1},t.members.push(t.currMember),setTimeout(()=>{t.updateUser()},3e3)})()}updateUser(){Object.entries(this.users).forEach(([t,r],i)=>{}),this.users[this.currMember.uid]=this.currMember,this.lobby.update({users:this.users})}onClickEdit(t){this.editClicked=!this.editClicked,this.currentTid=t.tid,this.isNewTask=!1}onKey(t){this.editedTask=t.target.value}onClickNewTask(){this.editClicked=!this.editClicked,this.isNewTask=!0}onEditSubmit(t){if(t.preventDefault(),this.editClicked=!this.editClicked,this.isNewTask){let r=(Math.random()+1).toString(36).substring(6);this.taskList[r]={tid:r,task:this.editedTask,isDone:!1}}else this.taskList[this.currentTid].task=this.editedTask;this.lobby.update({tasks:this.taskList})}onClickDelete(t){delete this.taskList[t.tid],this.lobby.update({tasks:this.taskList})}onPopState(t){delete this.users[this.currMember.uid],this.lobby.update({users:this.users}),0==Object.keys(this.users).length&&CM(Lb(function R1(n,e){const t="object"==typeof n?n:(0,so.getApp)(),r="string"==typeof n?n:e||"(default)";return(0,so._getProvider)(t,"firestore").getImmediate({identifier:r})}(),"lobbies",this.code))}onStart(){let t=[];const r=Object.keys(this.users);let i=Math.ceil(Object.keys(this.users).length/3);for(let a=0;a<i;a++){let u=r[Math.floor(Math.random()*r.length)];for(;t.includes(u);)u=r[Math.floor(Math.random()*r.length)];t.push(u)}for(let a of t)this.users[a].isImposter=!0,this.users[a].tasksDone=!0,this.users[a].isDead=!0;this.lobby.update({users:this.users,inGame:!0,crewmatesDead:!1,tasksFinished:!1}),this.router.navigate(["/game",this.code],{state:{data:this.code}})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qb),d.Y36(sA),d.Y36(Wn))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-lobby"]],hostBindings:function(t,r){1&t&&d.NdJ("popstate",function(a){return r.onPopState(a)},!1,d.Jf7)},decls:12,vars:6,consts:[[1,"container"],[1,"screen"],[1,"text",2,"margin-top","8px"],[1,"text","tabText"],["label","Members",1,"tab"],["style","margin-top: 16px;",4,"ngFor","ngForOf"],["label","Tasks",1,"tab"],["class","task",4,"ngFor","ngForOf"],["class","material-icons icons plus",3,"click",4,"ngIf"],["class","modal",4,"ngIf"],["class","button",3,"click",4,"ngIf"],[2,"margin-top","16px"],[1,"task"],["class","iconDiv",4,"ngIf"],[1,"iconDiv"],[1,"material-icons","icons",3,"click"],[1,"material-icons","icons","plus",3,"click"],[1,"modal"],[1,"text"],[3,"submit"],[1,"inputField",3,"keyup"],["type","submit",1,"button",2,"margin-top","20px"],[1,"button",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"p",2),d._uU(3),d.qZA(),d.TgZ(4,"mat-tab-group",3)(5,"mat-tab",4),d.YNc(6,cL,3,1,"div",5),d.qZA(),d.TgZ(7,"mat-tab",6),d.YNc(8,dL,4,2,"div",7),d.YNc(9,hL,2,0,"span",8),d.YNc(10,fL,7,0,"div",9),d.qZA()(),d.YNc(11,pL,2,0,"button",10),d.qZA()()),2&t&&(d.xp6(3),d.hij("Code: ",r.code,""),d.xp6(3),d.Q6J("ngForOf",r.members),d.xp6(2),d.Q6J("ngForOf",r.tasks),d.xp6(1),d.Q6J("ngIf",r.isAdmin),d.xp6(1),d.Q6J("ngIf",r.editClicked),d.xp6(1),d.Q6J("ngIf",r.isAdmin))},dependencies:[ki,Rn,ck,bA],styles:[".container{display:flex;align-items:center;justify-content:center;min-height:100vh;margin:-8px}.screen{background:linear-gradient(90deg,black,#171717);position:relative;height:600px;width:320px;box-shadow:0 0 24px #5c5696;padding:10px;align-items:center;display:flex;flex-direction:column}.tabText{font-size:25px}.mat-tab-label{color:#fff;font-family:joffrey;font-size:26px;font-weight:100}.task{margin-top:16px;flex-direction:row;display:flex;justify-content:space-between}.icons{font-size:16px;margin-left:6px;cursor:pointer}.plus{font-size:28px;margin-top:10px}.button{width:100px;height:50px;color:#fff;border-color:#fff;background-color:transparent;border-radius:4px;font-family:joffrey;font-size:26px}.modal{z-index:9;width:200px;height:200px;justify-content:center;align-items:center;display:flex;position:fixed;background:linear-gradient(90deg,black,#171717);box-shadow:0 0 24px #5c5696;padding:10px;flex-direction:column}.textField{box-shadow:0 0 24px #5c5696;padding:10px;align-self:center}\n"],encapsulation:2}),n})();function uk(n){return new d.vHH(3e3,!1)}function YL(){return typeof window<"u"&&typeof window.document<"u"}function wA(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function wh(n){switch(n.length){case 0:return new Xb;case 1:return n[0];default:return new QR(n)}}function dk(n,e,t,r,i=new Map,a=new Map){const u=[],f=[];let _=-1,b=null;if(r.forEach(T=>{const A=T.get("offset"),F=A==_,$=F&&b||new Map;T.forEach((Z,le)=>{let Te=le,Qe=Z;if("offset"!==le)switch(Te=e.normalizePropertyName(Te,u),Qe){case"!":Qe=i.get(le);break;case xu:Qe=a.get(le);break;default:Qe=e.normalizeStyleValue(le,Te,Qe,u)}$.set(Te,Qe)}),F||f.push($),b=$,_=A}),u.length)throw function BL(n){return new d.vHH(3502,!1)}();return f}function EA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&IA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&IA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&IA(t,"destroy",n)))}}function IA(n,e,t){const a=CA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function CA(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function uo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hk(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let DA=(n,e)=>!1,fk=(n,e,t)=>[],pk=null;function TA(n){const e=n.parentNode||n.host;return e===pk?null:e}(wA()||typeof Element<"u")&&(YL()?(pk=(()=>document.documentElement)(),DA=(n,e)=>{for(;e;){if(e===n)return!0;e=TA(e)}return!1}):DA=(n,e)=>n.contains(e),fk=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Gp=null,gk=!1;const mk=DA,_k=fk;let yk=(()=>{class n{validateStyleProperty(t){return function JL(n){Gp||(Gp=function XL(){return typeof document<"u"?document.body:null}()||{},gk=!!Gp.style&&"WebkitAppearance"in Gp.style);let e=!0;return Gp.style&&!function QL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Gp.style,!e&&gk&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Gp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return mk(t,r)}getParentElement(t){return TA(t)}query(t,r,i){return _k(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,f=[],_){return new Xb(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),SA=(()=>{class n{}return n.NOOP=new yk,n})();const AA="ng-enter",eC="ng-leave",tC="ng-trigger",nC=".ng-trigger",bk="ng-animating",xA=".ng-animating";function Eh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:MA(parseFloat(e[1]),e[2])}function MA(n,e){return"s"===e?1e3*n:n}function rC(n,e,t){return n.hasOwnProperty("duration")?n:function n2(n,e,t){let i,a=0,u="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(uk()),{duration:0,delay:0,easing:""};i=MA(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(a=MA(parseFloat(_),f[4]));const b=f[5];b&&(u=b)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function mL(){return new d.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function _L(){return new d.vHH(3101,!1)}()),f=!0),f&&e.splice(_,0,uk())}return{duration:i,delay:a,easing:u}}(n,e,t)}function t0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function wk(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ih(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ik(n,e,t){return t?e+":"+t+";":""}function Ck(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Ik(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Ik(0,a2(t),n.style[t]));n.setAttribute("style",e)}function lc(n,e,t){n.style&&(e.forEach((r,i)=>{const a=kA(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),wA()&&Ck(n))}function Wp(n,e){n.style&&(e.forEach((t,r)=>{const i=kA(r);n.style[i]=""}),wA()&&Ck(n))}function n0(n){return Array.isArray(n)?1==n.length?n[0]:ZR(n):n}const RA=new RegExp("{{\\s*(.+?)\\s*}}","g");function Dk(n){let e=[];if("string"==typeof n){let t;for(;t=RA.exec(n);)e.push(t[1]);RA.lastIndex=0}return e}function iC(n,e,t){const r=n.toString(),i=r.replace(RA,(a,u)=>{let f=e[u];return null==f&&(t.push(function vL(n){return new d.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function sC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const o2=/-+([a-z0-9])/g;function kA(n){return n.replace(o2,(...e)=>e[1].toUpperCase())}function a2(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ho(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function bL(n){return new d.vHH(3004,!1)}()}}function Tk(n,e){return window.getComputedStyle(n)[e]}function f2(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function p2(n,e,t){if(":"==n[0]){const _=function g2(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function PL(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function NL(n){return new d.vHH(3015,!1)}()),e;const i=r[1],a=r[2],u=r[3];e.push(Sk(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(Sk(u,i))}(r,t,e)):t.push(n),t}const cC=new Set(["true","1"]),uC=new Set(["false","0"]);function Sk(n,e){const t=cC.has(n)||uC.has(n),r=cC.has(e)||uC.has(e);return(i,a)=>{let u="*"==n||n==i,f="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?cC.has(n):uC.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?cC.has(e):uC.has(e)),u&&f}}const m2=new RegExp("s*:selfs*,?","g");function NA(n,e,t,r){return new _2(n).build(e,t,r)}class _2{constructor(e){this._driver=e}build(e,t,r){const i=new b2(t);return this._resetContextStyleTimingState(i),ho(this,n0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function EL(){return new d.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,b=_.name;b.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,a.push(this.visitState(_,t))}),_.name=b}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,u.push(_)}else t.errors.push(function IL(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{Dk(_).forEach(b=>{u.hasOwnProperty(b)||a.add(b)})})}),a.size&&(sC(a.values()),t.errors.push(function CL(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ho(this,n0(e.animation),t);return{type:1,matchers:f2(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ho(this,r,t)),options:qp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const f=ho(this,u,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:qp(e.options)}}visitAnimate(e,t){const r=function E2(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return PA(rC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=PA(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=rC(t,e);return PA(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:zp({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,f=!1;if(!u){f=!0;const b={};r.easing&&(b.easing=r.easing),u=zp(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(u,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===xu?r.push(f):t.errors.push(new d.vHH(3002,!1)):r.push(wk(f));let a=!1,u=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(u=f.get("easing"),f.delete("easing")),!a))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((f,_)=>{const b=t.collectedStyles.get(t.currentQuerySelector),T=b.get(_);let A=!0;T&&(a!=i&&a>=T.startTime&&i<=T.endTime&&(t.errors.push(function TL(n,e,t,r,i){return new d.vHH(3010,!1)}()),A=!1),a=T.startTime),A&&b.set(_,{startTime:a,endTime:i}),t.options&&function s2(n,e,t){const r=e.params||{},i=Dk(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function yL(n){return new d.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function SL(){return new d.vHH(3011,!1)}()),r;let a=0;const u=[];let f=!1,_=!1,b=0;const T=e.steps.map(Qe=>{const at=this._makeStyleAst(Qe,t);let Ct=null!=at.offset?at.offset:function w2(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(at.styles),ft=0;return null!=Ct&&(a++,ft=at.offset=Ct),_=_||ft<0||ft>1,f=f||ft<b,b=ft,u.push(ft),at});_&&t.errors.push(function AL(){return new d.vHH(3012,!1)}()),f&&t.errors.push(function xL(){return new d.vHH(3200,!1)}());const A=e.steps.length;let F=0;a>0&&a<A?t.errors.push(function ML(){return new d.vHH(3202,!1)}()):0==a&&(F=1/(A-1));const $=A-1,Z=t.currentTime,le=t.currentAnimateTimings,Te=le.duration;return T.forEach((Qe,at)=>{const Ct=F>0?at==$?1:F*at:u[at],ft=Ct*Te;t.currentTime=Z+le.delay+ft,le.duration=ft,this._validateStyleAst(Qe,t),Qe.offset=Ct,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:ho(this,n0(e.animation),t),options:qp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function y2(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(m2,"")),n=n.replace(/@\*/g,nC).replace(/@\w+/g,t=>nC+"-"+t.slice(1)).replace(/:animating/g,xA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,uo(t.collectedStyles,t.currentQuerySelector,new Map);const f=ho(this,n0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:f,originalSelector:e.selector,options:qp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function RL(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:rC(e.timings,t.errors,!0);return{type:12,animation:ho(this,n0(e.animation),t),timings:r,options:null}}}class b2{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qp(n){return n?(n=t0(n)).params&&(n.params=function v2(n){return n?t0(n):null}(n.params)):n={},n}function PA(n,e,t){return{duration:n,delay:e,easing:t}}function OA(n,e,t,r,i,a,u=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:f}}class dC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const D2=new RegExp(":enter","g"),S2=new RegExp(":leave","g");function FA(n,e,t,r,i,a=new Map,u=new Map,f,_,b=[]){return(new A2).buildKeyframes(n,e,t,r,i,a,u,f,_,b)}class A2{buildKeyframes(e,t,r,i,a,u,f,_,b,T=[]){b=b||new dC;const A=new LA(e,t,b,i,a,T,[]);A.options=_;const F=_.delay?Eh(_.delay):0;A.currentTimeline.delayNextStep(F),A.currentTimeline.setStyles([u],null,A.errors,_),ho(this,r,A);const $=A.timelines.filter(Z=>Z.containsAnimation());if($.length&&f.size){let Z;for(let le=$.length-1;le>=0;le--){const Te=$[le];if(Te.element===t){Z=Te;break}}Z&&!Z.allowOnlyTimelineStyles()&&Z.setStyles([f],null,A.errors,_)}return $.length?$.map(Z=>Z.buildKeyframes()):[OA(t,[],[],[],0,F,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Eh(r.duration):null,f=null!=r.delay?Eh(r.delay):null;return 0!==u&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,u,f);a=Math.max(a,b.duration+b.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),ho(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=hC);const u=Eh(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ho(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Eh(e.options.delay):0;e.steps.forEach(u=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),ho(this,u,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return rC(t.params?iC(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*a),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Eh(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=hC);let u=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((b,T)=>{t.currentQueryIndex=T;const A=t.createSubContext(e.options,b);a&&A.delayNextStep(a),b===t.element&&(_=A.currentTimeline),ho(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),f=u*(t.currentQueryTotal-1);let _=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const A=T.currentTime;ho(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const hC={};class LA{constructor(e,t,r,i,a,u,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new fC(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Eh(r.duration)),null!=r.delay&&(i.delay=Eh(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!u.hasOwnProperty(f))&&(u[f]=iC(a[f],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new LA(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=hC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new x2(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(D2,"."+this._enterClassName)).replace(S2,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!a&&0==f.length&&u.push(function kL(n){return new d.vHH(3014,!1)}()),f}}class fC{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new fC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||xu),this._currentKeyframe.set(t,xu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},u=function M2(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,xu)}else Ih(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,_]of u){const b=iC(_,a,r);this._pendingStyles.set(f,b),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??xu),this._updateStyle(f,b)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const b=Ih(f,new Map,this._backFill);b.forEach((T,A)=>{"!"===T?e.add(A):T===xu&&t.add(A)}),r||b.set("offset",_/this.duration),i.push(b)});const a=e.size?sC(e.values()):[],u=t.size?sC(t.values()):[];if(r){const f=i[0],_=new Map(f);f.set("offset",0),_.set("offset",1),i=[f,_]}return OA(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class x2 extends fC{constructor(e,t,r,i,a,u,f=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,f=t/u,_=Ih(e[0]);_.set("offset",0),a.push(_);const b=Ih(e[0]);b.set("offset",Mk(f)),a.push(b);const T=e.length-1;for(let A=1;A<=T;A++){let F=Ih(e[A]);const $=F.get("offset");F.set("offset",Mk((t+$*r)/u)),a.push(F)}r=u,t=0,i="",e=a}return OA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function Mk(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class BA{}const R2=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class k2 extends BA{normalizePropertyName(e,t){return kA(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(R2.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function wL(n,e){return new d.vHH(3005,!1)}())}return u+a}}function Rk(n,e,t,r,i,a,u,f,_,b,T,A,F){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:f,queriedElements:_,preStyleProps:b,postStyleProps:T,totalTime:A,errors:F}}const UA={};class kk{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function N2(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,u,f,_,b,T){const A=[],F=this.ast.options&&this.ast.options.params||UA,Z=this.buildStyles(r,f&&f.params||UA,A),le=_&&_.params||UA,Te=this.buildStyles(i,le,A),Qe=new Set,at=new Map,Ct=new Map,ft="void"===i,kt={params:P2(le,F),delay:this.ast.options?.delay},Ut=T?[]:FA(e,t,this.ast.animation,a,u,Z,Te,kt,b,A);let hn=0;if(Ut.forEach(Mu=>{hn=Math.max(Mu.duration+Mu.delay,hn)}),A.length)return Rk(t,this._triggerName,r,i,ft,Z,Te,[],[],at,Ct,hn,A);Ut.forEach(Mu=>{const Ru=Mu.element,r1=uo(at,Ru,new Set);Mu.preStyleProps.forEach(Zp=>r1.add(Zp));const a0=uo(Ct,Ru,new Set);Mu.postStyleProps.forEach(Zp=>a0.add(Zp)),Ru!==t&&Qe.add(Ru)});const _s=sC(Qe.values());return Rk(t,this._triggerName,r,i,ft,Z,Te,Ut,_s,at,Ct,hn)}}function P2(n,e){const t=t0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class O2{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=t0(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!==u&&(i[a]=u)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((u,f)=>{u&&(u=iC(u,i,t));const _=this.normalizer.normalizePropertyName(f,t);u=this.normalizer.normalizeStyleValue(f,_,u,t),r.set(_,u)})}),r}}class L2{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new O2(i.style,i.options&&i.options.params||{},r))}),Nk(this.states,"true","1"),Nk(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new kk(e,i,this.states))}),this.fallbackTransition=function B2(n,e,t){return new kk(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Nk(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const U2=new dC;class V2{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=NA(this._driver,t,r,[]);if(r.length)throw function UL(n){return new d.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=dk(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let u;const f=new Map;if(a?(u=FA(this._driver,t,a,AA,eC,new Map,new Map,r,U2,i),u.forEach(T=>{const A=uo(f,T.element,new Map);T.postStyleProps.forEach(F=>A.set(F,null))})):(i.push(function VL(){return new d.vHH(3300,!1)}()),u=[]),i.length)throw function jL(n){return new d.vHH(3504,!1)}();f.forEach((T,A)=>{T.forEach((F,$)=>{T.set($,this._driver.computeStyle(A,$,xu))})});const b=wh(u.map(T=>{const A=f.get(T.element);return this._buildPlayer(T,new Map,A)}));return this._playersById.set(e,b),b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function HL(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=CA(t,"","","");return EA(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Pk="ng-animate-queued",VA="ng-animate-disabled",G2=[],Ok={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},W2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},fa="__ng_removed";class jA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Y2(n){return n??null}(r?e.value:e),r){const a=t0(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const r0="void",HA=new jA(r0);class q2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,pa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function $L(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function zL(n){return new d.vHH(3303,!1)}();if(!function Q2(n){return"start"==n||"done"==n}(r))throw function GL(n,e){return new d.vHH(3400,!1)}();const a=uo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const f=uo(this._engine.statesByElement,e,new Map);return f.has(t)||(pa(e,tC),pa(e,tC+"-"+t),f.set(t,HA)),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(u);_>=0&&a.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function WL(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new $A(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(pa(e,tC),pa(e,tC+"-"+t),this._engine.statesByElement.set(e,f=new Map));let _=f.get(t);const b=new jA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),f.set(t,b),_||(_=HA),b.value!==r0&&_.value===b.value){if(!function eB(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,b.params)){const le=[],Te=a.matchStyles(_.value,_.params,le),Qe=a.matchStyles(b.value,b.params,le);le.length?this._engine.reportError(le):this._engine.afterFlush(()=>{Wp(e,Te),lc(e,Qe)})}return}const F=uo(this._engine.playersByElement,e,[]);F.forEach(le=>{le.namespaceId==this.id&&le.triggerName==t&&le.queued&&le.destroy()});let $=a.matchTransition(_.value,b.value,e,b.params),Z=!1;if(!$){if(!i)return;$=a.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:$,fromState:_,toState:b,player:u,isFallbackTransition:Z}),Z||(pa(e,Pk),u.onStart(()=>{v_(e,Pk)})),u.onDone(()=>{let le=this.players.indexOf(u);le>=0&&this.players.splice(le,1);const Te=this._engine.playersByElement.get(e);if(Te){let Qe=Te.indexOf(u);Qe>=0&&Te.splice(Qe,1)}}),this.players.push(u),F.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,nC,!0);r.forEach(i=>{if(i[fa])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const f=[];if(a.forEach((_,b)=>{if(u.set(b,_.value),this._triggers.has(b)){const T=this.trigger(e,b,r0,i);T&&f.push(T)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&wh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const _=this._triggers.get(u).fallbackTransition,b=r.get(u)||HA,T=new jA(r0),A=new $A(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:_,fromState:b,toState:T,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[fa];(!a||a===Ok)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){pa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(f=>{if(f.name==r.triggerName){const _=CA(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,EA(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class K2{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new q2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),u=!0;break}f=this.driver.getParentElement(f)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(pC(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!pC(t))return;const a=t[fa];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),pa(e,VA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),v_(e,VA))}removeNode(e,t,r,i){if(pC(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[fa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return pC(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,nC,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,xA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return wh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[fa];if(t&&t.setForRemoval){if(e[fa]=Ok,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(VA)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)pa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?wh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function qL(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new dC,i=[],a=new Map,u=[],f=new Map,_=new Map,b=new Map,T=new Set;this.disabledNodes.forEach(_t=>{T.add(_t);const Mt=this.driver.query(_t,".ng-animate-queued",!0);for(let Vt=0;Vt<Mt.length;Vt++)T.add(Mt[Vt])});const A=this.bodyNode,F=Array.from(this.statesByElement.keys()),$=Bk(F,this.collectedEnterElements),Z=new Map;let le=0;$.forEach((_t,Mt)=>{const Vt=AA+le++;Z.set(Mt,Vt),_t.forEach(yn=>pa(yn,Vt))});const Te=[],Qe=new Set,at=new Set;for(let _t=0;_t<this.collectedLeaveElements.length;_t++){const Mt=this.collectedLeaveElements[_t],Vt=Mt[fa];Vt&&Vt.setForRemoval&&(Te.push(Mt),Qe.add(Mt),Vt.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(yn=>Qe.add(yn)):at.add(Mt))}const Ct=new Map,ft=Bk(F,Array.from(Qe));ft.forEach((_t,Mt)=>{const Vt=eC+le++;Ct.set(Mt,Vt),_t.forEach(yn=>pa(yn,Vt))}),e.push(()=>{$.forEach((_t,Mt)=>{const Vt=Z.get(Mt);_t.forEach(yn=>v_(yn,Vt))}),ft.forEach((_t,Mt)=>{const Vt=Ct.get(Mt);_t.forEach(yn=>v_(yn,Vt))}),Te.forEach(_t=>{this.processLeaveNode(_t)})});const kt=[],Ut=[];for(let _t=this._namespaceList.length-1;_t>=0;_t--)this._namespaceList[_t].drainQueuedTransitions(t).forEach(Vt=>{const yn=Vt.player,wi=Vt.element;if(kt.push(yn),this.collectedEnterElements.length){const qi=wi[fa];if(qi&&qi.setForMove){if(qi.previousTriggersValues&&qi.previousTriggersValues.has(Vt.triggerName)){const Yp=qi.previousTriggersValues.get(Vt.triggerName),ga=this.statesByElement.get(Vt.element);if(ga&&ga.has(Vt.triggerName)){const bC=ga.get(Vt.triggerName);bC.value=Yp,ga.set(Vt.triggerName,bC)}}return void yn.destroy()}}const cc=!A||!this.driver.containsElement(A,wi),fo=Ct.get(wi),Th=Z.get(wi),vr=this._buildInstruction(Vt,r,Th,fo,cc);if(vr.errors&&vr.errors.length)return void Ut.push(vr);if(cc)return yn.onStart(()=>Wp(wi,vr.fromStyles)),yn.onDestroy(()=>lc(wi,vr.toStyles)),void i.push(yn);if(Vt.isFallbackTransition)return yn.onStart(()=>Wp(wi,vr.fromStyles)),yn.onDestroy(()=>lc(wi,vr.toStyles)),void i.push(yn);const a1=[];vr.timelines.forEach(qi=>{qi.stretchStartingKeyframe=!0,this.disabledNodes.has(qi.element)||a1.push(qi)}),vr.timelines=a1,r.append(wi,vr.timelines),u.push({instruction:vr,player:yn,element:wi}),vr.queriedElements.forEach(qi=>uo(f,qi,[]).push(yn)),vr.preStyleProps.forEach((qi,Yp)=>{if(qi.size){let ga=_.get(Yp);ga||_.set(Yp,ga=new Set),qi.forEach((bC,ZA)=>ga.add(ZA))}}),vr.postStyleProps.forEach((qi,Yp)=>{let ga=b.get(Yp);ga||b.set(Yp,ga=new Set),qi.forEach((bC,ZA)=>ga.add(ZA))})});if(Ut.length){const _t=[];Ut.forEach(Mt=>{_t.push(function KL(n,e){return new d.vHH(3505,!1)}())}),kt.forEach(Mt=>Mt.destroy()),this.reportError(_t)}const hn=new Map,_s=new Map;u.forEach(_t=>{const Mt=_t.element;r.has(Mt)&&(_s.set(Mt,Mt),this._beforeAnimationBuild(_t.player.namespaceId,_t.instruction,hn))}),i.forEach(_t=>{const Mt=_t.element;this._getPreviousPlayers(Mt,!1,_t.namespaceId,_t.triggerName,null).forEach(yn=>{uo(hn,Mt,[]).push(yn),yn.destroy()})});const Mu=Te.filter(_t=>Vk(_t,_,b)),Ru=new Map;Lk(Ru,this.driver,at,b,xu).forEach(_t=>{Vk(_t,_,b)&&Mu.push(_t)});const a0=new Map;$.forEach((_t,Mt)=>{Lk(a0,this.driver,new Set(_t),_,"!")}),Mu.forEach(_t=>{const Mt=Ru.get(_t),Vt=a0.get(_t);Ru.set(_t,new Map([...Array.from(Mt?.entries()??[]),...Array.from(Vt?.entries()??[])]))});const Zp=[],s1=[],o1={};u.forEach(_t=>{const{element:Mt,player:Vt,instruction:yn}=_t;if(r.has(Mt)){if(T.has(Mt))return Vt.onDestroy(()=>lc(Mt,yn.toStyles)),Vt.disabled=!0,Vt.overrideTotalTime(yn.totalTime),void i.push(Vt);let wi=o1;if(_s.size>1){let fo=Mt;const Th=[];for(;fo=fo.parentNode;){const vr=_s.get(fo);if(vr){wi=vr;break}Th.push(fo)}Th.forEach(vr=>_s.set(vr,wi))}const cc=this._buildAnimation(Vt.namespaceId,yn,hn,a,a0,Ru);if(Vt.setRealPlayer(cc),wi===o1)Zp.push(Vt);else{const fo=this.playersByElement.get(wi);fo&&fo.length&&(Vt.parentPlayer=wh(fo)),i.push(Vt)}}else Wp(Mt,yn.fromStyles),Vt.onDestroy(()=>lc(Mt,yn.toStyles)),s1.push(Vt),T.has(Mt)&&i.push(Vt)}),s1.forEach(_t=>{const Mt=a.get(_t.element);if(Mt&&Mt.length){const Vt=wh(Mt);_t.setRealPlayer(Vt)}}),i.forEach(_t=>{_t.parentPlayer?_t.syncPlayerEvents(_t.parentPlayer):_t.destroy()});for(let _t=0;_t<Te.length;_t++){const Mt=Te[_t],Vt=Mt[fa];if(v_(Mt,eC),Vt&&Vt.hasAnimation)continue;let yn=[];if(f.size){let cc=f.get(Mt);cc&&cc.length&&yn.push(...cc);let fo=this.driver.query(Mt,xA,!0);for(let Th=0;Th<fo.length;Th++){let vr=f.get(fo[Th]);vr&&vr.length&&yn.push(...vr)}}const wi=yn.filter(cc=>!cc.destroyed);wi.length?J2(this,Mt,wi):this.processLeaveNode(Mt)}return Te.length=0,Zp.forEach(_t=>{this.players.push(_t),_t.onDone(()=>{_t.destroy();const Mt=this.players.indexOf(_t);this.players.splice(Mt,1)}),_t.play()}),Zp}elementContainsData(e,t){let r=!1;const i=t[fa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(u=f)}else{const f=this.playersByElement.get(e);if(f){const _=!a||a==r0;f.forEach(b=>{b.queued||!_&&b.triggerName!=i||u.push(b)})}}return(r||i)&&(u=u.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,T=b!==a,A=uo(r,b,[]);this._getPreviousPlayers(b,T,u,f,t.toState).forEach($=>{const Z=$.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),$.destroy(),A.push($)})}Wp(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const f=t.triggerName,_=t.element,b=[],T=new Set,A=new Set,F=t.timelines.map(Z=>{const le=Z.element;T.add(le);const Te=le[fa];if(Te&&Te.removedBeforeQueried)return new Xb(Z.duration,Z.delay);const Qe=le!==_,at=function X2(n){const e=[];return Uk(n,e),e}((r.get(le)||G2).map(hn=>hn.getRealPlayer())).filter(hn=>!!hn.element&&hn.element===le),Ct=a.get(le),ft=u.get(le),kt=dk(0,this._normalizer,0,Z.keyframes,Ct,ft),Ut=this._buildPlayer(Z,kt,at);if(Z.subTimeline&&i&&A.add(le),Qe){const hn=new $A(e,f,le);hn.setRealPlayer(Ut),b.push(hn)}return Ut});b.forEach(Z=>{uo(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function Z2(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Z.element,Z))}),T.forEach(Z=>pa(Z,bk));const $=wh(F);return $.onDestroy(()=>{T.forEach(Z=>v_(Z,bk)),lc(_,t.toStyles)}),A.forEach(Z=>{uo(i,Z,[]).push($)}),$}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Xb(e.duration,e.delay)}}class $A{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Xb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>EA(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){uo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function pC(n){return n&&1===n.nodeType}function Fk(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Lk(n,e,t,r,i){const a=[];t.forEach(_=>a.push(Fk(_)));const u=[];r.forEach((_,b)=>{const T=new Map;_.forEach(A=>{const F=e.computeStyle(b,A,i);T.set(A,F),(!F||0==F.length)&&(b[fa]=W2,u.push(b))}),n.set(b,T)});let f=0;return t.forEach(_=>Fk(_,a[f++])),u}function Bk(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(f){if(!f)return 1;let _=a.get(f);if(_)return _;const b=f.parentNode;return _=t.has(b)?b:i.has(b)?1:u(b),a.set(f,_),_}return e.forEach(f=>{const _=u(f);1!==_&&t.get(_).push(f)}),t}function pa(n,e){n.classList?.add(e)}function v_(n,e){n.classList?.remove(e)}function J2(n,e,t){wh(t).onDone(()=>n.processLeaveNode(e))}function Uk(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof QR?Uk(r.players,e):e.push(r)}}function Vk(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class gC{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new K2(e,t,r),this._timelineEngine=new V2(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let f=this._triggerCache[u];if(!f){const _=[],T=NA(this._driver,a,_,[]);if(_.length)throw function LL(n,e){return new d.vHH(3404,!1)}();f=function F2(n,e,t){return new L2(n,e,t)}(i,T,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=hk(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,f]=hk(r);return this._timelineEngine.listen(u,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let nB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&lc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lc(this._element,this._initialStyles),this._endStyles&&(lc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wp(this._element,this._endStyles),this._endStyles=null),lc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function zA(n){let e=null;return n.forEach((t,r)=>{(function rB(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class jk{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Tk(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class iB{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return mk(e,t)}getParentElement(e){return TA(e)}query(e,t,r){return _k(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(_.easing=a);const b=new Map,T=u.filter($=>$ instanceof jk);(function l2(n,e){return 0===n||0===e})(r,i)&&T.forEach($=>{$.currentSnapshot.forEach((Z,le)=>b.set(le,Z))});let A=function r2(n){return n.length?n[0]instanceof Map?n:n.map(e=>wk(e)):[]}(t).map($=>Ih($));A=function c2(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,u)=>{r.has(u)||i.push(u),r.set(u,a)}),i.length)for(let a=1;a<e.length;a++){let u=e[a];i.forEach(f=>u.set(f,Tk(n,f)))}}return e}(e,A,b);const F=function tB(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=zA(e[0]),e.length>1&&(r=zA(e[e.length-1]))):e instanceof Map&&(t=zA(e)),t||r?new nB(n,t,r):null}(e,A);return new jk(e,A,_,F)}}let sB=(()=>{class n extends KR{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?ZR(t):t;return Hk(this._renderer,null,r,"register",[i]),new oB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ue))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class oB extends class hF{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new aB(this._id,e,t||{},this._renderer)}}class aB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Hk(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Hk(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $k="@.disabled";let lB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const f=u?.parentNode(a);f&&u.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(a);return T||(T=new zk("",a,this.engine),this._rendererCache.set(a,T)),T}const u=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(u,f,t,T.name,T)};return r.data.animation.forEach(_),new cB(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,f]=a;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(gC),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class zk{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$k?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cB extends zk{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$k?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function uB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),u="";return"@"!=a.charAt(0)&&([a,u]=function dB(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let hB=(()=>{class n extends gC{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ue),d.LFG(SA),d.LFG(BA),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Gk=[{provide:KR,useClass:sB},{provide:BA,useFactory:function fB(){return new k2}},{provide:gC,useClass:hB},{provide:d.FYo,useFactory:function pB(n,e,t){return new lB(n,e,t)},deps:[ka,gC,d.R0b]}],GA=[{provide:SA,useFactory:()=>new iB},{provide:d.QbO,useValue:"BrowserAnimations"},...Gk],Wk=[{provide:SA,useClass:yk},{provide:d.QbO,useValue:"NoopAnimations"},...Gk];let gB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Wk:GA}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:GA,imports:[Hs]}),n})(),kB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[y_,y_]}),n})();function NB(n,e){1&n&&(d.TgZ(0,"p",12),d._uU(1,"IMPOSTER"),d.qZA())}function PB(n,e){1&n&&(d.TgZ(0,"p",13),d._uU(1,"CREWMATE"),d.qZA())}function OB(n,e){if(1&n&&(d.TgZ(0,"div"),d.YNc(1,NB,2,0,"p",10),d.YNc(2,PB,2,0,"p",11),d._UZ(3,"p"),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",t.isImposter),d.xp6(1),d.Q6J("ngIf",!t.isImposter)}}function FB(n,e){1&n&&(d.TgZ(0,"p",17),d._uU(1,"Dead"),d.qZA())}function LB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",20),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2).$implicit,a=d.oxw();return d.KtG(a.onKillMember(i))}),d._uU(1,"clear"),d.qZA()}}function BB(n,e){if(1&n&&(d.TgZ(0,"div",18),d.YNc(1,LB,2,0,"span",19),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.Q6J("ngIf",!t.isDead)}}function UB(n,e){if(1&n&&(d.TgZ(0,"div",14)(1,"p"),d._uU(2),d.qZA(),d.YNc(3,FB,2,0,"p",15),d.YNc(4,BB,2,1,"div",16),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(2),d.Oqu(t.name),d.xp6(1),d.Q6J("ngIf",t.isDead&&!t.isImposter),d.xp6(1),d.Q6J("ngIf",r.isImposter)}}function VB(n,e){1&n&&(d.TgZ(0,"p",23),d._uU(1,"Done"),d.qZA())}function jB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"span",20),d.NdJ("click",function(){d.CHM(t);const i=d.oxw(2).$implicit,a=d.oxw();return d.KtG(a.onCheckTask(i))}),d._uU(1,"check"),d.qZA()}}function HB(n,e){if(1&n&&(d.TgZ(0,"div",18),d.YNc(1,VB,2,0,"p",22),d.YNc(2,jB,2,0,"span",19),d.qZA()),2&n){const t=d.oxw().$implicit;d.xp6(1),d.Q6J("ngIf",t.isDone),d.xp6(1),d.Q6J("ngIf",!t.isDone)}}function $B(n,e){if(1&n&&(d.TgZ(0,"div",21)(1,"p"),d._uU(2),d.qZA(),d.YNc(3,HB,3,2,"div",16),d.qZA()),2&n){const t=e.$implicit,r=d.oxw();d.xp6(2),d.Oqu(t.task),d.xp6(1),d.Q6J("ngIf",!r.isImposter)}}function zB(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",24),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.onEmergency())}),d._uU(1,"EMERGENCY"),d.qZA()}}let GB=(()=>{class n{constructor(t,r,i,a){this.db=t,this.authService=r,this.router=i,this.location=a,this.user=this.authService.getUser(),this.members=Array(),this.code=localStorage.getItem("code"),this.lobby=t.collection("lobbies").doc(this.code),this.getItems()}ngOnInit(){}getItems(){var t=this;return(0,Ee.Z)(function*(){yield t.lobby.valueChanges().subscribe(r=>{t.users={},t.members=[],t.taskList={},t.tasks=[],t.crewmatesDead=r.crewmatesDead,t.tasksFinished=r.tasksFinished,Object.entries(r.users).forEach(([i,a],u)=>{t.users[i]=a,t.members.push(a)}),Object.entries(r.tasks).forEach(([i,a],u)=>{t.taskList[i]=a,t.tasks.push(a)}),t.endGame()}),t.currMember={uid:localStorage.getItem("uid"),name:localStorage.getItem("name"),isAdmin:localStorage.getItem("isAdmin"),isImposter:!1},t.members.push(t.currMember),setTimeout(()=>{t.users[t.currMember.uid].isImposter&&(t.isImposter=!0),t.impRevealed=!0},3e3)})()}onCheckTask(t){for(let r of this.tasks)r.tid==t.tid&&(r.isDone=!0);for(let r in this.tasks)if(0==this.tasks[r].isDone)return;this.users[this.currMember.uid].tasksDone=!0,this.lobby.update({users:this.users}),this.checkTasks()}onKillMember(t){t.isDead=!0,this.users[t.uid].isDead=!0,this.lobby.update({users:this.users}),this.checkDead()}onEmergency(){}checkDead(){if(0!=Object.keys(this.users).length){for(let t in this.users)if(0==this.users[t].isDead)return;this.lobby.update({crewmatesDead:!0,inGame:!1})}}checkTasks(){if(0!=Object.keys(this.users).length){for(let t in this.users)if(0==this.users[t].tasksDone)return;this.lobby.update({tasksFinished:!0,inGame:!1})}}endGame(){if(!this.gameDone){if(this.tasksFinished)alert("Crewmates Won");else{if(!this.crewmatesDead)return;alert("Imposters won")}this.gameDone=!0,this.router.navigate(["/lobby",this.code],{state:{data:this.code}})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(qb),d.Y36(sA),d.Y36(Wn),d.Y36(Fe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:11,vars:5,consts:[[1,"container"],[1,"screen"],[1,"text",2,"margin-top","8px"],[4,"ngIf"],[1,"text","tabText"],["label","Members",1,"tab"],["style","margin-top: 16px;","class","task",4,"ngFor","ngForOf"],["label","Tasks",1,"tab"],["class","task",4,"ngFor","ngForOf"],["class","button",3,"click",4,"ngIf"],["class","text imposter",4,"ngIf"],["class","text crewmate",4,"ngIf"],[1,"text","imposter"],[1,"text","crewmate"],[1,"task",2,"margin-top","16px"],["style","color: red",4,"ngIf"],["class","iconDiv",4,"ngIf"],[2,"color","red"],[1,"iconDiv"],["class","material-icons icons",3,"click",4,"ngIf"],[1,"material-icons","icons",3,"click"],[1,"task"],["style","color: green",4,"ngIf"],[2,"color","green"],[1,"button",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"p",2),d._uU(3),d.qZA(),d.YNc(4,OB,4,2,"div",3),d.TgZ(5,"mat-tab-group",4)(6,"mat-tab",5),d.YNc(7,UB,5,3,"div",6),d.qZA(),d.TgZ(8,"mat-tab",7),d.YNc(9,$B,4,2,"div",8),d.qZA()(),d.YNc(10,zB,2,0,"button",9),d.qZA()()),2&t&&(d.xp6(3),d.hij("Code: ",r.code,""),d.xp6(1),d.Q6J("ngIf",r.impRevealed),d.xp6(3),d.Q6J("ngForOf",r.members),d.xp6(2),d.Q6J("ngForOf",r.tasks),d.xp6(1),d.Q6J("ngIf",r.emergencyReady))},dependencies:[ki,Rn,ck,bA],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;margin:-8px}.screen[_ngcontent-%COMP%]{background:linear-gradient(90deg,black,#171717);position:relative;height:600px;width:320px;box-shadow:0 0 24px #5c5696;padding:10px;align-items:center;display:flex;flex-direction:column}.tabText[_ngcontent-%COMP%]{font-size:25px}.mat-tab-label[_ngcontent-%COMP%]{color:#fff;font-family:joffrey;font-size:26px;font-weight:100}.task[_ngcontent-%COMP%]{margin-top:16px;flex-direction:row;display:flex;justify-content:space-between}.icons[_ngcontent-%COMP%]{font-size:16px;margin-left:6px;cursor:pointer}.plus[_ngcontent-%COMP%]{font-size:28px;margin-top:10px}.button[_ngcontent-%COMP%]{width:100px;height:50px;color:#fff;border-color:#fff;background-color:transparent;border-radius:4px;font-family:joffrey;font-size:26px}.modal[_ngcontent-%COMP%]{z-index:9;width:200px;height:200px;justify-content:center;align-items:center;display:flex;position:fixed;background:linear-gradient(90deg,black,#171717);box-shadow:0 0 24px #5c5696;padding:10px;flex-direction:column}.textField[_ngcontent-%COMP%]{box-shadow:0 0 24px #5c5696;padding:10px;align-self:center}.imposter[_ngcontent-%COMP%]{font-size:26px;margin-top:5px;color:red}.crewmate[_ngcontent-%COMP%]{font-size:26px;margin-top:5px;color:#0ff}"]}),n})(),WB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[X0]}),n.\u0275inj=d.cJS({imports:[Hs,yD,Cs.hO.initializeApp(ew_firebaseConfig),FP,sy.forRoot([{path:"",component:jP},{path:"main",component:zP},{path:"lobby/:code",component:gL},{path:"game/:code",component:GB}]),gB,lL,kB,VP]}),n})();(0,d.G48)(),Fa().bootstrapModule(WB).catch(n=>console.error(n))},5867:(ht,Me,P)=>{P.d(Me,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=P(9681);(0,d.registerVersion)("firebase","9.9.4","app")},127:(ht,Me,P)=>{P.d(Me,{Z:()=>d.Z});var d=P(3942);d.Z.registerVersion("firebase","9.9.4","app-compat")},5881:(ht,Me,P)=>{P.r(Me);var d=P(5861),B=P(3942),k=P(8554),se=P(2090),ue=(P(9681),P(1877),P(4859));function fe(){return window}function G(){return(G=(0,d.Z)(function*(te,V,H){var be;const{BuildInfo:Ge}=fe();(0,k.aq)(V.sessionId,"AuthEvent did not contain a session ID");const vt=yield me(V.sessionId),Dt={};return(0,k.ar)()?Dt.ibi=Ge.packageName:(0,k.as)()?Dt.apn=Ge.packageName:(0,k.at)(te,"operation-not-supported-in-this-environment"),Ge.displayName&&(Dt.appDisplayName=Ge.displayName),Dt.sessionId=vt,(0,k.au)(te,H,V.type,void 0,null!==(be=V.eventId)&&void 0!==be?be:void 0,Dt)})).apply(this,arguments)}function $e(){return($e=(0,d.Z)(function*(te){const{BuildInfo:V}=fe(),H={};(0,k.ar)()?H.iosBundleId=V.packageName:(0,k.as)()?H.androidPackageName=V.packageName:(0,k.at)(te,"operation-not-supported-in-this-environment"),yield(0,k.av)(te,H)})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(te,V,H){const{cordova:be}=fe();let Ge=()=>{};try{yield new Promise((vt,Dt)=>{let Le=null;function nt(){var jt;vt();const pn=null===(jt=be.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof pn&&pn(),"function"==typeof H?.close&&H.close()}function Qt(){Le||(Le=window.setTimeout(()=>{Dt((0,k.aw)(te,"redirect-cancelled-by-user"))},2e3))}function Sn(){"visible"===document?.visibilityState&&Qt()}V.addPassiveListener(nt),document.addEventListener("resume",Qt,!1),(0,k.as)()&&document.addEventListener("visibilitychange",Sn,!1),Ge=()=>{V.removePassiveListener(nt),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",Sn,!1),Le&&window.clearTimeout(Le)}})}finally{Ge()}})).apply(this,arguments)}function me(te){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*(te){const V=et(te),H=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(H)).map(Ge=>Ge.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et(te){if((0,k.aq)(/[0-9a-zA-Z]+/.test(te),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(te);const V=new ArrayBuffer(te.length),H=new Uint8Array(V);for(let be=0;be<te.length;be++)H[be]=te.charCodeAt(be);return H}class Ne extends k.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(H=>H(V)),super.onEvent(V)}initialized(){var V=this;return(0,d.Z)(function*(){yield V.initPromise})()}}function ie(te){return he.apply(this,arguments)}function he(){return(he=(0,d.Z)(function*(te){const V=yield ee()._get(pe(te));return V&&(yield ee()._remove(pe(te))),V})).apply(this,arguments)}function Q(){const te=[],V="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const be=Math.floor(Math.random()*V.length);te.push(V.charAt(be))}return te.join("")}function ee(){return(0,k.ay)(k.b)}function pe(te){return(0,k.az)("authEvent",te.config.apiKey,te.name)}function je(te){if(!te?.includes("?"))return{};const[V,...H]=te.split("?");return(0,se.zd)(H.join("?"))}function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function Wt(){var te;return(null===(te=self?.location)||void 0===te?void 0:te.protocol)||null}function br(te=(0,se.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!te.toLowerCase().match(/iphone|ipad|ipod|android/))}function xi(){try{const te=self.localStorage,V=k.aI();if(te)return te.setItem(V,"1"),te.removeItem(V),!function Ki(te=(0,se.z$)()){return function wr(){return(0,se.w1)()&&11===document?.documentMode}()||function Tn(te=(0,se.z$)()){return/Edge\/\d+/.test(te)}(te)}()||(0,se.hl)()}catch{return zr()&&(0,se.hl)()}return!1}function zr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Un(){return(function zt(){return"http:"===Wt()||"https:"===Wt()}()||(0,se.ru)()||br())&&!function po(){return(0,se.b$)()||(0,se.UG)()}()&&xi()&&!zr()}function Mi(){return br()&&typeof document<"u"}function tt(){return(tt=(0,d.Z)(function*(){return!!Mi()&&new Promise(te=>{const V=setTimeout(()=>{te(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),te(!0)})})})).apply(this,arguments)}const Vn={LOCAL:"local",NONE:"none",SESSION:"session"},fn=k.ax,Er="persistence";function wn(te){return In.apply(this,arguments)}function In(){return(In=(0,d.Z)(function*(te){yield te._initializationPromise;const V=pt(),H=k.az(Er,te.config.apiKey,te.name);V&&V.setItem(H,te._getPersistence())})).apply(this,arguments)}function pt(){var te;try{return(null===(te=function gr(){return typeof window<"u"?window:null}())||void 0===te?void 0:te.sessionStorage)||null}catch{return null}}const gt=k.ax;class Pt{constructor(){this.browserResolver=k.ay(k.k),this.cordovaResolver=k.ay(class Xt{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(V){var H=this;return(0,d.Z)(function*(){const be=V._key();let Ge=H.eventManagers.get(be);return Ge||(Ge=new Ne(V),H.eventManagers.set(be,Ge),H.attachCallbackListeners(V,Ge)),Ge})()}_openPopup(V){(0,k.at)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,H,be,Ge){var vt=this;return(0,d.Z)(function*(){!function we(te){var V,H,be,Ge,vt,Dt,Le,nt,Qt,Sn;const jt=fe();(0,k.ax)("function"==typeof(null===(V=jt?.universalLinks)||void 0===V?void 0:V.subscribe),te,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(typeof(null===(H=jt?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(vt=null===(Ge=null===(be=jt?.cordova)||void 0===be?void 0:be.plugins)||void 0===Ge?void 0:Ge.browsertab)||void 0===vt?void 0:vt.openUrl),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(nt=null===(Le=null===(Dt=jt?.cordova)||void 0===Dt?void 0:Dt.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===nt?void 0:nt.isAvailable),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(Sn=null===(Qt=jt?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===Sn?void 0:Sn.open),te,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const Dt=yield vt._initialize(V);yield Dt.initialized(),Dt.resetRedirect(),(0,k.aD)(),yield vt._originValidation(V);const Le=function De(te,V,H=null){return{type:V,eventId:H,urlResponse:null,sessionId:Q(),postBody:null,tenantId:te.tenantId,error:(0,k.aw)(te,"no-auth-event")}}(V,be,Ge);yield function We(te,V){return ee()._set(pe(te),V)}(V,Le);const nt=yield function z(te,V,H){return G.apply(this,arguments)}(V,Le,H),Qt=yield function Oe(te){const{cordova:V}=fe();return new Promise(H=>{V.plugins.browsertab.isAvailable(be=>{let Ge=null;be?V.plugins.browsertab.openUrl(te):Ge=V.InAppBrowser.open(te,(0,k.ap)()?"_blank":"_system","location=yes"),H(Ge)})})}(nt);return function Ie(te,V,H){return it.apply(this,arguments)}(V,Dt,Qt)})()}_isIframeWebStorageSupported(V,H){throw new Error("Method not implemented.")}_originValidation(V){const H=V._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function J(te){return $e.apply(this,arguments)}(V)),this.originValidationPromises[H]}attachCallbackListeners(V,H){const{universalLinks:be,handleOpenURL:Ge,BuildInfo:vt}=fe(),Dt=setTimeout((0,d.Z)(function*(){yield ie(V),H.onEvent(qe())}),500),Le=function(){var Sn=(0,d.Z)(function*(jt){clearTimeout(Dt);const pn=yield ie(V);let Yi=null;pn&&jt?.url&&(Yi=function ye(te,V){var H,be;const Ge=function Ve(te){const V=je(te),H=V.link?decodeURIComponent(V.link):void 0,be=je(H).link,Ge=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return je(Ge).link||Ge||be||H||te}(V);if(Ge.includes("/__/auth/callback")){const vt=je(Ge),Dt=vt.firebaseError?function oe(te){try{return JSON.parse(te)}catch{return null}}(decodeURIComponent(vt.firebaseError)):null,Le=null===(be=null===(H=Dt?.code)||void 0===H?void 0:H.split("auth/"))||void 0===be?void 0:be[1],nt=Le?(0,k.aw)(Le):null;return nt?{type:te.type,eventId:te.eventId,tenantId:te.tenantId,error:nt,urlResponse:null,sessionId:null,postBody:null}:{type:te.type,eventId:te.eventId,tenantId:te.tenantId,sessionId:te.sessionId,urlResponse:Ge,postBody:null}}return null}(pn,jt.url)),H.onEvent(Yi||qe())});return function(pn){return Sn.apply(this,arguments)}}();typeof be<"u"&&"function"==typeof be.subscribe&&be.subscribe(null,Le);const nt=Ge,Qt=`${vt.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var Sn=(0,d.Z)(function*(jt){if(jt.toLowerCase().startsWith(Qt)&&Le({url:jt}),"function"==typeof nt)try{nt(jt)}catch(pn){console.error(pn)}});return function(jt){return Sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(V){var H=this;return(0,d.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,H,be,Ge){var vt=this;return(0,d.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup(V,H,be,Ge)})()}_openRedirect(V,H,be,Ge){var vt=this;return(0,d.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect(V,H,be,Ge)})()}_isIframeWebStorageSupported(V,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,H)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return Mi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,d.Z)(function*(){if(V.underlyingResolver)return;const H=yield function Ri(){return tt.apply(this,arguments)}();V.underlyingResolver=H?V.cordovaResolver:V.browserResolver})()}}function Pr(te){return te.unwrap()}function Ir(te){return Sr(te)}function Sr(te){const{_tokenResponse:V}=te instanceof se.ZR?te.customData:te;if(!V)return null;if(!(te instanceof se.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return k.P.credentialFromResult(te);const H=V.providerId;if(!H||H===k.o.PASSWORD)return null;let be;switch(H){case k.o.GOOGLE:be=k.Q;break;case k.o.FACEBOOK:be=k.N;break;case k.o.GITHUB:be=k.T;break;case k.o.TWITTER:be=k.W;break;default:const{oauthIdToken:Ge,oauthAccessToken:vt,oauthTokenSecret:Dt,pendingToken:Le,nonce:nt}=V;return vt||Dt||Ge||Le?Le?H.startsWith("saml.")?k.aL._create(H,Le):k.J._fromParams({providerId:H,signInMethod:H,pendingToken:Le,idToken:Ge,accessToken:vt}):new k.U(H).credential({idToken:Ge,accessToken:vt,rawNonce:nt}):null}return te instanceof se.ZR?be.credentialFromError(te):be.credentialFromResult(te)}function Bt(te,V){return V.catch(H=>{throw H instanceof se.ZR&&function St(te,V){var H,be;const Ge=null===(H=V.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(be=V)||void 0===be?void 0:be.code))V.resolver=new Y(te,k.an(te,V));else if(Ge){const vt=Sr(V),Dt=V;vt&&(Dt.credential=vt,Dt.tenantId=Ge.tenantId||void 0,Dt.email=Ge.email||void 0,Dt.phoneNumber=Ge.phoneNumber||void 0)}}(te,H),H}).then(H=>{const Ge=H.user;return{operationType:H.operationType,credential:Ir(H),additionalUserInfo:k.al(H),user:j.getOrCreate(Ge)}})}function Gr(te,V){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(te,V){const H=yield V;return{verificationId:H.verificationId,confirm:be=>Bt(te,H.confirm(be))}})).apply(this,arguments)}class Y{constructor(V,H){this.resolver=H,this.auth=function mr(te){return te.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return Bt(Pr(this.auth),this.resolver.resolveSignIn(V))}}class j{constructor(V){this._delegate=V,this.multiFactor=k.ao(V)}static getOrCreate(V){return j.USER_MAP.has(V)||j.USER_MAP.set(V,new j(V)),j.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var H=this;return(0,d.Z)(function*(){return Bt(H.auth,k.Z(H._delegate,V))})()}linkWithPhoneNumber(V,H){var be=this;return(0,d.Z)(function*(){return Gr(be.auth,k.l(be._delegate,V,H))})()}linkWithPopup(V){var H=this;return(0,d.Z)(function*(){return Bt(H.auth,k.d(H._delegate,V,Pt))})()}linkWithRedirect(V){var H=this;return(0,d.Z)(function*(){return yield wn(k.aE(H.auth)),k.g(H._delegate,V,Pt)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var H=this;return(0,d.Z)(function*(){return Bt(H.auth,k._(H._delegate,V))})()}reauthenticateWithPhoneNumber(V,H){return Gr(this.auth,k.r(this._delegate,V,H))}reauthenticateWithPopup(V){return Bt(this.auth,k.e(this._delegate,V,Pt))}reauthenticateWithRedirect(V){var H=this;return(0,d.Z)(function*(){return yield wn(k.aE(H.auth)),k.h(H._delegate,V,Pt)})()}sendEmailVerification(V){return k.ab(this._delegate,V)}unlink(V){var H=this;return(0,d.Z)(function*(){return yield k.ak(H._delegate,V),H})()}updateEmail(V){return k.ag(this._delegate,V)}updatePassword(V){return k.ah(this._delegate,V)}updatePhoneNumber(V){return k.u(this._delegate,V)}updateProfile(V){return k.af(this._delegate,V)}verifyBeforeUpdateEmail(V,H){return k.ac(this._delegate,V,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}j.USER_MAP=new WeakMap;const U=k.ax;let W=(()=>{class te{constructor(H,be){if(this.app=H,be.isInitialized())return this._delegate=be.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ge}=H.options;U(Ge,"invalid-api-key",{appName:H.name}),U(Ge,"invalid-api-key",{appName:H.name});const vt=typeof window<"u"?Pt:void 0;this._delegate=be.initialize({options:{persistence:Ae(Ge,H.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?j.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,be){k.G(this._delegate,H,be)}applyActionCode(H){return k.a2(this._delegate,H)}checkActionCode(H){return k.a3(this._delegate,H)}confirmPasswordReset(H,be){return k.a1(this._delegate,H,be)}createUserWithEmailAndPassword(H,be){var Ge=this;return(0,d.Z)(function*(){return Bt(Ge._delegate,k.a5(Ge._delegate,H,be))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return k.aa(this._delegate,H)}isSignInWithEmailLink(H){return k.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,d.Z)(function*(){U(Un(),H._delegate,"operation-not-supported-in-this-environment");const be=yield k.j(H._delegate,Pt);return be?Bt(H._delegate,Promise.resolve(be)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function mn(te,V){(0,k.aE)(te)._logFramework(V)}(this._delegate,H)}onAuthStateChanged(H,be,Ge){const{next:vt,error:Dt,complete:Le}=q(H,be,Ge);return this._delegate.onAuthStateChanged(vt,Dt,Le)}onIdTokenChanged(H,be,Ge){const{next:vt,error:Dt,complete:Le}=q(H,be,Ge);return this._delegate.onIdTokenChanged(vt,Dt,Le)}sendSignInLinkToEmail(H,be){return k.a7(this._delegate,H,be)}sendPasswordResetEmail(H,be){return k.a0(this._delegate,H,be||void 0)}setPersistence(H){var be=this;return(0,d.Z)(function*(){let Ge;switch(function Zi(te,V){fn(Object.values(Vn).includes(V),te,"invalid-persistence-type"),(0,se.b$)()?fn(V!==Vn.SESSION,te,"unsupported-persistence-type"):(0,se.UG)()?fn(V===Vn.NONE,te,"unsupported-persistence-type"):zr()?fn(V===Vn.NONE||V===Vn.LOCAL&&(0,se.hl)(),te,"unsupported-persistence-type"):fn(V===Vn.NONE||xi(),te,"unsupported-persistence-type")}(be._delegate,H),H){case Vn.SESSION:Ge=k.a;break;case Vn.LOCAL:Ge=(yield k.ay(k.i)._isAvailable())?k.i:k.b;break;case Vn.NONE:Ge=k.L;break;default:return k.at("argument-error",{appName:be._delegate.name})}return be._delegate.setPersistence(Ge)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Bt(this._delegate,k.X(this._delegate))}signInWithCredential(H){return Bt(this._delegate,k.Y(this._delegate,H))}signInWithCustomToken(H){return Bt(this._delegate,k.$(this._delegate,H))}signInWithEmailAndPassword(H,be){return Bt(this._delegate,k.a6(this._delegate,H,be))}signInWithEmailLink(H,be){return Bt(this._delegate,k.a9(this._delegate,H,be))}signInWithPhoneNumber(H,be){return Gr(this._delegate,k.s(this._delegate,H,be))}signInWithPopup(H){var be=this;return(0,d.Z)(function*(){return U(Un(),be._delegate,"operation-not-supported-in-this-environment"),Bt(be._delegate,k.c(be._delegate,H,Pt))})()}signInWithRedirect(H){var be=this;return(0,d.Z)(function*(){return U(Un(),be._delegate,"operation-not-supported-in-this-environment"),yield wn(be._delegate),k.f(be._delegate,H,Pt)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return k.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return te.Persistence=Vn,te})();function q(te,V,H){let be=te;"function"!=typeof te&&({next:be,error:V,complete:H}=te);const Ge=be;return{next:Dt=>Ge(Dt&&j.getOrCreate(Dt)),error:V,complete:H}}function Ae(te,V){const H=function vn(te,V){const H=pt();if(!H)return[];const be=k.az(Er,te,V);switch(H.getItem(be)){case Vn.NONE:return[k.L];case Vn.LOCAL:return[k.i,k.a];case Vn.SESSION:return[k.a];default:return[]}}(te,V);if(typeof self<"u"&&!H.includes(k.i)&&H.push(k.i),typeof window<"u")for(const be of[k.b,k.a])H.includes(be)||H.push(be);return H.includes(k.L)||H.push(k.L),H}class ze{constructor(){this.providerId="phone",this._delegate=new k.P(Pr(B.Z.auth()))}static credential(V,H){return k.P.credential(V,H)}verifyPhoneNumber(V,H){return this._delegate.verifyPhoneNumber(V,H)}unwrap(){return this._delegate}}ze.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,ze.PROVIDER_ID=k.P.PROVIDER_ID;const Et=k.ax;class ln{constructor(V,H,be=B.Z.app()){var Ge;Et(null===(Ge=be.options)||void 0===Ge?void 0:Ge.apiKey,"invalid-api-key",{appName:be.name}),this._delegate=new k.R(V,H,be.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function er(te){te.INTERNAL.registerComponent(new ue.wA("auth-compat",V=>{const H=V.getProvider("app-compat").getImmediate(),be=V.getProvider("auth");return new W(H,be)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:ze,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:ln,TwitterAuthProvider:k.W,Auth:W,AuthCredential:k.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),te.registerVersion("@firebase/auth-compat","0.2.19")}(B.Z)},9751:(ht,Me,P)=>{P.d(Me,{y:()=>fe});var d=P(930),B=P(727),k=P(8822),se=P(9635),ce=P(2416),_e=P(576),ue=P(2806);let fe=(()=>{class J{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const Ie=new J;return Ie.source=this,Ie.operator=Oe,Ie}subscribe(Oe,Ie,it){const we=function G(J){return J&&J instanceof d.Lv||function z(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,B.Nn)(J)}(Oe)?Oe:new d.Hp(Oe,Ie,it);return(0,ue.x)(()=>{const{operator:me,source:Xe}=this;we.add(me?me.call(we,Xe):Xe?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(Ie){Oe.error(Ie)}}forEach(Oe,Ie){return new(Ie=ve(Ie))((it,we)=>{const me=new d.Hp({next:Xe=>{try{Oe(Xe)}catch(et){we(et),me.unsubscribe()}},error:we,complete:it});this.subscribe(me)})}_subscribe(Oe){var Ie;return null===(Ie=this.source)||void 0===Ie?void 0:Ie.subscribe(Oe)}[k.L](){return this}pipe(...Oe){return(0,se.U)(Oe)(this)}toPromise(Oe){return new(Oe=ve(Oe))((Ie,it)=>{let we;this.subscribe(me=>we=me,me=>it(me),()=>Ie(we))})}}return J.create=$e=>new J($e),J})();function ve(J){var $e;return null!==($e=J??ce.v.Promise)&&void 0!==$e?$e:Promise}},7579:(ht,Me,P)=>{P.d(Me,{x:()=>ue});var d=P(9751),B=P(727);const se=(0,P(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=P(8737),_e=P(2806);let ue=(()=>{class ve extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new fe(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new se}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:$e,observers:Oe}=this;return J||$e?B.Lc:(this.currentObservers=null,Oe.push(G),new B.w0(()=>{this.currentObservers=null,(0,ce.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:$e,isStopped:Oe}=this;J?G.error($e):Oe&&G.complete()}asObservable(){const G=new d.y;return G.source=this,G}}return ve.create=(z,G)=>new fe(z,G),ve})();class fe extends ue{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,z)}error(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==J?J:B.Lc}}},930:(ht,Me,P)=>{P.d(Me,{Hp:()=>it,Lv:()=>J});var d=P(576),B=P(727),k=P(2416),se=P(7849),ce=P(5032);const _e=ve("C",void 0,void 0);function ve(Fe,Ne,De){return{kind:Fe,value:Ne,error:De}}var z=P(3410),G=P(2806);class J extends B.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,B.Nn)(Ne)&&Ne.add(this)):this.destination=et}static create(Ne,De,We){return new it(Ne,De,We)}next(Ne){this.isStopped?Xe(function fe(Fe){return ve("N",Fe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Xe(function ue(Fe){return ve("E",void 0,Fe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Xe(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Oe(Fe,Ne){return $e.call(Fe,Ne)}class Ie{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:De}=this;if(De.next)try{De.next(Ne)}catch(We){we(We)}}error(Ne){const{partialObserver:De}=this;if(De.error)try{De.error(Ne)}catch(We){we(We)}else we(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(De){we(De)}}}class it extends J{constructor(Ne,De,We){let ie;if(super(),(0,d.m)(Ne)||!Ne)ie={next:Ne??void 0,error:De??void 0,complete:We??void 0};else{let he;this&&k.v.useDeprecatedNextContext?(he=Object.create(Ne),he.unsubscribe=()=>this.unsubscribe(),ie={next:Ne.next&&Oe(Ne.next,he),error:Ne.error&&Oe(Ne.error,he),complete:Ne.complete&&Oe(Ne.complete,he)}):ie=Ne}this.destination=new Ie(ie)}}function we(Fe){k.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Fe):(0,se.h)(Fe)}function Xe(Fe,Ne){const{onStoppedNotification:De}=k.v;De&&z.z.setTimeout(()=>De(Fe,Ne))}const et={closed:!0,next:ce.Z,error:function me(Fe){throw Fe},complete:ce.Z}},727:(ht,Me,P)=>{P.d(Me,{Lc:()=>_e,w0:()=>ce,Nn:()=>ue});var d=P(576);const k=(0,P(3888).d)(ve=>function(G){ve(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var se=P(8737);class ce{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,d.m)(J))try{J()}catch(Oe){z=Oe instanceof k?Oe.errors:[Oe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Oe of $e)try{fe(Oe)}catch(Ie){z=z??[],Ie instanceof k?z=[...z,...Ie.errors]:z.push(Ie)}}if(z)throw new k(z)}}add(z){var G;if(z&&z!==this)if(this.closed)fe(z);else{if(z instanceof ce){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,se.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,se.P)(G,z),z instanceof ce&&z._removeParent(this)}}ce.EMPTY=(()=>{const ve=new ce;return ve.closed=!0,ve})();const _e=ce.EMPTY;function ue(ve){return ve instanceof ce||ve&&"closed"in ve&&(0,d.m)(ve.remove)&&(0,d.m)(ve.add)&&(0,d.m)(ve.unsubscribe)}function fe(ve){(0,d.m)(ve)?ve():ve.unsubscribe()}},2416:(ht,Me,P)=>{P.d(Me,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Me,P)=>{P.d(Me,{E:()=>B});const B=new(P(9751).y)(ce=>ce.complete())},8996:(ht,Me,P)=>{P.d(Me,{D:()=>Ne});var d=P(8421),B=P(5363),k=P(9468),_e=P(9751),fe=P(2202),ve=P(576),z=P(9672);function J(De,We){if(!De)throw new Error("Iterable cannot be null");return new _e.y(ie=>{(0,z.f)(ie,We,()=>{const he=De[Symbol.asyncIterator]();(0,z.f)(ie,We,()=>{he.next().then(ye=>{ye.done?ie.complete():ie.next(ye.value)})},0,!0)})})}var $e=P(3670),Oe=P(8239),Ie=P(1144),it=P(6495),we=P(2206),me=P(4532),Xe=P(3260);function Ne(De,We){return We?function Fe(De,We){if(null!=De){if((0,$e.c)(De))return function se(De,We){return(0,d.Xf)(De).pipe((0,k.R)(We),(0,B.Q)(We))}(De,We);if((0,Ie.z)(De))return function ue(De,We){return new _e.y(ie=>{let he=0;return We.schedule(function(){he===De.length?ie.complete():(ie.next(De[he++]),ie.closed||this.schedule())})})}(De,We);if((0,Oe.t)(De))return function ce(De,We){return(0,d.Xf)(De).pipe((0,k.R)(We),(0,B.Q)(We))}(De,We);if((0,we.D)(De))return J(De,We);if((0,it.T)(De))return function G(De,We){return new _e.y(ie=>{let he;return(0,z.f)(ie,We,()=>{he=De[fe.h](),(0,z.f)(ie,We,()=>{let ye,Q;try{({value:ye,done:Q}=he.next())}catch(ee){return void ie.error(ee)}Q?ie.complete():ie.next(ye)},0,!0)}),()=>(0,ve.m)(he?.return)&&he.return()})}(De,We);if((0,Xe.L)(De))return function et(De,We){return J((0,Xe.Q)(De),We)}(De,We)}throw(0,me.z)(De)}(De,We):(0,d.Xf)(De)}},8421:(ht,Me,P)=>{P.d(Me,{Xf:()=>$e});var d=P(655),B=P(1144),k=P(8239),se=P(9751),ce=P(3670),_e=P(2206),ue=P(4532),fe=P(6495),ve=P(3260),z=P(576),G=P(7849),J=P(8822);function $e(Fe){if(Fe instanceof se.y)return Fe;if(null!=Fe){if((0,ce.c)(Fe))return function Oe(Fe){return new se.y(Ne=>{const De=Fe[J.L]();if((0,z.m)(De.subscribe))return De.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,B.z)(Fe))return function Ie(Fe){return new se.y(Ne=>{for(let De=0;De<Fe.length&&!Ne.closed;De++)Ne.next(Fe[De]);Ne.complete()})}(Fe);if((0,k.t)(Fe))return function it(Fe){return new se.y(Ne=>{Fe.then(De=>{Ne.closed||(Ne.next(De),Ne.complete())},De=>Ne.error(De)).then(null,G.h)})}(Fe);if((0,_e.D)(Fe))return me(Fe);if((0,fe.T)(Fe))return function we(Fe){return new se.y(Ne=>{for(const De of Fe)if(Ne.next(De),Ne.closed)return;Ne.complete()})}(Fe);if((0,ve.L)(Fe))return function Xe(Fe){return me((0,ve.Q)(Fe))}(Fe)}throw(0,ue.z)(Fe)}function me(Fe){return new se.y(Ne=>{(function et(Fe,Ne){var De,We,ie,he;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(Fe);!(We=yield De.next()).done;)if(Ne.next(We.value),Ne.closed)return}catch(ye){ie={error:ye}}finally{try{We&&!We.done&&(he=De.return)&&(yield he.call(De))}finally{if(ie)throw ie.error}}Ne.complete()})})(Fe,Ne).catch(De=>Ne.error(De))})}},6451:(ht,Me,P)=>{P.d(Me,{T:()=>_e});var d=P(8189),B=P(8421),k=P(515),se=P(3269),ce=P(8996);function _e(...ue){const fe=(0,se.yG)(ue),ve=(0,se._6)(ue,1/0),z=ue;return z.length?1===z.length?(0,B.Xf)(z[0]):(0,d.J)(ve)((0,ce.D)(z,fe)):k.E}},5403:(ht,Me,P)=>{P.d(Me,{x:()=>B});var d=P(930);function B(se,ce,_e,ue,fe){return new k(se,ce,_e,ue,fe)}class k extends d.Lv{constructor(ce,_e,ue,fe,ve,z){super(ce),this.onFinalize=ve,this.shouldUnsubscribe=z,this._next=_e?function(G){try{_e(G)}catch(J){ce.error(J)}}:super._next,this._error=fe?function(G){try{fe(G)}catch(J){ce.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(G){ce.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(ht,Me,P)=>{P.d(Me,{U:()=>k});var d=P(4482),B=P(5403);function k(se,ce){return(0,d.e)((_e,ue)=>{let fe=0;_e.subscribe((0,B.x)(ue,ve=>{ue.next(se.call(ce,ve,fe++))}))})}},8189:(ht,Me,P)=>{P.d(Me,{J:()=>k});var d=P(5577),B=P(4671);function k(se=1/0){return(0,d.z)(B.y,se)}},5577:(ht,Me,P)=>{P.d(Me,{z:()=>fe});var d=P(4004),B=P(8421),k=P(4482),se=P(9672),ce=P(5403),ue=P(576);function fe(ve,z,G=1/0){return(0,ue.m)(z)?fe((J,$e)=>(0,d.U)((Oe,Ie)=>z(J,Oe,$e,Ie))((0,B.Xf)(ve(J,$e))),G):("number"==typeof z&&(G=z),(0,k.e)((J,$e)=>function _e(ve,z,G,J,$e,Oe,Ie,it){const we=[];let me=0,Xe=0,et=!1;const Fe=()=>{et&&!we.length&&!me&&z.complete()},Ne=We=>me<J?De(We):we.push(We),De=We=>{Oe&&z.next(We),me++;let ie=!1;(0,B.Xf)(G(We,Xe++)).subscribe((0,ce.x)(z,he=>{$e?.(he),Oe?Ne(he):z.next(he)},()=>{ie=!0},void 0,()=>{if(ie)try{for(me--;we.length&&me<J;){const he=we.shift();Ie?(0,se.f)(z,Ie,()=>De(he)):De(he)}Fe()}catch(he){z.error(he)}}))};return ve.subscribe((0,ce.x)(z,Ne,()=>{et=!0,Fe()})),()=>{it?.()}}(J,$e,ve,G)))}},5363:(ht,Me,P)=>{P.d(Me,{Q:()=>se});var d=P(9672),B=P(4482),k=P(5403);function se(ce,_e=0){return(0,B.e)((ue,fe)=>{ue.subscribe((0,k.x)(fe,ve=>(0,d.f)(fe,ce,()=>fe.next(ve),_e),()=>(0,d.f)(fe,ce,()=>fe.complete(),_e),ve=>(0,d.f)(fe,ce,()=>fe.error(ve),_e)))})}},3099:(ht,Me,P)=>{P.d(Me,{B:()=>ce});var d=P(8421),B=P(7579),k=P(930),se=P(4482);function ce(ue={}){const{connector:fe=(()=>new B.x),resetOnError:ve=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=ue;return J=>{let $e,Oe,Ie,it=0,we=!1,me=!1;const Xe=()=>{Oe?.unsubscribe(),Oe=void 0},et=()=>{Xe(),$e=Ie=void 0,we=me=!1},Fe=()=>{const Ne=$e;et(),Ne?.unsubscribe()};return(0,se.e)((Ne,De)=>{it++,!me&&!we&&Xe();const We=Ie=Ie??fe();De.add(()=>{it--,0===it&&!me&&!we&&(Oe=_e(Fe,G))}),We.subscribe(De),!$e&&it>0&&($e=new k.Hp({next:ie=>We.next(ie),error:ie=>{me=!0,Xe(),Oe=_e(et,ve,ie),We.error(ie)},complete:()=>{we=!0,Xe(),Oe=_e(et,z),We.complete()}}),(0,d.Xf)(Ne).subscribe($e))})(J)}}function _e(ue,fe,...ve){if(!0===fe)return void ue();if(!1===fe)return;const z=new k.Hp({next:()=>{z.unsubscribe(),ue()}});return fe(...ve).subscribe(z)}},9468:(ht,Me,P)=>{P.d(Me,{R:()=>B});var d=P(4482);function B(k,se=0){return(0,d.e)((ce,_e)=>{_e.add(k.schedule(()=>ce.subscribe(_e),se))})}},8505:(ht,Me,P)=>{P.d(Me,{b:()=>ce});var d=P(576),B=P(4482),k=P(5403),se=P(4671);function ce(_e,ue,fe){const ve=(0,d.m)(_e)||ue||fe?{next:_e,error:ue,complete:fe}:_e;return ve?(0,B.e)((z,G)=>{var J;null===(J=ve.subscribe)||void 0===J||J.call(ve);let $e=!0;z.subscribe((0,k.x)(G,Oe=>{var Ie;null===(Ie=ve.next)||void 0===Ie||Ie.call(ve,Oe),G.next(Oe)},()=>{var Oe;$e=!1,null===(Oe=ve.complete)||void 0===Oe||Oe.call(ve),G.complete()},Oe=>{var Ie;$e=!1,null===(Ie=ve.error)||void 0===Ie||Ie.call(ve,Oe),G.error(Oe)},()=>{var Oe,Ie;$e&&(null===(Oe=ve.unsubscribe)||void 0===Oe||Oe.call(ve)),null===(Ie=ve.finalize)||void 0===Ie||Ie.call(ve)}))}):se.y}},4408:(ht,Me,P)=>{P.d(Me,{o:()=>ce});var d=P(727);class B extends d.w0{constructor(ue,fe){super()}schedule(ue,fe=0){return this}}const k={setInterval(_e,ue,...fe){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(_e,ue,...fe):setInterval(_e,ue,...fe)},clearInterval(_e){const{delegate:ue}=k;return(ue?.clearInterval||clearInterval)(_e)},delegate:void 0};var se=P(8737);class ce extends B{constructor(ue,fe){super(ue,fe),this.scheduler=ue,this.work=fe,this.pending=!1}schedule(ue,fe=0){if(this.closed)return this;this.state=ue;const ve=this.id,z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(z,ve,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(z,this.id,fe),this}requestAsyncId(ue,fe,ve=0){return k.setInterval(ue.flush.bind(ue,this),ve)}recycleAsyncId(ue,fe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return fe;k.clearInterval(fe)}execute(ue,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ue,fe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,fe){let z,ve=!1;try{this.work(ue)}catch(G){ve=!0,z=G||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:ue,scheduler:fe}=this,{actions:ve}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(ve,this),null!=ue&&(this.id=this.recycleAsyncId(fe,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Me,P)=>{P.d(Me,{v:()=>k});var d=P(6063);class B{constructor(ce,_e=B.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,ue){return new this.schedulerActionCtor(this,ce).schedule(ue,_e)}}B.now=d.l.now;class k extends B{constructor(ce,_e=B.now){super(ce,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let ue;this._active=!0;do{if(ue=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,ue){for(;ce=_e.shift();)ce.unsubscribe();throw ue}}}},4986:(ht,Me,P)=>{P.d(Me,{P:()=>se,z:()=>k});var d=P(4408);const k=new(P(7565).v)(d.o),se=k},6063:(ht,Me,P)=>{P.d(Me,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ht,Me,P)=>{P.d(Me,{z:()=>d});const d={setTimeout(B,k,...se){const{delegate:ce}=d;return ce?.setTimeout?ce.setTimeout(B,k,...se):setTimeout(B,k,...se)},clearTimeout(B){const{delegate:k}=d;return(k?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(ht,Me,P)=>{P.d(Me,{h:()=>B});const B=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Me,P)=>{P.d(Me,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ht,Me,P)=>{P.d(Me,{_6:()=>_e,jO:()=>se,yG:()=>ce});var d=P(576),B=P(3532);function k(ue){return ue[ue.length-1]}function se(ue){return(0,d.m)(k(ue))?ue.pop():void 0}function ce(ue){return(0,B.K)(k(ue))?ue.pop():void 0}function _e(ue,fe){return"number"==typeof k(ue)?ue.pop():fe}},8737:(ht,Me,P)=>{function d(B,k){if(B){const se=B.indexOf(k);0<=se&&B.splice(se,1)}}P.d(Me,{P:()=>d})},3888:(ht,Me,P)=>{function d(B){const se=B(ce=>{Error.call(ce),ce.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}P.d(Me,{d:()=>d})},2806:(ht,Me,P)=>{P.d(Me,{O:()=>se,x:()=>k});var d=P(2416);let B=null;function k(ce){if(d.v.useDeprecatedSynchronousErrorHandling){const _e=!B;if(_e&&(B={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:ue,error:fe}=B;if(B=null,ue)throw fe}}else ce()}function se(ce){d.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ce)}},9672:(ht,Me,P)=>{function d(B,k,se,ce=0,_e=!1){const ue=k.schedule(function(){se(),_e?B.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(B.add(ue),!_e)return ue}P.d(Me,{f:()=>d})},4671:(ht,Me,P)=>{function d(B){return B}P.d(Me,{y:()=>d})},1144:(ht,Me,P)=>{P.d(Me,{z:()=>d});const d=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(ht,Me,P)=>{P.d(Me,{D:()=>B});var d=P(576);function B(k){return Symbol.asyncIterator&&(0,d.m)(k?.[Symbol.asyncIterator])}},576:(ht,Me,P)=>{function d(B){return"function"==typeof B}P.d(Me,{m:()=>d})},3670:(ht,Me,P)=>{P.d(Me,{c:()=>k});var d=P(8822),B=P(576);function k(se){return(0,B.m)(se[d.L])}},6495:(ht,Me,P)=>{P.d(Me,{T:()=>k});var d=P(2202),B=P(576);function k(se){return(0,B.m)(se?.[d.h])}},8239:(ht,Me,P)=>{P.d(Me,{t:()=>B});var d=P(576);function B(k){return(0,d.m)(k?.then)}},3260:(ht,Me,P)=>{P.d(Me,{L:()=>se,Q:()=>k});var d=P(655),B=P(576);function k(ce){return(0,d.FC)(this,arguments,function*(){const ue=ce.getReader();try{for(;;){const{value:fe,done:ve}=yield(0,d.qq)(ue.read());if(ve)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(fe)}}finally{ue.releaseLock()}})}function se(ce){return(0,B.m)(ce?.getReader)}},3532:(ht,Me,P)=>{P.d(Me,{K:()=>B});var d=P(576);function B(k){return k&&(0,d.m)(k.schedule)}},4482:(ht,Me,P)=>{P.d(Me,{A:()=>B,e:()=>k});var d=P(576);function B(se){return(0,d.m)(se?.lift)}function k(se){return ce=>{if(B(ce))return ce.lift(function(_e){try{return se(_e,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ht,Me,P)=>{function d(){}P.d(Me,{Z:()=>d})},9635:(ht,Me,P)=>{P.d(Me,{U:()=>k,z:()=>B});var d=P(4671);function B(...se){return k(se)}function k(se){return 0===se.length?d.y:1===se.length?se[0]:function(_e){return se.reduce((ue,fe)=>fe(ue),_e)}}},7849:(ht,Me,P)=>{P.d(Me,{h:()=>k});var d=P(2416),B=P(3410);function k(se){B.z.setTimeout(()=>{const{onUnhandledError:ce}=d.v;if(!ce)throw se;ce(se)})}},4532:(ht,Me,P)=>{function d(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Me,{z:()=>d})},655:(ht,Me,P)=>{function se(Q,ee){var pe={};for(var oe in Q)Object.prototype.hasOwnProperty.call(Q,oe)&&ee.indexOf(oe)<0&&(pe[oe]=Q[oe]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Ve=0;for(oe=Object.getOwnPropertySymbols(Q);Ve<oe.length;Ve++)ee.indexOf(oe[Ve])<0&&Object.prototype.propertyIsEnumerable.call(Q,oe[Ve])&&(pe[oe[Ve]]=Q[oe[Ve]])}return pe}function fe(Q,ee,pe,oe){return new(pe||(pe=Promise))(function(je,yt){function Xt(mn){try{qe(oe.next(mn))}catch(Bn){yt(Bn)}}function Kt(mn){try{qe(oe.throw(mn))}catch(Bn){yt(Bn)}}function qe(mn){mn.done?je(mn.value):function Ve(je){return je instanceof pe?je:new pe(function(yt){yt(je)})}(mn.value).then(Xt,Kt)}qe((oe=oe.apply(Q,ee||[])).next())})}function we(Q){return this instanceof we?(this.v=Q,this):new we(Q)}function me(Q,ee,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,oe=pe.apply(Q,ee||[]),je=[];return Ve={},yt("next"),yt("throw"),yt("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve;function yt(on){oe[on]&&(Ve[on]=function(tn){return new Promise(function(Wt,zt){je.push([on,tn,Wt,zt])>1||Xt(on,tn)})})}function Xt(on,tn){try{!function Kt(on){on.value instanceof we?Promise.resolve(on.value.v).then(qe,mn):Bn(je[0][2],on)}(oe[on](tn))}catch(Wt){Bn(je[0][3],Wt)}}function qe(on){Xt("next",on)}function mn(on){Xt("throw",on)}function Bn(on,tn){on(tn),je.shift(),je.length&&Xt(je[0][0],je[0][1])}}function et(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ee=Q[Symbol.asyncIterator];return ee?ee.call(Q):(Q=function J(Q){var ee="function"==typeof Symbol&&Symbol.iterator,pe=ee&&Q[ee],oe=0;if(pe)return pe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&oe>=Q.length&&(Q=void 0),{value:Q&&Q[oe++],done:!Q}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),pe={},oe("next"),oe("throw"),oe("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function oe(je){pe[je]=Q[je]&&function(yt){return new Promise(function(Xt,Kt){!function Ve(je,yt,Xt,Kt){Promise.resolve(Kt).then(function(qe){je({value:qe,done:Xt})},yt)}(Xt,Kt,(yt=Q[je](yt)).done,yt.value)})}}}P.d(Me,{FC:()=>me,KL:()=>et,_T:()=>se,mG:()=>fe,qq:()=>we})},4650:(ht,Me,P)=>{P.d(Me,{$8M:()=>Il,$Z:()=>gi,AFp:()=>Nr,AaK:()=>fe,CHM:()=>Mh,CRH:()=>OE,CZH:()=>oh,CqO:()=>qy,D6c:()=>bI,EJc:()=>Ep,EiD:()=>f0,EpF:()=>Gy,F$t:()=>Qy,F4k:()=>Wy,FYo:()=>RC,FiY:()=>Be,G48:()=>ic,Gf:()=>ol,GfV:()=>T0,Gpc:()=>G,Hsn:()=>Jc,JOm:()=>Ko,JVY:()=>hg,Jf7:()=>O0,KtG:()=>Do,L6k:()=>T_,LAX:()=>h0,LFG:()=>_n,LSH:()=>sf,Lbi:()=>KE,Lck:()=>mE,MAs:()=>Gf,MMx:()=>Pv,NdJ:()=>nl,O4$:()=>bc,OlP:()=>En,Oqu:()=>Sm,PXZ:()=>YT,Q6J:()=>bm,QGY:()=>Ud,QP$:()=>Ge,QbO:()=>$T,Qsj:()=>F_,R0b:()=>Gi,RDi:()=>ug,Rgc:()=>Kl,SBq:()=>vg,Sil:()=>zT,Suo:()=>Zv,TTD:()=>ys,TgZ:()=>Em,VKq:()=>Vm,W1O:()=>nh,WLB:()=>Bv,X6Q:()=>vb,XFs:()=>tt,Xpm:()=>W,Xts:()=>A_,Y36:()=>$c,YKP:()=>lo,YNc:()=>$y,Yjl:()=>te,Yz7:()=>tn,Z0I:()=>po,ZZ4:()=>Mp,_Bn:()=>Yd,_UZ:()=>Qc,_Vd:()=>ff,_c5:()=>aS,_uU:()=>av,aQg:()=>xb,c2e:()=>YE,cJS:()=>zt,cg1:()=>oa,dDg:()=>gb,dqk:()=>Pt,eBb:()=>S_,eFA:()=>r_,ekj:()=>rv,eoX:()=>Ip,f3M:()=>C,g9A:()=>qE,h0i:()=>fu,hGG:()=>vI,hij:()=>_i,iGM:()=>Gm,ifc:()=>gt,ip1:()=>GE,jDz:()=>Qd,kL8:()=>Hl,kcU:()=>qu,lG2:()=>er,lqb:()=>Ya,lri:()=>fb,mCW:()=>ne,n_E:()=>pp,oAB:()=>Et,oxw:()=>Hi,pB0:()=>v,q3G:()=>ur,q4F:()=>bg,qLn:()=>Eg,qOj:()=>qc,qZA:()=>qf,qzn:()=>Is,rWj:()=>pb,sBO:()=>XT,sIi:()=>Kc,s_b:()=>Hm,soG:()=>ah,tb:()=>ZE,tp0:()=>xt,uIk:()=>Hf,vHH:()=>Ie,vpe:()=>co,wAp:()=>wt,xp6:()=>oy,z2F:()=>dh,z3N:()=>ds,zSh:()=>Za,zs3:()=>Ed});var d=P(7579),B=P(727),k=P(9751),se=P(6451),ce=P(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function ue(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ve(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=_e({__forward_ref__:_e});function G(s){return s.__forward_ref__=G,s.toString=function(){return fe(this())},s}function J(s){return function $e(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}(s)?s():s}class Ie extends Error{constructor(o,l){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,o){throw new Ie(-201,!1)}function Kt(s,o){null==s&&function qe(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function br(s){return wr(s,zr)||wr(s,Mi)}function po(s){return null!==br(s)}function wr(s,o){return s.hasOwnProperty(o)?s[o]:null}function xi(s){return s&&(s.hasOwnProperty(Un)||s.hasOwnProperty(Ri))?s[Un]:null}const zr=_e({\u0275prov:_e}),Un=_e({\u0275inj:_e}),Mi=_e({ngInjectableDef:_e}),Ri=_e({ngInjectorDef:_e});var tt=(()=>((tt=tt||{})[tt.Default=0]="Default",tt[tt.Host=1]="Host",tt[tt.Self=2]="Self",tt[tt.SkipSelf=4]="SkipSelf",tt[tt.Optional=8]="Optional",tt))();let gr;function fn(s){const o=gr;return gr=s,o}function Er(s,o,l){const c=br(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&tt.Optional?null:void 0!==o?o:void Ne(fe(s))}function wn(s){return{toString:s}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),gt=(()=>{return(s=gt||(gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",gt;var s})();const Pt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ir={},St=[],Sr=_e({\u0275cmp:_e}),Bt=_e({\u0275dir:_e}),Gr=_e({\u0275pipe:_e}),Zt=_e({\u0275mod:_e}),Y=_e({\u0275fac:_e}),j=_e({__NG_ELEMENT_ID__:_e});let U=0;function W(s){return wn(()=>{const l=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||gt.Emulated,id:"c"+U++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,y=s.features;return h.inputs=an(s.inputs,c),h.outputs=an(s.outputs),y&&y.forEach(w=>w(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Ae).filter(ze):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(be).filter(ze):null,h})}function Ae(s){return V(s)||H(s)}function ze(s){return null!==s}function Et(s){return wn(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function an(s,o){if(null==s)return Ir;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}const er=W;function te(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function V(s){return s[Sr]||null}function H(s){return s[Bt]||null}function be(s){return s[Gr]||null}function Ge(s){const o=V(s)||H(s)||be(s);return null!==o&&o.standalone}function vt(s,o){const l=s[Zt]||null;if(!l&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function tr(s){return Array.isArray(s)&&"object"==typeof s[1]}function li(s){return Array.isArray(s)&&!0===s[1]}function mo(s){return 0!=(8&s.flags)}function dc(s){return 2==(2&s.flags)}function ya(s){return 1==(1&s.flags)}function qr(s){return null!==s.template}function hc(s){return 0!=(256&s[2])}function Cr(s,o){return s.hasOwnProperty(Y)?s[Y]:null}class bo{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function ys(){return Lu}function Lu(s){return s.type.prototype.ngOnChanges&&(s.setInput=pc),hl}function hl(){const s=wo(this),o=s?.current;if(o){const l=s.previous;if(l===Ir)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function pc(s,o,l,c){const h=wo(s)||function Uu(s,o){return s[Bu]=o}(s,{previous:Ir,current:null}),p=h.current||(h.current={}),y=h.previous,w=this.declaredInputs[l],I=y[w];p[w]=new bo(I&&I.currentValue,o,y===Ir),s[c]=o}ys.ngInherit=!0;const Bu="__ngSimpleChanges__";function wo(s){return s[Bu]||null}function kn(s){for(;Array.isArray(s);)s=s[0];return s}function Ei(s,o){return kn(o[s])}function Dr(s,o){return kn(o[s.index])}function Io(s,o){return s.data[o]}function nn(s,o){const l=o[s];return tr(l)?l:l[0]}function pl(s){return 4==(4&s[2])}function vs(s){return 64==(64&s[2])}function hi(s,o){return null==o?null:s[o]}function wa(s){s[18]=0}function jn(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const Nt={lFrame:Ra(null),bindingsEnabled:!0};function Vs(){return Nt.bindingsEnabled}function Pe(){return Nt.lFrame.lView}function Yt(){return Nt.lFrame.tView}function Mh(s){return Nt.lFrame.contextLView=s,s[8]}function Do(s){return Nt.lFrame.contextLView=null,s}function nr(){let s=To();for(;null!==s&&64===s.type;)s=s.parent;return s}function To(){return Nt.lFrame.currentTNode}function Or(s,o){const l=Nt.lFrame;l.currentTNode=s,l.isParent=o}function ml(){return Nt.lFrame.isParent}function So(){Nt.lFrame.isParent=!1}function rr(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Aa(){return Nt.lFrame.bindingIndex++}function $u(s,o){const l=Nt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Ao(o)}function Ao(s){Nt.lFrame.currentDirectiveIndex=s}function xa(){return Nt.lFrame.currentQueryIndex}function vc(s){Nt.lFrame.currentQueryIndex=s}function Ma(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function zu(s,o,l){if(l&tt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&tt.Host||(h=Ma(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=Nt.lFrame=Nh();return c.currentTNode=o,c.lView=s,!0}function xo(s){const o=Nh(),l=s[1];Nt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Nh(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?Ra(s):o}function Ra(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ph(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Gu=Ph;function bs(){const s=Ph();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function An(){return Nt.lFrame.selectedIndex}function rs(s){Nt.lFrame.selectedIndex=s}function xn(){const s=Nt.lFrame;return Io(s.tView,s.selectedIndex)}function bc(){Nt.lFrame.currentNamespace="svg"}function qu(){!function Ec(){Nt.lFrame.currentNamespace=null}()}function Cc(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function Mo(s,o,l){ko(s,o,3,l)}function Ro(s,o,l,c){(3&s[2])===l&&ko(s,o,l,c)}function Zu(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function ko(s,o,l,c){const p=c??-1,y=o.length-1;let w=0;for(let I=void 0!==c?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=c&&w>=c)break}else o[I]<0&&(s[18]+=65536),(w<p||-1==p)&&(Yu(s,l,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Yu(s,o,l,c){const h=l[c]<0,p=l[c+1],w=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class fi{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function is(s,o,l){let c=0;for(;c<l.length;){const h=l[c];if("number"==typeof h){if(0!==h)break;c++;const p=l[c++],y=l[c++],w=l[c++];s.setAttribute(o,y,w,p)}else{const p=h,y=l[++c];Tc(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function Na(s){return 3===s||4===s||6===s}function Tc(s){return 64===s.charCodeAt(0)}function Pa(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Ju(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Ju(s,o,l,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const w=s[p++];if("number"==typeof w){if(w===o){y=-1;break}if(w>o){y=p-1;break}}}for(;p<s.length;){const w=s[p];if("number"==typeof w)break;if(w===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Fh(s){return-1!==s}function ir(s){return 32767&s}function Es(s,o){let l=function Lh(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Sc=!0;function Oa(s){const o=Sc;return Sc=s,o}let Xu=0;const Zr={};function ss(s,o){const l=bl(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Ac(c.data,s),Ac(o,null),Ac(c.blueprint,null));const h=Fa(s,o),p=s.injectorIndex;if(Fh(h)){const y=ir(h),w=Es(h,o),I=w[1].data;for(let S=0;S<8;S++)o[p+S]=w[y+S]|I[y+S]}return o[p+8]=h,p}function Ac(s,o){s.push(0,0,0,0,0,0,0,0,o)}function bl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Fa(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){if(c=Uo(h),null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function js(s,o,l){!function ed(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(j)&&(c=l[j]),null==c&&(c=l[j]=Xu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function Po(s,o,l){if(l&tt.Optional)return s;Ne()}function Hs(s,o,l,c){if(l&tt.Optional&&void 0===c&&(c=null),0==(l&(tt.Self|tt.Host))){const h=s[9],p=fn(void 0);try{return h?h.get(o,c,l&tt.Optional):Er(o,c,l&tt.Optional)}finally{fn(p)}}return Po(c,0,l)}function Oo(s,o,l,c=tt.Default,h){if(null!==s){if(1024&o[2]){const y=function Vh(s,o,l,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=td(p,y,l,c|tt.Self,Zr);if(w!==Zr)return w;let I=p.parent;if(!I){const S=y[21];if(S){const R=S.get(l,Zr,c);if(R!==Zr)return R}I=Uo(y),y=y[15]}p=I}return h}(s,o,l,c,Zr);if(y!==Zr)return y}const p=td(s,o,l,c,Zr);if(p!==Zr)return p}return Hs(o,l,c,h)}function td(s,o,l,c,h){const p=function Uh(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(j)?s[j]:void 0;return"number"==typeof o?o>=0?255&o:xc:o}(l);if("function"==typeof p){if(!zu(o,s,c))return c&tt.Host?Po(h,0,c):Hs(o,l,c,h);try{const y=p(c);if(null!=y||c&tt.Optional)return y;Ne()}finally{Gu()}}else if("number"==typeof p){let y=null,w=bl(s,o),I=-1,S=c&tt.Host?o[16][6]:null;for((-1===w||c&tt.SkipSelf)&&(I=-1===w?Fa(s,o):o[w+8],-1!==I&&El(c,!1)?(y=o[1],w=ir(I),o=Es(I,o)):w=-1);-1!==w;){const R=o[1];if(Fo(p,w,R.data)){const O=wl(w,o,l,y,c,S);if(O!==Zr)return O}I=o[w+8],-1!==I&&El(c,o[1].data[w+8]===S)&&Fo(p,w,o)?(y=R,w=ir(I),o=Es(I,o)):w=-1}}return h}function wl(s,o,l,c,h,p){const y=o[1],w=y.data[s+8],R=Ba(w,y,l,null==c?dc(w)&&Sc:c!=y&&0!=(3&w.type),h&tt.Host&&p===w);return null!==R?Oi(o,y,R,w):Zr}function Ba(s,o,l,c,h){const p=s.providerIndexes,y=o.data,w=1048575&p,I=s.directiveStart,R=p>>20,K=h?w+R:s.directiveEnd;for(let re=c?w:w+R;re<K;re++){const Ce=y[re];if(re<I&&l===Ce||re>=I&&Ce.type===l)return re}if(h){const re=y[I];if(re&&qr(re)&&re.type===l)return I}return null}function Oi(s,o,l,c){let h=s[l];const p=o.data;if(function Dc(s){return s instanceof fi}(h)){const y=h;y.resolving&&function Xe(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ie(-200,`Circular dependency in DI detected for ${s}${l}`)}(function me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}(p[l]));const w=Oa(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?fn(y.injectImpl):null;zu(s,c,tt.Default);try{h=s[l]=y.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Ku(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=Lu(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==I&&fn(I),Oa(w),y.resolving=!1,Gu()}}return h}function Fo(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function El(s,o){return!(s&tt.Self||s&tt.Host&&o)}class Lo{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Oo(this._tNode,this._lView,o,c,l)}}function xc(){return new Lo(nr(),Pe())}function Uo(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Il(s){return function La(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(Na(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(nr(),s)}const Vo="__parameters__";function Ho(s,o,l){return wn(()=>{const c=function Mc(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return w.annotation=y,w;function w(I,S,R){const O=I.hasOwnProperty(Vo)?I[Vo]:Object.defineProperty(I,Vo,{value:[]})[Vo];for(;O.length<=R;)O.push(null);return(O[R]=O[R]||[]).push(y),I}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class En{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=tn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bn(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),bn(c,o)):o!==s&&o.push(c)}return o}function as(s,o){s.forEach(l=>Array.isArray(l)?as(l,o):o(l))}function Ws(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Yn(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function qs(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function rt(s,o,l){let c=Li(s,o);return c>=0?s[1|c]=l:(c=~c,function $h(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Ua(s,o){const l=Li(s,o);if(l>=0)return s[1|l]}function Li(s,o){return function ja(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<l];if(o===y)return p<<l;y>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const Ys={},Rc="__NG_DI_FLAG__",Mr="ngTempTokenPath",Bi=/\n/gm,sr="__source";let Qs;function ls(s){const o=Qs;return Qs=s,o}function or(s,o=tt.Default){if(void 0===Qs)throw new Ie(-203,!1);return null===Qs?Er(s,void 0,o):Qs.get(s,o&tt.Optional?null:void 0,o)}function _n(s,o=tt.Default){return(function Vn(){return gr}()||or)(J(s),o)}function C(s,o=tt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),_n(s,o)}function D(s){const o=[];for(let l=0;l<s.length;l++){const c=J(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Ie(900,!1);let h,p=tt.Default;for(let y=0;y<c.length;y++){const w=c[y],I=L(w);"number"==typeof I?-1===I?h=w.token:p|=I:h=w}o.push(_n(h,p))}else o.push(_n(c))}return o}function M(s,o){return s[Rc]=o,s.prototype[Rc]=o,s}function L(s){return s[Rc]}const Be=M(Ho("Optional"),8),xt=M(Ho("SkipSelf"),4);let Kh,kc;function ug(s){Kh=s}function eo(s){return function ld(){if(void 0===kc&&(kc=null,Pt.trustedTypes))try{kc=Pt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return kc}()?.createHTML(s)||s}class Wa{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Dl extends Wa{getTypeName(){return"HTML"}}class Pc extends Wa{getTypeName(){return"Style"}}class Yh extends Wa{getTypeName(){return"Script"}}class ud extends Wa{getTypeName(){return"URL"}}class Qh extends Wa{getTypeName(){return"ResourceURL"}}function ds(s){return s instanceof Wa?s.changingThisBreaksApplicationSecurity:s}function Is(s,o){const l=function Jh(s){return s instanceof Wa&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function hg(s){return new Dl(s)}function T_(s){return new Pc(s)}function S_(s){return new Yh(s)}function h0(s){return new ud(s)}function v(s){return new Qh(s)}class m{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(eo(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class E{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=eo(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=eo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const N=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ne(s){return(s=String(s)).match(N)?s:"unsafe:"+s}function Ke(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function ot(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Ht=Ke("area,br,col,hr,img,wbr"),On=Ke("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hs=Ke("rp,rt"),no=ot(Ht,ot(On,Ke("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ot(hs,Ke("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ot(hs,On)),ro=Ke("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fc=Ke("srcset"),qo=ot(ro,Fc,Ke("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ke("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),tf=Ke("script,style,template");class pg{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!no.hasOwnProperty(l))return this.sanitizedSomething=!0,!tf.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),y=p.name,w=y.toLowerCase();if(!qo.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=p.value;ro[w]&&(I=ne(I)),Fc[w]&&(s=I,I=(s=String(s)).split(",").map(o=>ne(o.trim())).join(", ")),this.buf.push(" ",y,'="',dd(I),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();no.hasOwnProperty(l)&&!Ht.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(dd(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const gg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nf=/([^\#-~ |!])/g;function dd(s){return s.replace(/&/g,"&amp;").replace(gg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(nf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Tl;function f0(s,o){let l=null;try{Tl=Tl||function g(s){const o=new E(s);return function x(){try{return!!(new window.DOMParser).parseFromString(eo(""),"text/html")}catch{return!1}}()?new m(o):o}(s);let c=o?String(o):"";l=Tl.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=l.innerHTML,l=Tl.getInertBodyElement(c)}while(c!==p);return eo((new pg).sanitizeChildren(rf(l)||l))}finally{if(l){const c=rf(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function rf(s){return"content"in s&&function wC(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ur=(()=>((ur=ur||{})[ur.NONE=0]="NONE",ur[ur.HTML=1]="HTML",ur[ur.STYLE=2]="STYLE",ur[ur.SCRIPT=3]="SCRIPT",ur[ur.URL=4]="URL",ur[ur.RESOURCE_URL=5]="RESOURCE_URL",ur))();function sf(s){const o=function af(){const s=Pe();return s&&s[12]}();return o?o.sanitize(ur.URL,s)||"":Is(s,"URL")?ds(s):ne(we(s))}const A_=new En("ENVIRONMENT_INITIALIZER"),m0=new En("INJECTOR",-1),_0=new En("INJECTOR_DEF_TYPES");class y0{get(o,l=Ys){if(l===Ys){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return l}}function DC(...s){return{\u0275providers:x_(0,s)}}function x_(s,...o){const l=[],c=new Set;let h;return as(o,p=>{const y=p;_g(y,l,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&v0(h,l),l}function v0(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];as(h,p=>{o.push(p)})}}function _g(s,o,l,c){if(!(s=J(s)))return!1;let h=null,p=xi(s);const y=!p&&V(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(p=xi(I),!p)return!1;h=I}const w=c.has(h);if(y){if(w)return!1;if(c.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of I)_g(S,o,l,c)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;c.add(h);try{as(p.imports,R=>{_g(R,o,l,c)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&v0(S,o)}if(!w){const S=Cr(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:St},{provide:_0,useValue:h,multi:!0},{provide:A_,useValue:()=>_n(h),multi:!0})}const I=p.providers;null==I||w||as(I,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const M_=_e({provide:String,useValue:_e});function io(s){return null!==s&&"object"==typeof s&&M_ in s}function Al(s){return"function"==typeof s}const Za=new En("Set Injector scope."),lf={},SC={};let hd;function cf(){return void 0===hd&&(hd=new y0),hd}class Ya{}class k_ extends Ya{constructor(o,l,c,h){super(),this.parent=l,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yg(o,y=>this.processProvider(y)),this.records.set(m0,pd(void 0,this)),h.has("environment")&&this.records.set(Ya,pd(void 0,this));const p=this.records.get(Za);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(_0.multi,St,tt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=ls(this),c=fn(void 0);try{return o()}finally{ls(l),fn(c)}}get(o,l=Ys,c=tt.Default){this.assertNotDestroyed();const h=ls(this),p=fn(void 0);try{if(!(c&tt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function w0(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&br(o);w=I&&this.injectableDefInScope(I)?pd(uf(o),lf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(c&tt.Self?cf():this.parent).get(o,l=c&tt.Optional&&l===Ys?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[Mr]=y[Mr]||[]).unshift(fe(o)),h)throw y;return function X(s,o,l,c){const h=s[Mr];throw o[sr]&&h.unshift(o[sr]),s.message=function ae(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=fe(o);if(Array.isArray(o))h=o.map(fe).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let w=o[y];p.push(y+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(Bi,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Mr]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{fn(p),ls(h)}}resolveInjectorInitializers(){const o=ls(this),l=fn(void 0);try{const c=this.get(A_.multi,St,tt.Self);for(const h of c)h()}finally{ls(o),fn(l)}}toString(){const o=[],l=this.records;for(const c of l.keys())o.push(fe(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ie(205,!1)}processProvider(o){let l=Al(o=J(o))?o:J(o&&o.provide);const c=function AC(s){return io(s)?pd(void 0,s.useValue):pd(fd(s),lf)}(o);if(Al(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=pd(void 0,lf,!0),h.factory=()=>D(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,c)}hydrate(o,l){return l.value===lf&&(l.value=SC,l.value=l.factory()),"object"==typeof l.value&&l.value&&function P_(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function uf(s){const o=br(s),l=null!==o?o.factory:Cr(s);if(null!==l)return l;if(s instanceof En)throw new Ie(204,!1);if(s instanceof Function)return function N_(s){const o=s.length;if(o>0)throw qs(o,"?"),new Ie(204,!1);const l=function Tn(s){const o=s&&(s[zr]||s[Mi]);if(o){const l=function Ki(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ie(204,!1)}function fd(s,o,l){let c;if(Al(s)){const h=J(s);return Cr(h)||uf(h)}if(io(s))c=()=>J(s.useValue);else if(function R_(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...D(s.deps||[]));else if(function Lc(s){return!(!s||!s.useExisting)}(s))c=()=>_n(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function xC(s){return!!s.deps}(s))return Cr(h)||uf(h);c=()=>new h(...D(s.deps))}return c}function pd(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function E0(s){return!!s.\u0275providers}function yg(s,o){for(const l of s)Array.isArray(l)?yg(l,o):E0(l)?yg(l.\u0275providers,o):o(l)}class C0{}class MC{resolveComponentFactory(o){throw function df(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ff=(()=>{class s{}return s.NULL=new MC,s})();function O_(){return Bc(nr(),Pe())}function Bc(s,o){return new vg(Dr(s,o))}let vg=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=O_,s})();function JA(s){return s instanceof vg?s.nativeElement:s}class RC{}let F_=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function kC(){const s=Pe(),l=nn(nr().index,s);return(tr(l)?l:s)[11]}(),s})(),NC=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class T0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const bg=new T0("14.2.0"),ji={};function U_(s){return s.ngOriginalError}class Eg{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&U_(o);for(;l&&U_(l);)l=U_(l);return l||null}}const j_=new Map;let HC=0;const _d="__ngContext__";function pi(s,o){tr(o)?(s[_d]=o[20],function zC(s){j_.set(s[20],s)}(o)):s[_d]=o}function mf(s){const o=s[_d];return"number"==typeof o?function R0(s){return j_.get(s)||null}(o):o||null}function H_(s){const o=mf(s);return o?tr(o)?o:o.lView:null}function O0(s){return s.ownerDocument.defaultView}function Qa(s){return s instanceof Function?s():s}var Ko=(()=>((Ko=Ko||{})[Ko.Important=1]="Important",Ko[Ko.DashCase=2]="DashCase",Ko))();function xg(s,o){return undefined(s,o)}function vd(s){const o=s[3];return li(o)?o[3]:o}function q_(s){return V0(s[13])}function K_(s){return V0(s[4])}function V0(s){for(;null!==s&&!li(s);)s=s[4];return s}function bd(s,o,l,c,h){if(null!=c){let p,y=!1;li(c)?p=c:tr(c)&&(y=!0,c=c[0]);const w=kn(c);0===s&&null!==l?null==h?$0(o,l,w):jc(o,l,w,h||null,!0):1===s&&null!==l?jc(o,l,w,h||null,!0):2===s?function Og(s,o,l){const c=Wn(s,o);c&&function rD(s,o,l,c){s.removeChild(o,l,c)}(s,c,o,l)}(o,w,y):3===s&&o.destroyNode(w),null!=p&&function wd(s,o,l,c,h){const p=l[7];p!==kn(l)&&bd(o,s,c,p,h);for(let w=10;w<l.length;w++){const I=l[w];xl(I[1],I,s,o,c,p)}}(o,s,p,l,h)}}function Mg(s,o,l){return s.createElement(o,l)}function vf(s,o){const l=s[9],c=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,jn(h,-1)),l.splice(c,1)}function Rg(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&vf(h,c),o>0&&(s[l-1][4]=c[4]);const p=Yn(s,10+o);!function j0(s,o){xl(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function kg(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&xl(s,o,l,3,null,null),function JC(s){let o=s[13];if(!o)return bf(s[1],s);for(;o;){let l=null;if(tr(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)tr(o)&&bf(o[1],o),o=o[3];null===o&&(o=s),tr(o)&&bf(o[1],o),l=o&&o[4]}o=l}}(o)}}function bf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function nD(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof fi)){const p=l[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const w=h[p[y]],I=p[y+1];try{I.call(w)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function tD(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const y=l[p+1],w="function"==typeof y?y(o):kn(o[y]),I=c[h=l[p+2]],S=l[p+3];"boolean"==typeof S?w.removeEventListener(l[p],I,S):S>=0?c[h=S]():c[h=-S].unsubscribe(),p+=2}else{const y=c[h=l[p+1]];l[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&li(o[3])){l!==o[3]&&vf(l,o);const c=o[19];null!==c&&c.detachView(s)}!function k0(s){j_.delete(s[20])}(o)}}function wf(s,o,l){return function H0(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===gt.None||h===gt.Emulated)return null}return Dr(c,l)}(s,o.parent,l)}function jc(s,o,l,c,h){s.insertBefore(o,l,c,h)}function $0(s,o,l){s.appendChild(o,l)}function z0(s,o,l,c,h){null!==c?jc(s,o,l,c,h):$0(s,o,l)}function Wn(s,o){return s.parentNode(o)}function J_(s,o,l){return Pg(s,o,l)}let Pg=function Ng(s,o,l){return 40&s.type?Dr(s,l):null};function Ef(s,o,l,c){const h=wf(s,c,o),p=o[11],w=J_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let I=0;I<l.length;I++)z0(p,h,l[I],w,!1);else z0(p,h,l,w,!1)}function ey(s,o){if(null!==o){const l=o.type;if(3&l)return Dr(o,s);if(4&l)return ty(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return ey(s,c);{const h=s[o.index];return li(h)?ty(-1,h):kn(h)}}if(32&l)return xg(o,s)()||kn(s[o.index]);{const c=oD(s,o);return null!==c?Array.isArray(c)?c[0]:ey(vd(s[16]),c):ey(s,o.next)}}return null}function oD(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ty(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return ey(c,h)}return o[7]}function Fg(s,o,l,c,h,p,y){for(;null!=l;){const w=c[l.index],I=l.type;if(y&&0===o&&(w&&pi(kn(w),c),l.flags|=4),64!=(64&l.flags))if(8&I)Fg(s,o,l.child,c,h,p,!1),bd(o,s,h,w,p);else if(32&I){const S=xg(l,c);let R;for(;R=S();)bd(o,s,h,R,p);bd(o,s,h,w,p)}else 16&I?ny(s,o,c,l,h,p):bd(o,s,h,w,p);l=y?l.projectionNext:l.next}}function xl(s,o,l,c,h,p){Fg(l,c,s.firstChild,o,h,p,!1)}function ny(s,o,l,c,h,p){const y=l[16],I=y[6].projection[c.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)bd(o,s,h,I[S],p);else Fg(s,o,I,y[3],h,p,!0)}function aD(s,o,l){s.setAttribute(o,"style",l)}function Lg(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function iy(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const q0="ng-template";function lD(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==iy(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function K0(s){return 4===s.type&&s.value!==q0}function Z0(s,o,l){return o===(4!==s.type||l?s.value:q0)}function cD(s,o,l){let c=4;const h=s.attrs||[],p=function dD(s){for(let o=0;o<s.length;o++)if(Na(s[o]))return o;return s.length}(h);let y=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Z0(s,I,l)||""===I&&1===o.length){if(Zo(c))return!1;y=!0}}else{const S=8&c?I:o[++w];if(8&c&&null!==s.attrs){if(!lD(s.attrs,S,l)){if(Zo(c))return!1;y=!0}continue}const O=Bg(8&c?"class":I,h,K0(s),l);if(-1===O){if(Zo(c))return!1;y=!0;continue}if(""!==S){let K;K=O>p?"":h[O+1].toLowerCase();const re=8&c?K:null;if(re&&-1!==iy(re,S,0)||2&c&&S!==K){if(Zo(c))return!1;y=!0}}}}else{if(!y&&!Zo(c)&&!Zo(I))return!1;if(y&&Zo(I))continue;y=!1,c=I|1&c}}return Zo(c)||y}function Zo(s){return 0==(1&s)}function Bg(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let w=o[++h];for(;"string"==typeof w;)w=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function hD(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function uD(s,o,l=!1){for(let c=0;c<o.length;c++)if(cD(s,o[c],l))return!0;return!1}function sy(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function Q0(s,o){return s?":not("+o.trim()+")":o}function fD(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&c){const w=s[++l];h+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!Zo(y)&&(o+=Q0(p,h),h=""),c=y,p=p||!Zo(c);l++}return""!==h&&(o+=Q0(p,h)),o}const Gt={};function oy(s){J0(Yt(),Pe(),An()+s,!1)}function J0(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Mo(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Ro(o,p,0,l)}rs(l)}function Vg(s,o=null,l=null,c){const h=nw(s,o,l,c);return h.resolveInjectorInitializers(),h}function nw(s,o=null,l=null,c,h=new Set){const p=[l||St,DC(s)];return c=c||("object"==typeof s?void 0:fe(s)),new k_(p,o||cf(),c||null,h)}let Ed=(()=>{class s{static create(l,c){if(Array.isArray(l))return Vg({name:""},c,l,"");{const h=l.name??"";return Vg({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=Ys,s.NULL=new y0,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>_n(m0)}),s.__NG_ELEMENT_ID__=-1,s})();function $c(s,o=tt.Default){const l=Pe();return null===l?_n(s,o):Oo(nr(),l,J(s),o)}function gi(){throw new Error("invalid")}function Lr(s,o){return s<<17|o<<2}function Ds(s){return s>>17&32767}function qg(s){return 2|s}function Yo(s){return(131068&s)>>2}function Kg(s,o){return-131069&s|o<<2}function py(s){return 1|s}function nm(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],p=l[c+1];if(-1!==p){const y=s.data[p];vc(h),y.contentQueries(2,o[p],p)}}}function Df(s,o,l,c,h,p,y,w,I,S,R){const O=o.blueprint.slice();return O[0]=h,O[2]=76|c,(null!==R||s&&1024&s[2])&&(O[2]|=1024),wa(O),O[3]=O[15]=s,O[8]=l,O[10]=y||s&&s[10],O[11]=w||s&&s[11],O[12]=I||s&&s[12]||null,O[9]=S||s&&s[9]||null,O[6]=p,O[20]=function $C(){return HC++}(),O[21]=R,O[16]=2==o.type?s[16]:O,O}function Sd(s,o,l,c,h){let p=s.data[o];if(null===p)p=function wy(s,o,l,c,h){const p=To(),y=ml(),I=s.data[o]=function gw(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=I),null!==p&&(y?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,l,c,h),function Hu(){return Nt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const y=function gl(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Or(p,!0),p}function Rl(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Ad(s,o,l){xo(o);try{const c=s.viewQuery;null!==c&&Bf(1,c,l);const h=s.template;null!==h&&Iy(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&nm(s,o),s.staticViewQueries&&Bf(2,s.viewQuery,l);const p=s.components;null!==p&&function kD(s,o){for(let l=0;l<o.length;l++)ww(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,bs()}}function Tf(s,o,l,c){const h=o[2];if(128!=(128&h)){xo(o);try{wa(o),function Sa(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Iy(s,o,l,2,c);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&Mo(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Ro(o,S,0,null),Zu(o,0)}if(function ky(s){for(let o=q_(s);null!==o;o=K_(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],p=h[3];0==(512&h[2])&&jn(p,1),h[2]|=512}}}(o),function FD(s){for(let o=q_(s);null!==o;o=K_(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];vs(c)&&Tf(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&nm(s,o),y){const S=s.contentCheckHooks;null!==S&&Mo(o,S)}else{const S=s.contentHooks;null!==S&&Ro(o,S,1),Zu(o,1)}!function tm(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)rs(~h);else{const p=h,y=l[++c],w=l[++c];$u(y,p),w(2,o[p])}}}finally{rs(-1)}}(s,o);const w=s.components;null!==w&&function RD(s,o){for(let l=0;l<o.length;l++)lm(s,o[l])}(o,w);const I=s.viewQuery;if(null!==I&&Bf(2,I,c),y){const S=s.viewCheckHooks;null!==S&&Mo(o,S)}else{const S=s.viewHooks;null!==S&&Ro(o,S,2),Zu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,jn(o[3],-1))}finally{bs()}}}function Ey(s,o,l,c){const h=o[10],y=pl(o);try{!y&&h.begin&&h.begin(),y&&Ad(s,o,c),Tf(s,o,l,c)}finally{!y&&h.end&&h.end()}}function Iy(s,o,l,c,h){const p=An(),y=2&c;try{rs(-1),y&&o.length>22&&J0(s,o,22,!1),l(c,h)}finally{rs(p)}}function xd(s,o,l){!Vs()||(function vw(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||ss(l,o),pi(c,o);const y=l.initialInputs;for(let w=h;w<p;w++){const I=s.data[w],S=qr(I);S&&kf(o,l,I);const R=Oi(o,s,w,l);pi(R,o),null!==y&&My(0,w-h,R,I,0,y),S&&(nn(l.index,o)[8]=R)}}(s,o,l,Dr(l,o)),128==(128&l.flags)&&function Di(s,o,l){const c=l.directiveStart,h=l.directiveEnd,p=l.index,y=function kh(){return Nt.lFrame.currentDirectiveIndex}();try{rs(p);for(let w=c;w<h;w++){const I=s.data[w],S=o[w];Ao(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Ty(I,S)}}finally{rs(-1),Ao(y)}}(s,o,l))}function Sf(s,o,l=Dr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],w=-1===y?l(o,s):s[y];s[h++]=w}}}function rm(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=im(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function im(s,o,l,c,h,p,y,w,I,S){const R=22+c,O=R+h,K=function ND(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Gt);return l}(R,O),re="function"==typeof S?S():S;return K[1]={type:s,blueprint:K,template:l,queries:null,viewQuery:w,declTNode:o,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:O,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function Cy(s,o,l,c){const h=dm(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&Wc(s).push(c,h.length-1))}function Af(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function mw(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,y=[];let w=null,I=null;for(let S=o.directiveStart;S<c;S++){const R=h[S],O=R.inputs,K=null===p||K0(o)?null:om(O,p);y.push(K),w=Af(O,S,w),I=Af(R.outputs,S,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=w,o.outputs=I}function _w(s,o){const l=nn(o,s);16&l[2]||(l[2]|=32)}function Rd(s,o,l,c){let h=!1;if(Vs()){const p=function Mf(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];uD(l,y.selectors,!1)&&(h||(h=[]),js(ss(l,o),s,y.type),qr(y)?(Rf(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===c?null:{"":-1};if(null!==p){h=!0,Ay(l,s.data.length,p.length);for(let R=0;R<p.length;R++){const O=p[R];O.providersResolver&&O.providersResolver(O)}let w=!1,I=!1,S=Rl(s,o,p.length,null);for(let R=0;R<p.length;R++){const O=p[R];l.mergedAttrs=Pa(l.mergedAttrs,O.hostAttrs),xy(s,l,o,S,O),Sy(S,O,y),null!==O.contentQueries&&(l.flags|=8),(null!==O.hostBindings||null!==O.hostAttrs||0!==O.hostVars)&&(l.flags|=128);const K=O.type.prototype;!w&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!I&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),S++}mw(s,l)}y&&function bw(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Ie(-301,!1);c.push(o[h],p)}}}(l,c,y)}return l.mergedAttrs=Pa(l.mergedAttrs,l.attrs),h}function Dy(s,o,l,c,h,p){const y=p.hostBindings;if(y){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~o.index;(function xf(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(c,h,y)}}function Ty(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Rf(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Sy(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;qr(o)&&(l[""]=s)}}function Ay(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function xy(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=Cr(h.type)),y=new fi(p,qr(h),$c);s.blueprint[c]=y,l[c]=y,Dy(s,o,0,c,Rl(s,l,h.hostVars,Gt),h)}function kf(s,o,l){const c=Dr(o,s),h=rm(l),p=s[10],y=Of(s,Df(s,h,null,l.onPush?32:16,c,o,p,p.createRenderer(c,l),null,null,null));s[o.index]=y}function Ts(s,o,l,c,h,p){const y=Dr(s,o);!function Nf(s,o,l,c,h,p,y){if(null==p)s.removeAttribute(o,h,l);else{const w=null==y?we(p):y(p,c||"",h);s.setAttribute(o,h,w,l)}}(o[11],y,p,s.value,l,c,h)}function My(s,o,l,c,h,p){const y=p[o];if(null!==y){const w=c.setInput;for(let I=0;I<y.length;){const S=y[I++],R=y[I++],O=y[I++];null!==w?c.setInput(l,O,S,R):l[R]=O}}}function om(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function Ry(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function lm(s,o){const l=nn(o,s);if(vs(l)){const c=l[1];48&l[2]?Tf(c,l,c.template,l[8]):l[5]>0&&Pf(l)}}function Pf(s){for(let c=q_(s);null!==c;c=K_(c))for(let h=10;h<c.length;h++){const p=c[h];if(vs(p))if(512&p[2]){const y=p[1];Tf(y,p,y.template,p[8])}else p[5]>0&&Pf(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=nn(l[c],s);vs(h)&&h[5]>0&&Pf(h)}}function ww(s,o){const l=nn(o,s),c=l[1];(function Ew(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Ad(c,l,l[8])}function Of(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ny(s){for(;s;){s[2]|=32;const o=vd(s);if(hc(s)&&!o)return s;s=o}return null}function Bf(s,o,l){vc(0),o(s,l)}function dm(s){return s[7]||(s[7]=[])}function Wc(s){return s.cleanup||(s.cleanup=[])}function kl(s,o){const l=s[9],c=l?l.get(Eg,null):null;c&&c.handleError(o)}function fm(s,o,l,c,h){for(let p=0;p<l.length;){const y=l[p++],w=l[p++],I=o[y],S=s.data[y];null!==S.setInput?S.setInput(I,h,c,w):I[w]=h}}function Jo(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const w=o[y];"number"==typeof w?p=w:1==p?h=ve(h,w):2==p&&(c=ve(c,w+": "+o[++y]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}function Ss(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(kn(p)),li(p))for(let w=10;w<p.length;w++){const I=p[w],S=I[1].firstChild;null!==S&&Ss(I[1],I,S,c)}const y=l.type;if(8&y)Ss(s,o,l.child,c);else if(32&y){const w=xg(l,o);let I;for(;I=w();)c.push(I)}else if(16&y){const w=oD(o,l);if(Array.isArray(w))c.push(...w);else{const I=vd(o[16]);Ss(I[1],I,w,c,!0)}}l=h?l.projectionNext:l.next}return c}class Nl{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Ss(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(li(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Rg(o,c),Yn(l,c))}this._attachedToViewContainer=!1}kg(this._lView[1],this._lView)}onDestroy(o){Cy(this._lView[1],this._lView,null,o)}markForCheck(){Ny(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function cm(s,o,l){const c=o[10];c.begin&&c.begin();try{Tf(s,o,s.template,l)}catch(h){throw kl(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function QC(s,o){xl(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ie(902,!1);this._appRef=o}}class pm extends Nl{constructor(o){super(o),this._view=o}detectChanges(){!function Lf(s){!function Ff(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=H_(l);if(null!==c){const h=c[1];Ey(h,c,h.template,l)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class Nd extends ff{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=V(o);return new Uf(l,this.ngModule)}}function Py(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class gm{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,c){const h=this.injector.get(o,ji,c);return h!==ji||l===ji?h:this.parentInjector.get(o,l,c)}}class Uf extends C0{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function pD(s){return s.map(fD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Py(this.componentDef.inputs)}get outputs(){return Py(this.componentDef.outputs)}create(o,l,c,h){let p=(h=h||this.ngModule)instanceof Ya?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new gm(o,p):o,w=y.get(RC,null);if(null===w)throw new Ie(407,!1);const I=y.get(NC,null),S=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",O=c?function pw(s,o,l){return s.selectRootElement(o,l===gt.ShadowDom)}(S,c,this.componentDef.encapsulation):Mg(w.createRenderer(null,this.componentDef),R,function Qn(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),K=this.componentDef.onPush?288:272,re={components:[]},Ce=im(0,null,null,1,0,null,null,null,null,null),He=Df(null,Ce,re,K,null,null,w,S,I,y,null);let Ze,ct;xo(He);try{const At=function Iw(s,o,l,c,h,p){const y=l[1];l[22]=s;const I=Sd(y,22,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(Jo(I,S,!0),null!==s&&(is(h,s,S),null!==I.classes&&Lg(h,s,I.classes),null!==I.styles&&aD(h,s,I.styles)));const R=c.createRenderer(s,o),O=Df(l,rm(o),null,o.onPush?32:16,l[22],I,c,R,p||null,null,null);return y.firstCreatePass&&(js(ss(I,l),y,o.type),Rf(y,I),Ay(I,l.length,1)),Of(l,O),l[22]=O}(O,this.componentDef,He,w,S);if(O)if(c)is(S,O,["ng-version",bg.full]);else{const{attrs:ke,classes:It}=function gD(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!Zo(h))break;h=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);ke&&is(S,O,ke),It&&It.length>0&&Lg(S,O,It.join(" "))}if(ct=Io(Ce,22),void 0!==l){const ke=ct.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const sn=l[It];ke.push(null!=sn?Array.from(sn):null)}}Ze=function BD(s,o,l,c,h){const p=l[1],y=function yw(s,o,l){const c=nr();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),xy(s,c,o,Rl(s,o,1,null),l),mw(s,c));const h=Oi(o,s,c.directiveStart,c);pi(h,o);const p=Dr(c,o);return p&&pi(p,o),h}(p,l,o);if(c.components.push(y),s[8]=y,null!==h)for(const I of h)I(y,o);if(o.contentQueries){const I=nr();o.contentQueries(1,y,I.directiveStart)}const w=nr();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(rs(w.index),Dy(l[1],w,0,w.directiveStart,w.directiveEnd,o),Ty(o,y)),y}(At,this.componentDef,He,re,[VD]),Ad(Ce,He,null)}finally{bs()}return new Vf(this.componentType,Ze,Bc(ct,He),He,ct)}}class Vf extends class I0{}{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new pm(h),this.componentType=o}setInput(o,l){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const p=this._rootLView;fm(p[1],p,h,o,l),_w(p,this._tNode.index)}}get injector(){return new Lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function VD(){const s=nr();Cc(Pe()[1],s)}function qc(s){let o=function Cw(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(qr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ie(903,!1);h=o.\u0275dir}if(h){if(l){c.push(h);const y=s;y.inputs=_m(s.inputs),y.declaredInputs=_m(s.declaredInputs),y.outputs=_m(s.outputs);const w=h.hostBindings;w&&Pd(s,w);const I=h.viewQuery,S=h.contentQueries;if(I&&Dw(s,I),S&&Tw(s,S),ue(s.inputs,h.inputs),ue(s.declaredInputs,h.declaredInputs),ue(s.outputs,h.outputs),qr(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const w=p[y];w&&w.ngInherit&&w(s),w===qc&&(l=!1)}}o=Object.getPrototypeOf(o)}!function Pl(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Pa(h.hostAttrs,l=Pa(l,h.hostAttrs))}}(c)}function _m(s){return s===Ir?{}:s===St?[]:s}function Dw(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function Tw(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function Pd(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let ym=null;function Ol(){if(!ym){const s=Pt.Symbol;if(s&&s.iterator)ym=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ym=c)}}}return ym}function Kc(s){return!!vm(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ol()in s)}function vm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Xo(s,o,l){return s[o]=l}function mi(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Hf(s,o,l,c){const h=Pe();return mi(h,Aa(),o)&&(Yt(),Ts(xn(),h,s,o,l,c)),Hf}function $y(s,o,l,c,h,p,y,w){const I=Pe(),S=Yt(),R=s+22,O=S.firstCreatePass?function zf(s,o,l,c,h,p,y,w,I){const S=o.consts,R=Sd(o,s,4,y||null,hi(S,w));Rd(o,l,R,hi(S,I)),Cc(o,R);const O=R.tViews=im(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),O.queries=o.queries.embeddedTView(R)),R}(R,S,I,o,l,c,h,p,y):S.data[R];Or(O,!1);const K=I[11].createComment("");Ef(S,I,K,O),pi(K,I),Of(I,I[R]=Ry(K,I,K,O)),ya(O)&&xd(S,I,O),null!=y&&Sf(I,O,w)}function Gf(s){return function Ni(s,o){return s[o]}(function Ta(){return Nt.lFrame.contextLView}(),22+s)}function bm(s,o,l){const c=Pe();return mi(c,Aa(),o)&&function Br(s,o,l,c,h,p,y,w){const I=Dr(o,l);let R,S=o.inputs;!w&&null!=S&&(R=S[c])?(fm(s,l,R,c,h),dc(o)&&_w(l,o.index)):3&o.type&&(c=function PD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(I,c,h))}(Yt(),xn(),c,s,o,c[11],l,!1),bm}function Wf(s,o,l,c,h){const y=h?"class":"style";fm(s,l,o.inputs[y],y,c)}function Em(s,o,l,c){const h=Pe(),p=Yt(),y=22+s,w=h[11],I=h[y]=Mg(w,o,function Ic(){return Nt.lFrame.currentNamespace}()),S=p.firstCreatePass?function wm(s,o,l,c,h,p,y){const w=o.consts,S=Sd(o,s,2,h,hi(w,p));return Rd(o,l,S,hi(w,y)),null!==S.attrs&&Jo(S,S.attrs,!1),null!==S.mergedAttrs&&Jo(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,p,h,0,o,l,c):p.data[y];Or(S,!0);const R=S.mergedAttrs;null!==R&&is(w,I,R);const O=S.classes;null!==O&&Lg(w,I,O);const K=S.styles;return null!==K&&aD(w,I,K),64!=(64&S.flags)&&Ef(p,h,I,S),0===function Ia(){return Nt.lFrame.elementDepthCount}()&&pi(I,h),function ju(){Nt.lFrame.elementDepthCount++}(),ya(S)&&(xd(p,h,S),function fw(s,o,l){if(mo(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,l[p],p)}}}(p,S,h)),null!==c&&Sf(h,S),Em}function qf(){let s=nr();ml()?So():(s=s.parent,Or(s,!1));const o=s;!function Ca(){Nt.lFrame.elementDepthCount--}();const l=Yt();return l.firstCreatePass&&(Cc(l,s),mo(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function yl(s){return 0!=(16&s.flags)}(o)&&Wf(l,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function vl(s){return 0!=(32&s.flags)}(o)&&Wf(l,o,Pe(),o.stylesWithoutHost,!1),qf}function Qc(s,o,l,c){return Em(s,o,l,c),qf(),Qc}function Gy(){return Pe()}function Ud(s){return!!s&&"function"==typeof s.then}function Wy(s){return!!s&&"function"==typeof s.subscribe}const qy=Wy;function nl(s,o,l,c){const h=Pe(),p=Yt(),y=nr();return function Zy(s,o,l,c,h,p,y,w){const I=ya(c),R=s.firstCreatePass&&Wc(s),O=o[8],K=dm(o);let re=!0;if(3&c.type||w){const Ze=Dr(c,o),ct=w?w(Ze):Ze,At=K.length,ke=w?sn=>w(kn(sn[c.index])):c.index;let It=null;if(!w&&I&&(It=function kw(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===l&&h[p+1]===c){const w=o[7],I=h[p+2];return w.length>I?w[I]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=p,It.__ngLastListenerFn__=p,re=!1;else{p=Zf(c,o,O,p,!1);const sn=l.listen(ct,h,p);K.push(p,sn),R&&R.push(h,ke,At,At+1)}}else p=Zf(c,o,O,p,!1);const Ce=c.outputs;let He;if(re&&null!==Ce&&(He=Ce[h])){const Ze=He.length;if(Ze)for(let ct=0;ct<Ze;ct+=2){const Mn=o[He[ct]][He[ct+1]].subscribe(p),Du=K.length;K.push(p,Mn),R&&R.push(h,c.index,Du,-(Du+1))}}}(p,h,h[11],y,s,o,0,c),nl}function Yy(s,o,l,c){try{return!1!==l(c)}catch(h){return kl(s,h),!1}}function Zf(s,o,l,c,h){return function p(y){if(y===Function)return c;Ny(2&s.flags?nn(s.index,o):o);let I=Yy(o,0,c,y),S=p.__ngNextListenerFn__;for(;S;)I=Yy(o,0,S,y)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Hi(s=1){return function ws(s){return(Nt.lFrame.contextLView=function Wu(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function Nw(s,o){let l=null;const c=function Y0(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?uD(s,p,!0):sy(c,p))return h}else l=h}return l}function Qy(s){const o=Pe()[16][6];if(!o.projection){const c=o.projection=qs(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const y=s?Nw(p,s):0;null!==y&&(h[y]?h[y].projectionNext=p:c[y]=p,h[y]=p),p=p.next}}}function Jc(s,o=0,l){const c=Pe(),h=Yt(),p=Sd(h,22+s,16,null,l||null);null===p.projection&&(p.projection=o),So(),64!=(64&p.flags)&&function lx(s,o,l){ny(o[11],0,o,l,wf(s,l,o),J_(l.parent||o[6],l,o))}(h,c,p)}function Tm(s,o,l,c,h){const p=s[l+1],y=null===o;let w=c?Ds(p):Yo(p),I=!1;for(;0!==w&&(!1===I||y);){const R=s[w+1];zD(s[w],o)&&(I=!0,s[w+1]=c?py(R):qg(R)),w=c?Ds(R):Yo(R)}I&&(s[l+1]=c?qg(p):py(p))}function zD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Li(s,o)>=0}function rv(s,o){return function As(s,o,l,c){const h=Pe(),p=Yt(),y=function ns(s){const o=Nt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function iv(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[An()],y=function eu(s,o){return o>=s.expandoStartIndex}(s,l);(function jd(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function Jn(s,o,l,c){const h=function yc(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=Fn(l=sv(null,s,o,l,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=sv(h,s,o,l,c),null===p){let I=function Rt(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Yo(c))return s[Ds(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=sv(null,s,o,I[1],c),I=Fn(I,o.attrs,c),function Qf(s,o,l,c){s[Ds(l?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function cn(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Fn(c,s[p].hostAttrs,l);return Fn(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function Vd(s,o,l,c,h,p){let y=p?o.classBindings:o.styleBindings,w=Ds(y),I=Yo(y);s[c]=l;let R,S=!1;if(Array.isArray(l)){const O=l;R=O[1],(null===R||Li(O,R)>0)&&(S=!0)}else R=l;if(h)if(0!==I){const K=Ds(s[w+1]);s[c+1]=Lr(K,w),0!==K&&(s[K+1]=Kg(s[K+1],c)),s[w+1]=function fy(s,o){return 131071&s|o<<17}(s[w+1],c)}else s[c+1]=Lr(w,0),0!==w&&(s[w+1]=Kg(s[w+1],c)),w=c;else s[c+1]=Lr(I,0),0===w?w=c:s[I+1]=Kg(s[I+1],c),I=c;S&&(s[c+1]=qg(s[c+1])),Tm(s,R,c,!0),Tm(s,R,c,!1),function Ll(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Li(p,o)>=0&&(l[c+1]=py(l[c+1]))}(o,R,s,c,p),y=Lr(w,I),p?o.classBindings=y:o.styleBindings=y}(h,p,o,l,y,c)}}(p,s,y,c),o!==Gt&&mi(h,y,o)&&function Bl(s,o,l,c,h,p,y,w){if(!(3&o.type))return;const I=s.data,S=I[w+1];tu(function Zg(s){return 1==(1&s)}(S)?Hw(I,o,l,h,Yo(S),y):void 0)||(tu(p)||function hy(s){return 2==(2&s)}(S)&&(p=Hw(I,null,l,h,w,y)),function ry(s,o,l,c,h){if(o)h?s.addClass(l,c):s.removeClass(l,c);else{let p=-1===c.indexOf("-")?void 0:Ko.DashCase;null==h?s.removeStyle(l,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=Ko.Important),s.setStyle(l,c,h,p))}}(c,y,Ei(An(),l),h,p))}(p,p.data[An()],h,h[11],s,h[y+1]=function qD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(ds(s)))),s}(o,l),c,y)}(s,o,null,!0),rv}function sv(s,o,l,c,h){let p=null;const y=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<y&&(p=o[w],c=Fn(c,p.hostAttrs,h),p!==s);)w++;return null!==s&&(l.directiveStylingLast=w),c}function Fn(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),rt(s,y,!!l||o[++p]))}return void 0===s?null:s}function Hw(s,o,l,c,h,p){const y=null===o;let w;for(;h>0;){const I=s[h],S=Array.isArray(I),R=S?I[1]:I,O=null===R;let K=l[h+1];K===Gt&&(K=O?St:void 0);let re=O?Ua(K,c):R===c?K:void 0;if(S&&!tu(re)&&(re=Ua(I,c)),tu(re)&&(w=re,y))return w;const Ce=s[h+1];h=y?Ds(Ce):Yo(Ce)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(w=Ua(I,c))}return w}function tu(s){return void 0!==s}function av(s,o=""){const l=Pe(),c=Yt(),h=s+22,p=c.firstCreatePass?Sd(c,h,1,o,null):c.data[h],y=l[h]=function Z_(s,o){return s.createText(o)}(l[11],o);Ef(c,l,y,p),Or(p,!1)}function Sm(s){return _i("",s,""),Sm}function _i(s,o,l){const c=Pe(),h=function ta(s,o,l,c){return mi(s,Aa(),l)?o+we(l)+c:Gt}(c,s,o,l);return h!==Gt&&function tl(s,o,l){const c=Ei(o,s);!function Y_(s,o,l){s.setValue(o,l)}(s[11],c,l)}(c,An(),h),_i}const su=void 0;var tp=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jl(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let sa={};function oa(s){const o=function Zw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=ao(o);if(l)return l;const c=o.split("-")[0];if(l=ao(c),l)return l;if("en"===c)return tp;throw new Ie(701,!1)}function Hl(s){return oa(s)[wt.PluralCase]}function ao(s){return s in sa||(sa[s]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[s]),sa[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Ms="en-US";let zd=Ms;function fr(s,o,l,c,h){if(s=J(s),Array.isArray(s))for(let p=0;p<s.length;p++)fr(s[p],o,l,c,h);else{const p=Yt(),y=Pe();let w=Al(s)?s:J(s.provide),I=fd(s);const S=nr(),R=1048575&S.providerIndexes,O=S.directiveStart,K=S.providerIndexes>>20;if(Al(s)||!s.multi){const re=new fi(I,h,$c),Ce=Lm(w,o,h?R:R+K,O);-1===Ce?(js(ss(S,y),p,w),rn(p,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(re),y.push(re)):(l[Ce]=re,y[Ce]=re)}else{const re=Lm(w,o,R+K,O),Ce=Lm(w,o,R,R+K),He=re>=0&&l[re],Ze=Ce>=0&&l[Ce];if(h&&!Ze||!h&&!He){js(ss(S,y),p,w);const ct=function gE(s,o,l,c,h){const p=new fi(s,l,$c);return p.multi=[],p.index=o,p.componentProviders=0,kv(p,h,c&&!l),p}(h?fT:ql,l.length,h,c,I);!h&&Ze&&(l[Ce].providerFactory=ct),rn(p,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ct),y.push(ct)}else rn(p,s,re>-1?re:Ce,kv(l[h?Ce:re],I,!h&&c));!h&&c&&Ze&&l[Ce].componentProviders++}}}function rn(s,o,l,c){const h=Al(o),p=function TC(s){return!!s.useClass}(o);if(h||p){const I=(p?J(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=S.indexOf(l);-1===R?S.push(l,[c,I]):S[R+1].push(c,I)}else S.push(l,I)}}}function kv(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Lm(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function ql(s,o,l,c){return yi(this.multi,[])}function fT(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Oi(l,l[1],this.providerFactory.index,c);p=w.slice(0,y),yi(h,p);for(let I=y;I<w.length;I++)p.push(w[I])}else p=[],yi(h,p);return p}function yi(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Yd(s,o=[]){return l=>{l.providersResolver=(c,h)=>function hT(s,o,l){const c=Yt();if(c.firstCreatePass){const h=qr(s);fr(l,c.data,c.blueprint,h,!0),fr(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class fu{}class lo{}function mE(s,o){return new _E(s,o??null)}class _E extends fu{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nd(this);const c=vt(o);this._bootstrapComponents=Qa(c.bootstrap),this._r3Injector=nw(o,l,[{provide:fu,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Nv extends lo{constructor(o){super(),this.moduleType=o}create(o){return new _E(this.moduleType,o)}}class qt extends fu{constructor(o,l,c){super(),this.componentFactoryResolver=new Nd(this),this.instance=null;const h=new k_([...o,{provide:fu,useValue:this},{provide:ff,useValue:this.componentFactoryResolver}],l||cf(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Pv(s,o,l=null){return new qt(s,o,l).injector}let Um=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const c=x_(0,l.type),h=c.length>0?Pv([c],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=tn({token:s,providedIn:"environment",factory:()=>new s(_n(Ya))}),s})();function Qd(s){s.getStandaloneInjector=o=>o.get(Um).getOrCreateStandaloneInjector(s)}function Vm(s,o,l,c){return function SE(s,o,l,c,h,p){const y=o+l;return mi(s,y,h)?Xo(s,y+1,p?c.call(p,h):c(h)):gu(s,y+1)}(Pe(),rr(),s,o,l,c)}function Bv(s,o,l,c,h){return function Uv(s,o,l,c,h,p,y){const w=o+l;return function ea(s,o,l,c){const h=mi(s,o,l);return mi(s,o+1,c)||h}(s,w,h,p)?Xo(s,w+2,y?c.call(y,h,p):c(h,p)):gu(s,w+2)}(Pe(),rr(),s,o,l,c,h)}function gu(s,o){const l=s[o];return l===Gt?void 0:l}function Hv(s){return o=>{setTimeout(s,void 0,o)}}const co=class Si extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){let h=o,p=l||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),p=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(p=Hv(p),h&&(h=Hv(h)),y&&(y=Hv(y)));const w=super.subscribe({next:h,error:p,complete:y});return o instanceof B.w0&&o.add(w),w}};function ca(){return this._results[Ol()]()}class pp{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Ol(),c=pp.prototype;c[l]||(c[l]=ca)}get changes(){return this._changes||(this._changes=new co)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=bn(o);(this._changesDetected=!function Nn(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Kl=(()=>{class s{}return s.__NG_ELEMENT_ID__=CT,s})();const ME=Kl,IT=class extends ME{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o,l){const c=this._declarationTContainer.tViews,h=Df(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),Ad(c,h,o),new Nl(h)}};function CT(){return jm(nr(),Pe())}function jm(s,o){return 4&s.type?new IT(o,s,Bc(s,o)):null}let Hm=(()=>{class s{}return s.__NG_ELEMENT_ID__=DT,s})();function DT(){return NE(nr(),Pe())}const TT=Hm,RE=class extends TT{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Bc(this._hostTNode,this._hostLView)}get injector(){return new Lo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Fa(this._hostTNode,this._hostLView);if(Fh(o)){const l=Es(o,this._hostLView),c=ir(o);return new Lo(l[1].data[c+8],l)}return new Lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=kE(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(l||{},p);return this.insert(y,h),y}createComponent(o,l,c,h,p){const y=o&&!function os(s){return"function"==typeof s}(o);let w;if(y)w=l;else{const O=l||{};w=O.index,c=O.injector,h=O.projectableNodes,p=O.environmentInjector||O.ngModuleRef}const I=y?o:new Uf(V(o)),S=c||this.parentInjector;if(!p&&null==I.ngModule){const K=(y?S:this.parentInjector).get(Ya,null);K&&(p=K)}const R=I.create(S,h,void 0,p);return this.insert(R.hostView,w),R}insert(o,l){const c=o._lView,h=c[1];if(function mc(s){return li(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const O=c[3],K=new RE(O,O[6],O[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(l),y=this._lContainer;!function XC(s,o,l,c){const h=10+c,p=l.length;c>0&&(l[h-1][4]=o),c<p-10?(o[4]=l[h],Ws(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function eD(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=64}(h,c,y,p);const w=ty(p,y),I=c[11],S=Wn(I,y[7]);return null!==S&&function ax(s,o,l,c,h,p){c[0]=h,c[6]=o,xl(s,c,l,1,h,p)}(h,y[6],I,c,S,w),o.attachToViewContainerRef(),Ws($v(y),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=kE(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Rg(this._lContainer,l);c&&(Yn($v(this._lContainer),l),kg(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Rg(this._lContainer,l);return c&&null!=Yn($v(this._lContainer),l)?new Nl(c):null}_adjustIndex(o,l=0){return o??this.length+l}};function kE(s){return s[8]}function $v(s){return s[8]||(s[8]=[])}function NE(s,o){let l;const c=o[s.index];if(li(c))l=c;else{let h;if(8&s.type)h=kn(c);else{const p=o[11];h=p.createComment("");const y=Dr(s,o);jc(p,Wn(p,y),h,function sD(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=l=Ry(c,o,h,s),Of(o,l)}return new RE(l,s,o)}class zv{constructor(o){this.queryList=o,this.matches=null}clone(){return new zv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const y=l.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new Gv(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Yl(o,l).matches&&this.queries[l].setDirty()}}class Wv{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class qv{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new qv(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class $m{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new $m(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,PE(l,p)),this.matchTNodeWithReadOption(o,l,Ba(l,o,p,!1,!1))}else c===Kl?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Ba(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===vg||h===Hm||h===Kl&&4&l.type)this.addMatch(l.index,-2);else{const p=Ba(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function PE(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function Kv(s,o,l,c){return-1===l?function xT(s,o){return 11&s.type?Bc(s,o):4&s.type?jm(s,o):null}(o,s):-2===l?function Hr(s,o,l){return l===vg?Bc(o,s):l===Kl?jm(o,s):l===Hm?NE(o,s):void 0}(s,o,c):Oi(s,s[1],l,o)}function zm(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=l.matches,w=[];for(let I=0;I<y.length;I+=2){const S=y[I];w.push(S<0?null:Kv(o,p[S],y[I+1],l.metadata.read))}h.matches=w}return h.matches}function gp(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const y=zm(s,o,h,l);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)c.push(y[w/2]);else{const S=p[w+1],R=o[-I];for(let O=10;O<R.length;O++){const K=R[O];K[17]===K[3]&&gp(K[1],K,S,c)}if(null!==R[9]){const O=R[9];for(let K=0;K<O.length;K++){const re=O[K];gp(re[1],re,S,c)}}}}}return c}function Gm(s){const o=Pe(),l=Yt(),c=xa();vc(c+1);const h=Yl(l,c);if(s.dirty&&pl(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?gp(l,o,c,[]):zm(l,o,h,c);s.reset(p,JA),s.notifyOnChanges()}return!0}return!1}function ol(s,o,l){const c=Yt();c.firstCreatePass&&(Zl(c,new Wv(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),mp(c,Pe(),o)}function Zv(s,o,l,c){const h=Yt();if(h.firstCreatePass){const p=nr();Zl(h,new Wv(o,l,c),p.index),function mu(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}mp(h,Pe(),l)}function OE(){return function FE(s,o){return s[19].queries[o].queryList}(Pe(),xa())}function mp(s,o,l){const c=new pp(4==(4&l));Cy(s,o,c,c.destroy),null===o[19]&&(o[19]=new Gv),o[19].queries.push(new zv(c))}function Zl(s,o,l){null===s.queries&&(s.queries=new qv),s.queries.track(new $m(o,l))}function Yl(s,o){return s.queries.getByIndex(o)}function nh(s,o){return jm(s,o)}function wp(...s){}const GE=new En("Application Initializer");let oh=(()=>{class s{constructor(l){this.appInits=l,this.resolve=wp,this.reject=wp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Ud(p))l.push(p);else if(qy(p)){const y=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});l.push(y)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(_n(GE,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Nr=new En("AppId",{providedIn:"root",factory:function WE(){return`${sb()}${sb()}${sb()}`}});function sb(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qE=new En("Platform Initializer"),KE=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ZE=new En("appBootstrapListener"),$T=new En("AnimationModuleType");let YE=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const ah=new En("LocaleId",{providedIn:"root",factory:()=>C(ah,tt.Optional|tt.SkipSelf)||function ab(){return typeof $localize<"u"&&$localize.locale||Ms}()}),Ep=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XE{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let zT=(()=>{class s{compileModuleSync(l){return new Nv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=Qa(vt(l).declarations).reduce((y,w)=>{const I=V(w);return I&&y.push(new Uf(I)),y},[]);return new XE(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const WT=(()=>Promise.resolve(0))();function rc(s){typeof Zone>"u"?WT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Gi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new Ie(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function lh(){let s=Pt.requestAnimationFrame,o=Pt.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function rI(s){const o=()=>{!function nI(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Pt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,db(s),s.isCheckStableRunning=!0,Xm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),db(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,y,w)=>{try{return e_(s),l.invokeTask(h,p,y,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),iI(s)}},onInvoke:(l,c,h,p,y,w,I)=>{try{return e_(s),l.invoke(h,p,y,w,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),iI(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,db(s),Xm(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gi.isInAngularZone())throw new Ie(909,!1)}static assertNotInAngularZone(){if(Gi.isInAngularZone())throw new Ie(909,!1)}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,Jm,wp,wp);try{return p.runTask(y,l,c)}finally{p.cancelTask(y)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const Jm={};function Xm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function db(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function e_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function iI(s){s._nesting--,Xm(s)}class hb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}const fb=new En(""),pb=new En("");let ch,gb=(()=>{class s{constructor(l,c,h){this._ngZone=l,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ch||(function Cp(s){ch=s}(h),h.addToWindow(c)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gi.assertNotInAngularZone(),rc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rc(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(_n(Gi),_n(Ip),_n(pb))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),Ip=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return ch?.findTestabilityInTree(this,l,c)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),ua=null;const t_=new En("AllowMultipleToken"),Dp=new En("PlatformDestroyListeners");class YT{constructor(o,l){this.name=o,this.token=l}}function r_(s,o,l=[]){const c=`Platform: ${o}`,h=new En(c);return(p=[])=>{let y=mb();if(!y||y.injector.get(t_,!1)){const w=[...l,...p,{provide:h,useValue:!0}];s?s(w):function QT(s){if(ua&&!ua.get(t_,!1))throw new Ie(400,!1);ua=s;const o=s.get(lI);(function Tp(s){const o=s.get(qE,null);o&&o.forEach(l=>l())})(s)}(function aI(s=[],o){return Ed.create({name:o,providers:[{provide:Za,useValue:"platform"},{provide:Dp,useValue:new Set([()=>ua=null])},...s]})}(w,c))}return function oI(s){const o=mb();if(!o)throw new Ie(401,!1);return o}()}}function mb(){return ua?.get(lI)??null}let lI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const h=function uh(s,o){let l;return l="noop"===s?new hb:("zone.js"===s?void 0:s)||new Gi(o),l}(c?.ngZone,function cI(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:Gi,useValue:h}];return h.run(()=>{const y=Ed.create({providers:p,parent:this.injector,name:l.moduleType.name}),w=l.create(y),I=w.injector.get(Eg,null);if(!I)throw new Ie(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:R=>{I.handleError(R)}});w.onDestroy(()=>{wu(this._modules,w),S.unsubscribe()})}),function i_(s,o,l){try{const c=l();return Ud(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(I,h,()=>{const S=w.injector.get(oh);return S.runInitializers(),S.donePromise.then(()=>(function mv(s){Kt(s,"Expected localeId to be defined"),"string"==typeof s&&(zd=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(ah,Ms)||Ms),this._moduleDoBootstrap(w),w))})})}bootstrapModule(l,c=[]){const h=bu({},c);return function qT(s,o,l){const c=new Nv(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(dh);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Ie(403,!1);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ie(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const l=this._injector.get(Dp,null);l&&(l.forEach(c=>c()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(_n(Ed))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function bu(s,o){return Array.isArray(o)?o.reduce(bu,s):{...s,...o}}let dh=(()=>{class s{constructor(l,c,h){this._zone=l,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new k.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new k.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Gi.assertNotInAngularZone(),rc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Gi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(p,y.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,c){const h=l instanceof C0;if(!this._injector.get(oh).done)throw!h&&Ge(l),new Ie(405,false);let y;y=h?l:this._injector.get(ff).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const w=function ZT(s){return s.isBoundToModule}(y)?void 0:this._injector.get(fu),S=y.create(Ed.NULL,[],c||y.selector,w),R=S.location.nativeElement,O=S.injector.get(fb,null);return O?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),wu(this.components,S),O?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new Ie(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;wu(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(ZE,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>wu(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Ie(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(_n(Gi),_n(Ya),_n(Eg))},s.\u0275prov=tn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function wu(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let yb=!0,s_=!1;function vb(){return s_=!0,yb}function ic(){if(s_)throw new Error("Cannot enable prod mode after platform setup.");yb=!1}let XT=(()=>{class s{}return s.__NG_ELEMENT_ID__=bb,s})();function bb(s){return function eS(s,o,l){if(dc(s)&&!l){const c=nn(s.index,o);return new Nl(c,c)}return 47&s.type?new Nl(o[16],o):null}(nr(),Pe(),16==(16&s))}class Iu{constructor(){}supports(o){return Kc(o)}create(o){return new Tb(o)}}const sc=(s,o)=>o;class Tb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||sc}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const y=!c||l&&l.currentIndex<Cu(c,h,p)?l:c,w=Cu(y,h,p),I=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{p||(p=[]);const S=w-h,R=I-h;if(S!=R){for(let K=0;K<S;K++){const re=K<p.length?p[K]:p[K]=0,Ce=re+K;R<=Ce&&Ce<S&&(p[K]=re+1)}p[y.previousIndex]=R-S}}w!==I&&o(y,w,I)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Kc(o))throw new Ie(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],y=this._trackByFn(w,p),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,p,y,w)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,y,w),c=!0),l=l._next}else h=0,function Aw(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Ol()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,w=>{y=this._trackByFn(h,w),null!==l&&Object.is(l.trackById,y)?(c&&(l=this._verifyReinsertion(l,w,y,h)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,y,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new ph(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new Sb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ph{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gh{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class Sb{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new gh,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cu(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class mI{constructor(){}supports(o){return o instanceof Map||vm(o)}create(){return new sS}}class sS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||vm(o)))throw new Ie(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new Ab(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Ab{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c_(){return new Mp([new Iu])}let Mp=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||c_()),deps:[[s,new xt,new Be]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Ie(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:c_}),s})();function yI(){return new xb([new mI])}let xb=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||yI()),deps:[[s,new xt,new Be]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Ie(901,!1)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:yI}),s})();const aS=r_(null,"core",[]);let vI=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(_n(dh))},s.\u0275mod=Et({type:s}),s.\u0275inj=zt({}),s})();function bI(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ht,Me,P)=>{P.d(Me,{Z:()=>Ie});var d=P(2090),B=P(4859),k=P(9681),se=P(1877);class ce{constructor(we,me){this._delegate=we,this.firebase=me,(0,k._addComponent)(we,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(we,me=k._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(we);return!et.isInitialized()&&"EXPLICIT"===(null===(Xe=et.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&et.initialize(),et.getImmediate({identifier:me})}_removeServiceInstance(we,me=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(me)}_addComponent(we){(0,k._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,k._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function ve(){const it=function fe(it){const we={},me={__esModule:!0,initializeApp:function Fe(ie,he={}){const ye=k.initializeApp(ie,he);if((0,d.r3)(we,ye.name))return we[ye.name];const Q=new it(ye,me);return we[ye.name]=Q,Q},app:et,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function De(ie){const he=ie.name,ye=he.replace("-compat","");if(k._registerComponent(ie)&&"PUBLIC"===ie.type){const Q=(ee=et())=>{if("function"!=typeof ee[ye])throw ue.create("invalid-app-argument",{appName:he});return ee[ye]()};void 0!==ie.serviceProps&&(0,d.ZB)(Q,ie.serviceProps),me[ye]=Q,it.prototype[ye]=function(...ee){return this._getService.bind(this,he).apply(this,ie.multipleInstances?ee:[])}}return"PUBLIC"===ie.type?me[ye]:null},removeApp:function Xe(ie){delete we[ie]},useAsService:function We(ie,he){return"serverAuth"===he?null:he},modularAPIs:k}};function et(ie){if(!(0,d.r3)(we,ie=ie||k._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:ie});return we[ie]}return me.default=me,Object.defineProperty(me,"apps",{get:function Ne(){return Object.keys(we).map(ie=>we[ie])}}),et.App=it,me}(ce);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function we(me){(0,d.ZB)(it,me)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),it}(),G=new se.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=z;!function Oe(it){(0,k.registerVersion)("@firebase/app-compat","0.1.33",it)}()},9681:(ht,Me,P)=>{P.r(Me),P.d(Me,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>on,_addOrOverwriteComponent:()=>tn,_apps:()=>mn,_clearComponents:()=>po,_components:()=>Bn,_getProvider:()=>zt,_registerComponent:()=>Wt,_removeServiceInstance:()=>br,deleteApp:()=>Ri,getApp:()=>Un,getApps:()=>Mi,initializeApp:()=>zr,onLog:()=>Vn,registerVersion:()=>gr,setLogLevel:()=>fn});var d=P(5861),B=P(4859),k=P(1877),se=P(2090),ce=P(8766);class _e{constructor(W){this.container=W}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function ue(U){return"VERSION"===U.getComponent()?.type}(q)){const Ae=q.getImmediate();return`${Ae.library}/${Ae.version}`}return null}).filter(q=>q).join(" ")}}const fe="@firebase/app",z=new k.Yd("@firebase/app"),Kt="[DEFAULT]",qe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,Bn=new Map;function on(U,W){try{U.container.addComponent(W)}catch(q){z.debug(`Component ${W.name} failed to register with FirebaseApp ${U.name}`,q)}}function tn(U,W){U.container.addOrOverwriteComponent(W)}function Wt(U){const W=U.name;if(Bn.has(W))return z.debug(`There were multiple attempts to register component ${W}.`),!1;Bn.set(W,U);for(const q of mn.values())on(q,U);return!0}function zt(U,W){const q=U.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),U.container.getProvider(W)}function br(U,W,q=Kt){zt(U,W).clearInstance(q)}function po(){Bn.clear()}const Tn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ki{constructor(W,q,Ae){this._isDeleted=!1,this._options=Object.assign({},W),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=Ae,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(W){this.checkDestroyed(),this._automaticDataCollectionEnabled=W}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(W){this._isDeleted=W}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}const xi="9.9.4";function zr(U,W={}){"object"!=typeof W&&(W={name:W});const q=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},W),Ae=q.name;if("string"!=typeof Ae||!Ae)throw Tn.create("bad-app-name",{appName:String(Ae)});const ze=mn.get(Ae);if(ze){if((0,se.vZ)(U,ze.options)&&(0,se.vZ)(q,ze.config))return ze;throw Tn.create("duplicate-app",{appName:Ae})}const Et=new B.H0(Ae);for(const an of Bn.values())Et.addComponent(an);const ln=new Ki(U,q,Et);return mn.set(Ae,ln),ln}function Un(U=Kt){const W=mn.get(U);if(!W)throw Tn.create("no-app",{appName:U});return W}function Mi(){return Array.from(mn.values())}function Ri(U){return tt.apply(this,arguments)}function tt(){return(tt=(0,d.Z)(function*(U){const W=U.name;mn.has(W)&&(mn.delete(W),yield Promise.all(U.container.getProviders().map(q=>q.delete())),U.isDeleted=!0)})).apply(this,arguments)}function gr(U,W,q){var Ae;let ze=null!==(Ae=qe[U])&&void 0!==Ae?Ae:U;q&&(ze+=`-${q}`);const Et=ze.match(/\s|\//),ln=W.match(/\s|\//);if(Et||ln){const an=[`Unable to register library "${ze}" with version "${W}":`];return Et&&an.push(`library name "${ze}" contains illegal characters (whitespace or "/")`),Et&&ln&&an.push("and"),ln&&an.push(`version name "${W}" contains illegal characters (whitespace or "/")`),void z.warn(an.join(" "))}Wt(new B.wA(`${ze}-version`,()=>({library:ze,version:W}),"VERSION"))}function Vn(U,W){if(null!==U&&"function"!=typeof U)throw Tn.create("invalid-log-argument");(0,k.Am)(U,W)}function fn(U){(0,k.Ub)(U)}const wn="firebase-heartbeat-store";let In=null;function vn(){return In||(In=(0,ce.X3)("firebase-heartbeat-database",1,{upgrade:(U,W)=>{0===W&&U.createObjectStore(wn)}}).catch(U=>{throw Tn.create("idb-open",{originalErrorMessage:U.message})})),In}function gt(){return(gt=(0,d.Z)(function*(U){var W;try{return(yield vn()).transaction(wn).objectStore(wn).get(mr(U))}catch(q){if(q instanceof se.ZR)z.warn(q.message);else{const Ae=Tn.create("idb-get",{originalErrorMessage:null===(W=q)||void 0===W?void 0:W.message});z.warn(Ae.message)}}})).apply(this,arguments)}function Pt(U,W){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,d.Z)(function*(U,W){var q;try{const ze=(yield vn()).transaction(wn,"readwrite");return yield ze.objectStore(wn).put(W,mr(U)),ze.done}catch(Ae){if(Ae instanceof se.ZR)z.warn(Ae.message);else{const ze=Tn.create("idb-set",{originalErrorMessage:null===(q=Ae)||void 0===q?void 0:q.message});z.warn(ze.message)}}})).apply(this,arguments)}function mr(U){return`${U.name}!${U.options.appId}`}class Sr{constructor(W){this.container=W,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Zt(q),this._heartbeatsCachePromise=this._storage.read().then(Ae=>(this._heartbeatsCache=Ae,Ae))}triggerHeartbeat(){var W=this;return(0,d.Z)(function*(){const Ae=W.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ze=Bt();if(null===W._heartbeatsCache&&(W._heartbeatsCache=yield W._heartbeatsCachePromise),W._heartbeatsCache.lastSentHeartbeatDate!==ze&&!W._heartbeatsCache.heartbeats.some(Et=>Et.date===ze))return W._heartbeatsCache.heartbeats.push({date:ze,agent:Ae}),W._heartbeatsCache.heartbeats=W._heartbeatsCache.heartbeats.filter(Et=>{const ln=new Date(Et.date).valueOf();return Date.now()-ln<=2592e6}),W._storage.overwrite(W._heartbeatsCache)})()}getHeartbeatsHeader(){var W=this;return(0,d.Z)(function*(){if(null===W._heartbeatsCache&&(yield W._heartbeatsCachePromise),null===W._heartbeatsCache||0===W._heartbeatsCache.heartbeats.length)return"";const q=Bt(),{heartbeatsToSend:Ae,unsentEntries:ze}=function Gr(U,W=1024){const q=[];let Ae=U.slice();for(const ze of U){const Et=q.find(ln=>ln.agent===ze.agent);if(Et){if(Et.dates.push(ze.date),Y(q)>W){Et.dates.pop();break}}else if(q.push({agent:ze.agent,dates:[ze.date]}),Y(q)>W){q.pop();break}Ae=Ae.slice(1)}return{heartbeatsToSend:q,unsentEntries:Ae}}(W._heartbeatsCache.heartbeats),Et=(0,se.L)(JSON.stringify({version:2,heartbeats:Ae}));return W._heartbeatsCache.lastSentHeartbeatDate=q,ze.length>0?(W._heartbeatsCache.heartbeats=ze,yield W._storage.overwrite(W._heartbeatsCache)):(W._heartbeatsCache.heartbeats=[],W._storage.overwrite(W._heartbeatsCache)),Et})()}}function Bt(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(W){this.app=W,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var W=this;return(0,d.Z)(function*(){return(yield W._canUseIndexedDBPromise)&&(yield function pt(U){return gt.apply(this,arguments)}(W.app))||{heartbeats:[]}})()}overwrite(W){var q=this;return(0,d.Z)(function*(){var Ae;if(yield q._canUseIndexedDBPromise){const Et=yield q.read();return Pt(q.app,{lastSentHeartbeatDate:null!==(Ae=W.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Et.lastSentHeartbeatDate,heartbeats:W.heartbeats})}})()}add(W){var q=this;return(0,d.Z)(function*(){var Ae;if(yield q._canUseIndexedDBPromise){const Et=yield q.read();return Pt(q.app,{lastSentHeartbeatDate:null!==(Ae=W.lastSentHeartbeatDate)&&void 0!==Ae?Ae:Et.lastSentHeartbeatDate,heartbeats:[...Et.heartbeats,...W.heartbeats]})}})()}}function Y(U){return(0,se.L)(JSON.stringify({version:2,heartbeats:U})).length}!function j(U){Wt(new B.wA("platform-logger",W=>new _e(W),"PRIVATE")),Wt(new B.wA("heartbeat",W=>new Sr(W),"PRIVATE")),gr(fe,"0.7.32",U),gr(fe,"0.7.32","esm2017"),gr("fire-js","")}("")},4859:(ht,Me,P)=>{P.d(Me,{H0:()=>fe,wA:()=>k});var d=P(5861),B=P(2090);class k{constructor(z,G,J){this.name=z,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const se="[DEFAULT]";class ce{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const J=new B.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const J=this.normalizeInstanceIdentifier(z?.identifier),$e=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if($e)return null;throw Oe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function ue(ve){return"EAGER"===ve.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(Oe)}catch{}}}}clearInstance(z=se){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,d.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=se){return this.instances.has(z)}getOptions(z=se){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,J=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Oe,Ie]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&Ie.resolve($e);return $e}onInit(z,G){var J;const $e=this.normalizeInstanceIdentifier(G),Oe=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;Oe.add(z),this.onInitCallbacks.set($e,Oe);const Ie=this.instances.get($e);return Ie&&z(Ie,$e),()=>{Oe.delete(z)}}invokeOnInitCallbacks(z,G){const J=this.onInitCallbacks.get(G);if(J)for(const $e of J)try{$e(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let J=this.instances.get(z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=z,ve===se?void 0:ve),options:G}),this.instances.set(z,J),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(J,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,J)}catch{}var ve;return J||null}normalizeInstanceIdentifier(z=se){return this.component?this.component.multipleInstances?z:se:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new ce(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Me,P)=>{P.d(Me,{Am:()=>ve,Ub:()=>fe,Yd:()=>ue,in:()=>B});const d=[];var B=(()=>{return(z=B||(B={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",B;var z})();const k={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},se=B.INFO,ce={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},_e=(z,G,...J)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Oe=ce[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${$e}]  ${z.name}:`,...J)};class ue{constructor(G){this.name=G,this._logLevel=se,this._logHandler=_e,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in B))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?k[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...G),this._logHandler(this,B.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...G),this._logHandler(this,B.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,B.INFO,...G),this._logHandler(this,B.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,B.WARN,...G),this._logHandler(this,B.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...G),this._logHandler(this,B.ERROR,...G)}}function fe(z){d.forEach(G=>{G.setLogLevel(z)})}function ve(z,G){for(const J of d){let $e=null;G&&G.level&&($e=k[G.level]),J.userLogHandler=null===z?null:(Oe,Ie,...it)=>{const we=it.map(me=>{if(null==me)return null;if("string"==typeof me)return me;if("number"==typeof me||"boolean"==typeof me)return me.toString();if(me instanceof Error)return me.message;try{return JSON.stringify(me)}catch{return null}}).filter(me=>me).join(" ");Ie>=($e??Oe.logLevel)&&z({level:B[Ie].toLowerCase(),message:we,args:it,type:Oe.name})}}}},8766:(ht,Me,P)=>{P.d(Me,{Lj:()=>Fe,X3:()=>et});var d=P(5861);let k,se;const ue=new WeakMap,fe=new WeakMap,ve=new WeakMap,z=new WeakMap,G=new WeakMap;let Oe={get(he,ye,Q){if(he instanceof IDBTransaction){if("done"===ye)return fe.get(he);if("objectStoreNames"===ye)return he.objectStoreNames||ve.get(he);if("store"===ye)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return me(he[ye])},set:(he,ye,Q)=>(he[ye]=Q,!0),has:(he,ye)=>he instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in he};function we(he){return"function"==typeof he?function it(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...ye){return he.apply(Xe(this),ye),me(ue.get(this))}:function(...ye){return me(he.apply(Xe(this),ye))}:function(ye,...Q){const ee=he.call(Xe(this),ye,...Q);return ve.set(ee,ye.sort?ye.sort():[ye]),me(ee)}}(he):(he instanceof IDBTransaction&&function $e(he){if(fe.has(he))return;const ye=new Promise((Q,ee)=>{const pe=()=>{he.removeEventListener("complete",oe),he.removeEventListener("error",Ve),he.removeEventListener("abort",Ve)},oe=()=>{Q(),pe()},Ve=()=>{ee(he.error||new DOMException("AbortError","AbortError")),pe()};he.addEventListener("complete",oe),he.addEventListener("error",Ve),he.addEventListener("abort",Ve)});fe.set(he,ye)}(he),((he,ye)=>ye.some(Q=>he instanceof Q))(he,function ce(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Oe):he)}function me(he){if(he instanceof IDBRequest)return function J(he){const ye=new Promise((Q,ee)=>{const pe=()=>{he.removeEventListener("success",oe),he.removeEventListener("error",Ve)},oe=()=>{Q(me(he.result)),pe()},Ve=()=>{ee(he.error),pe()};he.addEventListener("success",oe),he.addEventListener("error",Ve)});return ye.then(Q=>{Q instanceof IDBCursor&&ue.set(Q,he)}).catch(()=>{}),G.set(ye,he),ye}(he);if(z.has(he))return z.get(he);const ye=we(he);return ye!==he&&(z.set(he,ye),G.set(ye,he)),ye}const Xe=he=>G.get(he);function et(he,ye,{blocked:Q,upgrade:ee,blocking:pe,terminated:oe}={}){const Ve=indexedDB.open(he,ye),je=me(Ve);return ee&&Ve.addEventListener("upgradeneeded",yt=>{ee(me(Ve.result),yt.oldVersion,yt.newVersion,me(Ve.transaction))}),Q&&Ve.addEventListener("blocked",()=>Q()),je.then(yt=>{oe&&yt.addEventListener("close",()=>oe()),pe&&yt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),je}function Fe(he,{blocked:ye}={}){const Q=indexedDB.deleteDatabase(he);return ye&&Q.addEventListener("blocked",()=>ye()),me(Q).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],We=new Map;function ie(he,ye){if(!(he instanceof IDBDatabase)||ye in he||"string"!=typeof ye)return;if(We.get(ye))return We.get(ye);const Q=ye.replace(/FromIndex$/,""),ee=ye!==Q,pe=De.includes(Q);if(!(Q in(ee?IDBIndex:IDBObjectStore).prototype)||!pe&&!Ne.includes(Q))return;const oe=function(){var Ve=(0,d.Z)(function*(je,...yt){const Xt=this.transaction(je,pe?"readwrite":"readonly");let Kt=Xt.store;return ee&&(Kt=Kt.index(yt.shift())),(yield Promise.all([Kt[Q](...yt),pe&&Xt.done]))[0]});return function(yt){return Ve.apply(this,arguments)}}();return We.set(ye,oe),oe}!function Ie(he){Oe=he(Oe)}(he=>({...he,get:(ye,Q,ee)=>ie(ye,Q)||he.get(ye,Q,ee),has:(ye,Q)=>!!ie(ye,Q)||he.has(ye,Q)}))},5861:(ht,Me,P)=>{function d(k,se,ce,_e,ue,fe,ve){try{var z=k[fe](ve),G=z.value}catch(J){return void ce(J)}z.done?se(G):Promise.resolve(G).then(_e,ue)}function B(k){return function(){var se=this,ce=arguments;return new Promise(function(_e,ue){var fe=k.apply(se,ce);function ve(G){d(fe,_e,ue,ve,z,"next",G)}function z(G){d(fe,_e,ue,ve,z,"throw",G)}ve(void 0)})}}P.d(Me,{Z:()=>B})}},ht=>{ht(ht.s=662)}]);